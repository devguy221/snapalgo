"use strict";(()=>{const functors=[({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{$h‍_imports([]);const universalThis=globalThis;$h‍_once.universalThis(universalThis);const{Array:Array,Date:Date,Float32Array:Float32Array,JSON:JSON,Map:Map,Math:Math,Object:Object,Promise:Promise,Proxy:Proxy,Reflect:Reflect,RegExp:FERAL_REG_EXP,Set:Set,String:String,WeakMap:WeakMap,WeakSet:WeakSet}=globalThis;$h‍_once.Array(Array),$h‍_once.Date(Date),$h‍_once.Float32Array(Float32Array),$h‍_once.JSON(JSON),$h‍_once.Map(Map),$h‍_once.Math(Math),$h‍_once.Object(Object),$h‍_once.Promise(Promise),$h‍_once.Proxy(Proxy),$h‍_once.Reflect(Reflect),$h‍_once.FERAL_REG_EXP(FERAL_REG_EXP),$h‍_once.Set(Set),$h‍_once.String(String),$h‍_once.WeakMap(WeakMap),$h‍_once.WeakSet(WeakSet);const{Error:FERAL_ERROR,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError}=globalThis;$h‍_once.FERAL_ERROR(FERAL_ERROR),$h‍_once.RangeError(RangeError),$h‍_once.ReferenceError(ReferenceError),$h‍_once.SyntaxError(SyntaxError),$h‍_once.TypeError(TypeError);const{assign:assign,create:create,defineProperties:defineProperties,entries:entries,freeze:freeze,getOwnPropertyDescriptor:getOwnPropertyDescriptor,getOwnPropertyDescriptors:getOwnPropertyDescriptors,getOwnPropertyNames:getOwnPropertyNames,getPrototypeOf:getPrototypeOf,is:is,isExtensible:isExtensible,keys:keys,prototype:objectPrototype,seal:seal,setPrototypeOf:setPrototypeOf,values:values}=Object;$h‍_once.assign(assign),$h‍_once.create(create),$h‍_once.defineProperties(defineProperties),$h‍_once.entries(entries),$h‍_once.freeze(freeze),$h‍_once.getOwnPropertyDescriptor(getOwnPropertyDescriptor),$h‍_once.getOwnPropertyDescriptors(getOwnPropertyDescriptors),$h‍_once.getOwnPropertyNames(getOwnPropertyNames),$h‍_once.getPrototypeOf(getPrototypeOf),$h‍_once.is(is),$h‍_once.isExtensible(isExtensible),$h‍_once.keys(keys),$h‍_once.objectPrototype(objectPrototype),$h‍_once.seal(seal),$h‍_once.setPrototypeOf(setPrototypeOf),$h‍_once.values(values);const{species:speciesSymbol,toStringTag:toStringTagSymbol,iterator:iteratorSymbol,matchAll:matchAllSymbol}=Symbol;$h‍_once.speciesSymbol(speciesSymbol),$h‍_once.toStringTagSymbol(toStringTagSymbol),$h‍_once.iteratorSymbol(iteratorSymbol),$h‍_once.matchAllSymbol(matchAllSymbol);const{stringify:stringifyJson}=JSON;$h‍_once.stringifyJson(stringifyJson);const fromEntries=Object.fromEntries||(entryPairs=>{const result={};for(const[prop,val]of entryPairs)result[prop]=val;return result});$h‍_once.fromEntries(fromEntries);const{defineProperty:originalDefineProperty}=Object;$h‍_once.defineProperty((object,prop,descriptor)=>{const result=originalDefineProperty(object,prop,descriptor);if(result!==object)throw TypeError(`Please report that the original defineProperty silently failed to set ${stringifyJson(String(prop))}. (SES_DEFINE_PROPERTY_FAILED_SILENTLY)`);return result});const{apply:apply,construct:construct,get:reflectGet,getOwnPropertyDescriptor:reflectGetOwnPropertyDescriptor,has:reflectHas,isExtensible:reflectIsExtensible,ownKeys:ownKeys,preventExtensions:reflectPreventExtensions,set:reflectSet}=Reflect;$h‍_once.apply(apply),$h‍_once.construct(construct),$h‍_once.reflectGet(reflectGet),$h‍_once.reflectGetOwnPropertyDescriptor(reflectGetOwnPropertyDescriptor),$h‍_once.reflectHas(reflectHas),$h‍_once.reflectIsExtensible(reflectIsExtensible),$h‍_once.ownKeys(ownKeys),$h‍_once.reflectPreventExtensions(reflectPreventExtensions),$h‍_once.reflectSet(reflectSet);const{isArray:isArray,prototype:arrayPrototype}=Array;$h‍_once.isArray(isArray),$h‍_once.arrayPrototype(arrayPrototype);const{prototype:mapPrototype}=Map;$h‍_once.mapPrototype(mapPrototype);const{revocable:proxyRevocable}=Proxy;$h‍_once.proxyRevocable(proxyRevocable);const{prototype:regexpPrototype}=RegExp;$h‍_once.regexpPrototype(regexpPrototype);const{prototype:setPrototype}=Set;$h‍_once.setPrototype(setPrototype);const{prototype:stringPrototype}=String;$h‍_once.stringPrototype(stringPrototype);const{prototype:weakmapPrototype}=WeakMap;$h‍_once.weakmapPrototype(weakmapPrototype);const{prototype:weaksetPrototype}=WeakSet;$h‍_once.weaksetPrototype(weaksetPrototype);const{prototype:functionPrototype}=Function;$h‍_once.functionPrototype(functionPrototype);const{prototype:promisePrototype}=Promise;$h‍_once.promisePrototype(promisePrototype);const uncurryThis=fn=>(thisArg,...args)=>apply(fn,thisArg,args);$h‍_once.uncurryThis(uncurryThis);const objectHasOwnProperty=uncurryThis(objectPrototype.hasOwnProperty);$h‍_once.objectHasOwnProperty(objectHasOwnProperty);const arrayFilter=uncurryThis(arrayPrototype.filter);$h‍_once.arrayFilter(arrayFilter);const arrayForEach=uncurryThis(arrayPrototype.forEach);$h‍_once.arrayForEach(arrayForEach);const arrayIncludes=uncurryThis(arrayPrototype.includes);$h‍_once.arrayIncludes(arrayIncludes);const arrayJoin=uncurryThis(arrayPrototype.join);$h‍_once.arrayJoin(arrayJoin);const arrayMap=uncurryThis(arrayPrototype.map);$h‍_once.arrayMap(arrayMap);const arrayPop=uncurryThis(arrayPrototype.pop);$h‍_once.arrayPop(arrayPop);const arrayPush=uncurryThis(arrayPrototype.push);$h‍_once.arrayPush(arrayPush);const arraySlice=uncurryThis(arrayPrototype.slice);$h‍_once.arraySlice(arraySlice);const arraySome=uncurryThis(arrayPrototype.some);$h‍_once.arraySome(arraySome);const arraySort=uncurryThis(arrayPrototype.sort);$h‍_once.arraySort(arraySort);const iterateArray=uncurryThis(arrayPrototype[iteratorSymbol]);$h‍_once.iterateArray(iterateArray);const mapSet=uncurryThis(mapPrototype.set);$h‍_once.mapSet(mapSet);const mapGet=uncurryThis(mapPrototype.get);$h‍_once.mapGet(mapGet);const mapHas=uncurryThis(mapPrototype.has);$h‍_once.mapHas(mapHas);const iterateMap=uncurryThis(mapPrototype[iteratorSymbol]);$h‍_once.iterateMap(iterateMap);const setAdd=uncurryThis(setPrototype.add);$h‍_once.setAdd(setAdd);const setForEach=uncurryThis(setPrototype.forEach);$h‍_once.setForEach(setForEach);const setHas=uncurryThis(setPrototype.has);$h‍_once.setHas(setHas);const iterateSet=uncurryThis(setPrototype[iteratorSymbol]);$h‍_once.iterateSet(iterateSet);const regexpTest=uncurryThis(regexpPrototype.test);$h‍_once.regexpTest(regexpTest);const regexpExec=uncurryThis(regexpPrototype.exec);$h‍_once.regexpExec(regexpExec);const matchAllRegExp=uncurryThis(regexpPrototype[matchAllSymbol]);$h‍_once.matchAllRegExp(matchAllRegExp);const stringEndsWith=uncurryThis(stringPrototype.endsWith);$h‍_once.stringEndsWith(stringEndsWith);const stringIncludes=uncurryThis(stringPrototype.includes);$h‍_once.stringIncludes(stringIncludes);const stringIndexOf=uncurryThis(stringPrototype.indexOf);$h‍_once.stringIndexOf(stringIndexOf);const stringMatch=uncurryThis(stringPrototype.match);$h‍_once.stringMatch(stringMatch);const stringReplace=uncurryThis(stringPrototype.replace);$h‍_once.stringReplace(stringReplace);const stringSearch=uncurryThis(stringPrototype.search);$h‍_once.stringSearch(stringSearch);const stringSlice=uncurryThis(stringPrototype.slice);$h‍_once.stringSlice(stringSlice);const stringSplit=uncurryThis(stringPrototype.split);$h‍_once.stringSplit(stringSplit);const stringStartsWith=uncurryThis(stringPrototype.startsWith);$h‍_once.stringStartsWith(stringStartsWith);const iterateString=uncurryThis(stringPrototype[iteratorSymbol]);$h‍_once.iterateString(iterateString);const weakmapDelete=uncurryThis(weakmapPrototype.delete);$h‍_once.weakmapDelete(weakmapDelete);const weakmapGet=uncurryThis(weakmapPrototype.get);$h‍_once.weakmapGet(weakmapGet);const weakmapHas=uncurryThis(weakmapPrototype.has);$h‍_once.weakmapHas(weakmapHas);const weakmapSet=uncurryThis(weakmapPrototype.set);$h‍_once.weakmapSet(weakmapSet);const weaksetAdd=uncurryThis(weaksetPrototype.add);$h‍_once.weaksetAdd(weaksetAdd);const weaksetGet=uncurryThis(weaksetPrototype.get);$h‍_once.weaksetGet(weaksetGet);const weaksetHas=uncurryThis(weaksetPrototype.has);$h‍_once.weaksetHas(weaksetHas);const functionToString=uncurryThis(functionPrototype.toString);$h‍_once.functionToString(functionToString);const{all:all}=Promise;$h‍_once.promiseAll(promises=>apply(all,Promise,[promises]));const promiseCatch=uncurryThis(promisePrototype.catch);$h‍_once.promiseCatch(promiseCatch);const promiseThen=uncurryThis(promisePrototype.then);$h‍_once.promiseThen(promiseThen);$h‍_once.getConstructorOf(fn=>reflectGet(getPrototypeOf(fn),"constructor"));const immutableObject=freeze(create(null));$h‍_once.immutableObject(immutableObject);$h‍_once.isObject(value=>Object(value)===value);$h‍_once.isError(value=>value instanceof FERAL_ERROR);const FERAL_EVAL=eval;$h‍_once.FERAL_EVAL(FERAL_EVAL);const FERAL_FUNCTION=Function;$h‍_once.FERAL_FUNCTION(FERAL_FUNCTION)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{$h‍_imports([])},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let Set,String,arrayJoin,arraySlice,freeze,is,isError,setAdd,setHas,stringIncludes,stringStartsWith,stringifyJson,toStringTagSymbol;$h‍_imports([["../commons.js",[["Set",[$h‍_a=>Set=$h‍_a]],["String",[$h‍_a=>String=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]],["arraySlice",[$h‍_a=>arraySlice=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["is",[$h‍_a=>is=$h‍_a]],["isError",[$h‍_a=>isError=$h‍_a]],["setAdd",[$h‍_a=>setAdd=$h‍_a]],["setHas",[$h‍_a=>setHas=$h‍_a]],["stringIncludes",[$h‍_a=>stringIncludes=$h‍_a]],["stringStartsWith",[$h‍_a=>stringStartsWith=$h‍_a]],["stringifyJson",[$h‍_a=>stringifyJson=$h‍_a]],["toStringTagSymbol",[$h‍_a=>toStringTagSymbol=$h‍_a]]]]]);$h‍_once.enJoin((terms,conjunction)=>{if(0===terms.length)return"(none)";if(1===terms.length)return terms[0];if(2===terms.length){const[first,second]=terms;return`${first} ${conjunction} ${second}`}return`${arrayJoin(arraySlice(terms,0,-1),", ")}, ${conjunction} ${terms[terms.length-1]}`});const an=str=>(str=""+str).length>=1&&stringIncludes("aeiouAEIOU",str[0])?"an "+str:"a "+str;$h‍_once.an(an),freeze(an);const bestEffortStringify=(payload,spaces)=>{const seenSet=new Set,replacer=(_,val)=>{switch(typeof val){case"object":return null===val?null:setHas(seenSet,val)?"[Seen]":(setAdd(seenSet,val),isError(val)?`[${val.name}: ${val.message}]`:toStringTagSymbol in val?`[${val[toStringTagSymbol]}]`:val);case"function":return`[Function ${val.name||"<anon>"}]`;case"string":return stringStartsWith(val,"[")?`[${val}]`:val;case"undefined":case"symbol":return`[${String(val)}]`;case"bigint":return`[${val}n]`;case"number":return is(val,NaN)?"[NaN]":val===1/0?"[Infinity]":val===-1/0?"[-Infinity]":val;default:return val}};try{return stringifyJson(payload,replacer,spaces)}catch(_err){return"[Something that failed to stringify]"}};$h‍_once.bestEffortStringify(bestEffortStringify),freeze(bestEffortStringify)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{$h‍_imports([])},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let RangeError,TypeError,WeakMap,arrayJoin,arrayMap,arrayPop,arrayPush,assign,freeze,globalThis,is,isError,stringIndexOf,stringReplace,stringSlice,stringStartsWith,weakmapDelete,weakmapGet,weakmapHas,weakmapSet,an,bestEffortStringify;$h‍_imports([["../commons.js",[["RangeError",[$h‍_a=>RangeError=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["WeakMap",[$h‍_a=>WeakMap=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]],["arrayMap",[$h‍_a=>arrayMap=$h‍_a]],["arrayPop",[$h‍_a=>arrayPop=$h‍_a]],["arrayPush",[$h‍_a=>arrayPush=$h‍_a]],["assign",[$h‍_a=>assign=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["globalThis",[$h‍_a=>globalThis=$h‍_a]],["is",[$h‍_a=>is=$h‍_a]],["isError",[$h‍_a=>isError=$h‍_a]],["stringIndexOf",[$h‍_a=>stringIndexOf=$h‍_a]],["stringReplace",[$h‍_a=>stringReplace=$h‍_a]],["stringSlice",[$h‍_a=>stringSlice=$h‍_a]],["stringStartsWith",[$h‍_a=>stringStartsWith=$h‍_a]],["weakmapDelete",[$h‍_a=>weakmapDelete=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]],["weakmapHas",[$h‍_a=>weakmapHas=$h‍_a]],["weakmapSet",[$h‍_a=>weakmapSet=$h‍_a]]]],["./stringify-utils.js",[["an",[$h‍_a=>an=$h‍_a]],["bestEffortStringify",[$h‍_a=>bestEffortStringify=$h‍_a]]]],["./types.js",[]],["./internal-types.js",[]]]);const declassifiers=new WeakMap,quote=(payload,spaces)=>{const result=freeze({toString:freeze(()=>bestEffortStringify(payload,spaces))});return weakmapSet(declassifiers,result,payload),result};freeze(quote);const hiddenDetailsMap=new WeakMap,getMessageString=({template:template,args:args})=>{const parts=[template[0]];for(let i=0;i<args.length;i+=1){const arg=args[i];let argStr;argStr=weakmapHas(declassifiers,arg)?""+arg:isError(arg)?`(${an(arg.name)})`:`(${an(typeof arg)})`,arrayPush(parts,argStr,template[i+1])}return arrayJoin(parts,"")},DetailsTokenProto=freeze({toString(){const hiddenDetails=weakmapGet(hiddenDetailsMap,this);return void 0===hiddenDetails?"[Not a DetailsToken]":getMessageString(hiddenDetails)}});freeze(DetailsTokenProto.toString);const redactedDetails=(template,...args)=>{const detailsToken=freeze({__proto__:DetailsTokenProto});return weakmapSet(hiddenDetailsMap,detailsToken,{template:template,args:args}),detailsToken};freeze(redactedDetails);const unredactedDetails=(template,...args)=>(args=arrayMap(args,arg=>weakmapHas(declassifiers,arg)?arg:quote(arg)),redactedDetails(template,...args));$h‍_once.unredactedDetails(unredactedDetails),freeze(unredactedDetails);const getLogArgs=({template:template,args:args})=>{const logArgs=[template[0]];for(let i=0;i<args.length;i+=1){let arg=args[i];weakmapHas(declassifiers,arg)&&(arg=weakmapGet(declassifiers,arg));const priorWithoutSpace=stringReplace(arrayPop(logArgs)||"",/ $/,"");""!==priorWithoutSpace&&arrayPush(logArgs,priorWithoutSpace);const nextWithoutSpace=stringReplace(template[i+1],/^ /,"");arrayPush(logArgs,arg,nextWithoutSpace)}return""===logArgs[logArgs.length-1]&&arrayPop(logArgs),logArgs},hiddenMessageLogArgs=new WeakMap;let errorTagNum=0;const errorTags=new WeakMap,tagError=(err,optErrorName=err.name)=>{let errorTag=weakmapGet(errorTags,err);return void 0!==errorTag||(errorTagNum+=1,errorTag=`${optErrorName}#${errorTagNum}`,weakmapSet(errorTags,err,errorTag)),errorTag},makeError=(optDetails=redactedDetails`Assert failed`,ErrorConstructor=globalThis.Error,{errorName:errorName}={})=>{"string"==typeof optDetails&&(optDetails=redactedDetails([optDetails]));const hiddenDetails=weakmapGet(hiddenDetailsMap,optDetails);if(void 0===hiddenDetails)throw new TypeError("unrecognized details "+quote(optDetails));const error=new ErrorConstructor(getMessageString(hiddenDetails));return weakmapSet(hiddenMessageLogArgs,error,getLogArgs(hiddenDetails)),void 0!==errorName&&tagError(error,errorName),error};freeze(makeError);const hiddenNoteLogArgsArrays=new WeakMap,hiddenNoteCallbackArrays=new WeakMap,note=(error,detailsNote)=>{"string"==typeof detailsNote&&(detailsNote=redactedDetails([detailsNote]));const hiddenDetails=weakmapGet(hiddenDetailsMap,detailsNote);if(void 0===hiddenDetails)throw new TypeError("unrecognized details "+quote(detailsNote));const logArgs=getLogArgs(hiddenDetails),callbacks=weakmapGet(hiddenNoteCallbackArrays,error);if(void 0!==callbacks)for(const callback of callbacks)callback(error,logArgs);else{const logArgsArray=weakmapGet(hiddenNoteLogArgsArrays,error);void 0!==logArgsArray?arrayPush(logArgsArray,logArgs):weakmapSet(hiddenNoteLogArgsArrays,error,[logArgs])}};freeze(note);const loggedErrorHandler={getStackString:globalThis.getStackString||(error=>{if(!("stack"in error))return"";const stackString=""+error.stack,pos=stringIndexOf(stackString,"\n");return stringStartsWith(stackString," ")||-1===pos?stackString:stringSlice(stackString,pos+1)}),tagError:error=>tagError(error),resetErrorTagNum:()=>{errorTagNum=0},getMessageLogArgs:error=>weakmapGet(hiddenMessageLogArgs,error),takeMessageLogArgs:error=>{const result=weakmapGet(hiddenMessageLogArgs,error);return weakmapDelete(hiddenMessageLogArgs,error),result},takeNoteLogArgsArray:(error,callback)=>{const result=weakmapGet(hiddenNoteLogArgsArrays,error);if(weakmapDelete(hiddenNoteLogArgsArrays,error),void 0!==callback){const callbacks=weakmapGet(hiddenNoteCallbackArrays,error);callbacks?arrayPush(callbacks,callback):weakmapSet(hiddenNoteCallbackArrays,error,[callback])}return result||[]}};$h‍_once.loggedErrorHandler(loggedErrorHandler),freeze(loggedErrorHandler);const makeAssert=(optRaise,unredacted=!1)=>{const details=unredacted?unredactedDetails:redactedDetails,fail=(optDetails=details`Assert failed`,ErrorConstructor=globalThis.Error)=>{const reason=makeError(optDetails,ErrorConstructor);throw void 0!==optRaise&&optRaise(reason),reason};function baseAssert(flag,optDetails=details`Check failed`,ErrorConstructor=globalThis.Error){if(!flag)throw fail(optDetails,ErrorConstructor)}freeze(fail);const equal=(actual,expected,optDetails=details`Expected ${actual} is same as ${expected}`,ErrorConstructor=RangeError)=>{baseAssert(is(actual,expected),optDetails,ErrorConstructor)};freeze(equal);const assertTypeof=(specimen,typename,optDetails)=>{baseAssert("string"==typeof typename,details`${quote(typename)} must be a string`),void 0===optDetails&&(optDetails=details([""," must be "+an(typename)],specimen)),equal(typeof specimen,typename,optDetails,TypeError)};freeze(assertTypeof);const assert=assign(baseAssert,{error:makeError,fail:fail,equal:equal,typeof:assertTypeof,string:(specimen,optDetails)=>assertTypeof(specimen,"string",optDetails),note:note,details:details,quote:quote,makeAssert:makeAssert});return freeze(assert)};$h‍_once.makeAssert(makeAssert),freeze(makeAssert);const assert=makeAssert();$h‍_once.assert(assert)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_FUNCTION,arrayJoin;$h‍_imports([["./commons.js",[["FERAL_FUNCTION",[$h‍_a=>FERAL_FUNCTION=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]]]]]);$h‍_once.makeEvaluateFactory((constants=[])=>{const optimizer=function(constants){return 0===constants.length?"":`const {${arrayJoin(constants,",")}} = this;`}(constants);return FERAL_FUNCTION(`\n    with (this) {\n      ${optimizer}\n      return function() {\n        'use strict';\n        return eval(arguments[0]);\n      };\n    }\n  `)})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let arrayFilter,arrayIncludes,getOwnPropertyDescriptor,getOwnPropertyNames,objectHasOwnProperty,regexpTest;$h‍_imports([["./commons.js",[["arrayFilter",[$h‍_a=>arrayFilter=$h‍_a]],["arrayIncludes",[$h‍_a=>arrayIncludes=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["getOwnPropertyNames",[$h‍_a=>getOwnPropertyNames=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["regexpTest",[$h‍_a=>regexpTest=$h‍_a]]]]]);const keywords=["await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","let","static","enum","implements","package","protected","interface","private","public","await","null","true","false","this","arguments"],identifierPattern=/^[a-zA-Z_$][\w$]*$/,isValidIdentifierName=name=>"eval"!==name&&!arrayIncludes(keywords,name)&&regexpTest(identifierPattern,name);function isImmutableDataProperty(obj,name){const desc=getOwnPropertyDescriptor(obj,name);return!1===desc.configurable&&!1===desc.writable&&objectHasOwnProperty(desc,"value")}$h‍_once.isValidIdentifierName(isValidIdentifierName);$h‍_once.getScopeConstants((globalObject,localObject={})=>{const globalNames=getOwnPropertyNames(globalObject),localNames=getOwnPropertyNames(localObject),localConstants=arrayFilter(localNames,name=>isValidIdentifierName(name)&&isImmutableDataProperty(localObject,name));return[...arrayFilter(globalNames,name=>!arrayIncludes(localNames,name)&&isValidIdentifierName(name)&&isImmutableDataProperty(globalObject,name)),...localConstants]})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_EVAL,Proxy,String,TypeError,create,freeze,getOwnPropertyDescriptor,getOwnPropertyDescriptors,globalThis,immutableObject,objectHasOwnProperty,reflectGet,reflectSet,assert;$h‍_imports([["./commons.js",[["FERAL_EVAL",[$h‍_a=>FERAL_EVAL=$h‍_a]],["Proxy",[$h‍_a=>Proxy=$h‍_a]],["String",[$h‍_a=>String=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["getOwnPropertyDescriptors",[$h‍_a=>getOwnPropertyDescriptors=$h‍_a]],["globalThis",[$h‍_a=>globalThis=$h‍_a]],["immutableObject",[$h‍_a=>immutableObject=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["reflectGet",[$h‍_a=>reflectGet=$h‍_a]],["reflectSet",[$h‍_a=>reflectSet=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);const{details:d,quote:q}=assert,alwaysThrowHandler=new Proxy(immutableObject,freeze({get(_shadow,prop){assert.fail(d`Please report unexpected scope handler trap: ${q(String(prop))}`)}}));$h‍_once.createScopeHandler((globalObject,localObject={},{sloppyGlobalsMode:sloppyGlobalsMode=!1}={})=>{let allowNextEvalToBeUnsafe=!1;return{admitOneUnsafeEvalNext:()=>{allowNextEvalToBeUnsafe=!0},resetOneUnsafeEvalNext:()=>{const wasSet=allowNextEvalToBeUnsafe;return allowNextEvalToBeUnsafe=!1,wasSet},scopeHandler:freeze(create(alwaysThrowHandler,getOwnPropertyDescriptors({get(_shadow,prop){if("symbol"!=typeof prop)return"eval"===prop&&!0===allowNextEvalToBeUnsafe?(allowNextEvalToBeUnsafe=!1,FERAL_EVAL):prop in localObject?reflectGet(localObject,prop,globalObject):reflectGet(globalObject,prop)},set(_shadow,prop,value){if(prop in localObject){const desc=getOwnPropertyDescriptor(localObject,prop);return objectHasOwnProperty(desc,"value")?reflectSet(localObject,prop,value):reflectSet(localObject,prop,value,globalObject)}return reflectSet(globalObject,prop,value)},has:(_shadow,prop)=>sloppyGlobalsMode||allowNextEvalToBeUnsafe&&"eval"===prop||prop in localObject||prop in globalObject||prop in globalThis,getPrototypeOf:()=>null,getOwnPropertyDescriptor(_target,prop){const quotedProp=q(String(prop));console.warn("getOwnPropertyDescriptor trap on scopeHandler for "+quotedProp,(new TypeError).stack)}})))}})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_REG_EXP,regexpExec,stringSlice;$h‍_imports([["./commons.js",[["FERAL_REG_EXP",[$h‍_a=>FERAL_REG_EXP=$h‍_a]],["regexpExec",[$h‍_a=>regexpExec=$h‍_a]],["stringSlice",[$h‍_a=>stringSlice=$h‍_a]]]]]);const sourceMetaEntriesRegExp=new FERAL_REG_EXP("(?:\\s*//\\s*[@#]\\s*([a-zA-Z][a-zA-Z0-9]*)\\s*=\\s*([^\\s\\*]*)|/\\*\\s*[@#]\\s*([a-zA-Z][a-zA-Z0-9]*)\\s*=\\s*([^\\s\\*]*)\\s*\\*/)\\s*$");$h‍_once.getSourceURL(src=>{let sourceURL="<unknown>";for(;src.length>0;){const match=regexpExec(sourceMetaEntriesRegExp,src);if(null===match)break;src=stringSlice(src,0,src.length-match[0].length),"sourceURL"===match[3]?sourceURL=match[4]:"sourceURL"===match[1]&&(sourceURL=match[2])}return sourceURL})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_REG_EXP,SyntaxError,stringReplace,stringSearch,stringSlice,stringSplit,getSourceURL;function getLineNumber(src,pattern){const index=stringSearch(src,pattern);if(index<0)return-1;const adjustment="\n"===src[index]?1:0;return stringSplit(stringSlice(src,0,index),"\n").length+adjustment}$h‍_imports([["./commons.js",[["FERAL_REG_EXP",[$h‍_a=>FERAL_REG_EXP=$h‍_a]],["SyntaxError",[$h‍_a=>SyntaxError=$h‍_a]],["stringReplace",[$h‍_a=>stringReplace=$h‍_a]],["stringSearch",[$h‍_a=>stringSearch=$h‍_a]],["stringSlice",[$h‍_a=>stringSlice=$h‍_a]],["stringSplit",[$h‍_a=>stringSplit=$h‍_a]]]],["./get-source-url.js",[["getSourceURL",[$h‍_a=>getSourceURL=$h‍_a]]]]]);const htmlCommentPattern=new FERAL_REG_EXP("(?:\x3c!--|--\x3e)","g"),rejectHtmlComments=src=>{const lineNumber=getLineNumber(src,htmlCommentPattern);if(lineNumber<0)return src;const name=getSourceURL(src);throw new SyntaxError(`Possible HTML comment rejected at ${name}:${lineNumber}. (SES_HTML_COMMENT_REJECTED)`)};$h‍_once.rejectHtmlComments(rejectHtmlComments);$h‍_once.evadeHtmlCommentTest(src=>stringReplace(src,htmlCommentPattern,match=>"<"===match[0]?"< ! --":"-- >"));const importPattern=new FERAL_REG_EXP("(^|[^.])\\bimport(\\s*(?:\\(|/[/*]))","g"),rejectImportExpressions=src=>{const lineNumber=getLineNumber(src,importPattern);if(lineNumber<0)return src;const name=getSourceURL(src);throw new SyntaxError(`Possible import expression rejected at ${name}:${lineNumber}. (SES_IMPORT_REJECTED)`)};$h‍_once.rejectImportExpressions(rejectImportExpressions);$h‍_once.evadeImportExpressionTest(src=>stringReplace(src,importPattern,(_,p1,p2)=>`${p1}__import__${p2}`));const someDirectEvalPattern=new FERAL_REG_EXP("(^|[^.])\\beval(\\s*\\()","g");$h‍_once.rejectSomeDirectEvalExpressions(src=>{const lineNumber=getLineNumber(src,someDirectEvalPattern);if(lineNumber<0)return src;const name=getSourceURL(src);throw new SyntaxError(`Possible direct eval expression rejected at ${name}:${lineNumber}. (SES_EVAL_REJECTED)`)});$h‍_once.mandatoryTransforms(source=>(source=rejectHtmlComments(source),source=rejectImportExpressions(source)));$h‍_once.applyTransforms((source,transforms)=>{for(const transform of transforms)source=transform(source);return source})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let WeakSet,apply,immutableObject,proxyRevocable,weaksetAdd,getScopeConstants,createScopeHandler,applyTransforms,mandatoryTransforms,makeEvaluateFactory,assert;$h‍_imports([["./commons.js",[["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["apply",[$h‍_a=>apply=$h‍_a]],["immutableObject",[$h‍_a=>immutableObject=$h‍_a]],["proxyRevocable",[$h‍_a=>proxyRevocable=$h‍_a]],["weaksetAdd",[$h‍_a=>weaksetAdd=$h‍_a]]]],["./scope-constants.js",[["getScopeConstants",[$h‍_a=>getScopeConstants=$h‍_a]]]],["./scope-handler.js",[["createScopeHandler",[$h‍_a=>createScopeHandler=$h‍_a]]]],["./transforms.js",[["applyTransforms",[$h‍_a=>applyTransforms=$h‍_a]],["mandatoryTransforms",[$h‍_a=>mandatoryTransforms=$h‍_a]]]],["./make-evaluate-factory.js",[["makeEvaluateFactory",[$h‍_a=>makeEvaluateFactory=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);const{details:d}=assert;$h‍_once.makeSafeEvaluator(({globalObject:globalObject,localObject:localObject={},globalTransforms:globalTransforms=[],sloppyGlobalsMode:sloppyGlobalsMode=!1,knownScopeProxies:knownScopeProxies=new WeakSet}={})=>{const{scopeHandler:scopeHandler,admitOneUnsafeEvalNext:admitOneUnsafeEvalNext,resetOneUnsafeEvalNext:resetOneUnsafeEvalNext}=createScopeHandler(globalObject,localObject,{sloppyGlobalsMode:sloppyGlobalsMode}),{proxy:scopeProxy,revoke:revokeScopeProxy}=proxyRevocable(immutableObject,scopeHandler);let evaluate;weaksetAdd(knownScopeProxies,scopeProxy);return{safeEvaluate:(source,{localTransforms:localTransforms=[]}={})=>{let err;(()=>{if(!evaluate){const constants=getScopeConstants(globalObject,localObject),evaluateFactory=makeEvaluateFactory(constants);evaluate=apply(evaluateFactory,scopeProxy,[])}})(),source=applyTransforms(source,[...localTransforms,...globalTransforms,mandatoryTransforms]),admitOneUnsafeEvalNext();try{return apply(evaluate,globalObject,[source])}catch(e){throw err=e,e}finally{resetOneUnsafeEvalNext()&&(revokeScopeProxy(),assert.fail(d`handler did not reset allowNextEvalToBeUnsafe ${err}`))}}}})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let TypeError,arrayPush,create,defineProperties,getOwnPropertyDescriptors,evadeHtmlCommentTest,evadeImportExpressionTest,rejectSomeDirectEvalExpressions,makeSafeEvaluator;$h‍_imports([["./commons.js",[["TypeError",[$h‍_a=>TypeError=$h‍_a]],["arrayPush",[$h‍_a=>arrayPush=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["getOwnPropertyDescriptors",[$h‍_a=>getOwnPropertyDescriptors=$h‍_a]]]],["./transforms.js",[["evadeHtmlCommentTest",[$h‍_a=>evadeHtmlCommentTest=$h‍_a]],["evadeImportExpressionTest",[$h‍_a=>evadeImportExpressionTest=$h‍_a]],["rejectSomeDirectEvalExpressions",[$h‍_a=>rejectSomeDirectEvalExpressions=$h‍_a]]]],["./make-safe-evaluator.js",[["makeSafeEvaluator",[$h‍_a=>makeSafeEvaluator=$h‍_a]]]]]);const provideCompartmentEvaluator=(compartmentFields,options)=>{const{sloppyGlobalsMode:sloppyGlobalsMode=!1,__moduleShimLexicals__:__moduleShimLexicals__}=options;let safeEvaluate;if(void 0!==__moduleShimLexicals__||sloppyGlobalsMode){let{globalTransforms:globalTransforms}=compartmentFields;const{globalObject:globalObject,globalLexicals:globalLexicals,knownScopeProxies:knownScopeProxies}=compartmentFields;let localObject=globalLexicals;void 0!==__moduleShimLexicals__&&(globalTransforms=void 0,localObject=create(null,getOwnPropertyDescriptors(globalLexicals)),defineProperties(localObject,getOwnPropertyDescriptors(__moduleShimLexicals__))),({safeEvaluate:safeEvaluate}=makeSafeEvaluator({globalObject:globalObject,localObject:localObject,globalTransforms:globalTransforms,sloppyGlobalsMode:sloppyGlobalsMode,knownScopeProxies:knownScopeProxies}))}else({safeEvaluate:safeEvaluate}=compartmentFields);return{safeEvaluate:safeEvaluate}};$h‍_once.provideCompartmentEvaluator(provideCompartmentEvaluator);$h‍_once.compartmentEvaluate((compartmentFields,source,options)=>{if("string"!=typeof source)throw new TypeError("first argument of evaluate() must be a string");const{transforms:transforms=[],__evadeHtmlCommentTest__:__evadeHtmlCommentTest__=!1,__evadeImportExpressionTest__:__evadeImportExpressionTest__=!1,__rejectSomeDirectEvalExpressions__:__rejectSomeDirectEvalExpressions__=!0}=options,localTransforms=[...transforms];!0===__evadeHtmlCommentTest__&&arrayPush(localTransforms,evadeHtmlCommentTest),!0===__evadeImportExpressionTest__&&arrayPush(localTransforms,evadeImportExpressionTest),!0===__rejectSomeDirectEvalExpressions__&&arrayPush(localTransforms,rejectSomeDirectEvalExpressions);const{safeEvaluate:safeEvaluate}=provideCompartmentEvaluator(compartmentFields,options);return safeEvaluate(source,{localTransforms:localTransforms})})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{$h‍_imports([]);$h‍_once.makeEvalFunction(safeEvaluate=>source=>"string"!=typeof source?source:safeEvaluate(source))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_FUNCTION,arrayJoin,arrayPop,defineProperties,getPrototypeOf,assert;$h‍_imports([["./commons.js",[["FERAL_FUNCTION",[$h‍_a=>FERAL_FUNCTION=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]],["arrayPop",[$h‍_a=>arrayPop=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["getPrototypeOf",[$h‍_a=>getPrototypeOf=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);$h‍_once.makeFunctionConstructor(safeEvaluate=>{const newFunction=function(_body){const bodyText=""+(arrayPop(arguments)||""),parameters=""+arrayJoin(arguments,",");new FERAL_FUNCTION(parameters,""),new FERAL_FUNCTION(bodyText);const src=`(function anonymous(${parameters}\n) {\n${bodyText}\n})`;return safeEvaluate(src)};return defineProperties(newFunction,{prototype:{value:FERAL_FUNCTION.prototype,writable:!1,enumerable:!1,configurable:!1}}),assert(getPrototypeOf(FERAL_FUNCTION)===FERAL_FUNCTION.prototype,"Function prototype is the same accross compartments"),assert(getPrototypeOf(newFunction)===FERAL_FUNCTION.prototype,"Function constructor prototype is the same accross compartments"),newFunction})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{$h‍_imports([]);const constantProperties={Infinity:1/0,NaN:NaN,undefined:void 0};$h‍_once.constantProperties(constantProperties);$h‍_once.universalPropertyNames({isFinite:"isFinite",isNaN:"isNaN",parseFloat:"parseFloat",parseInt:"parseInt",decodeURI:"decodeURI",decodeURIComponent:"decodeURIComponent",encodeURI:"encodeURI",encodeURIComponent:"encodeURIComponent",Array:"Array",ArrayBuffer:"ArrayBuffer",BigInt:"BigInt",BigInt64Array:"BigInt64Array",BigUint64Array:"BigUint64Array",Boolean:"Boolean",DataView:"DataView",EvalError:"EvalError",Float32Array:"Float32Array",Float64Array:"Float64Array",Int8Array:"Int8Array",Int16Array:"Int16Array",Int32Array:"Int32Array",Map:"Map",Number:"Number",Object:"Object",Promise:"Promise",Proxy:"Proxy",RangeError:"RangeError",ReferenceError:"ReferenceError",Set:"Set",String:"String",Symbol:"Symbol",SyntaxError:"SyntaxError",TypeError:"TypeError",Uint8Array:"Uint8Array",Uint8ClampedArray:"Uint8ClampedArray",Uint16Array:"Uint16Array",Uint32Array:"Uint32Array",URIError:"URIError",WeakMap:"WeakMap",WeakSet:"WeakSet",JSON:"JSON",Reflect:"Reflect",escape:"escape",unescape:"unescape",lockdown:"lockdown",harden:"harden",HandledPromise:"HandledPromise"});$h‍_once.initialGlobalPropertyNames({Date:"%InitialDate%",Error:"%InitialError%",RegExp:"%InitialRegExp%",Math:"%InitialMath%",getStackString:"%InitialGetStackString%"});$h‍_once.sharedGlobalPropertyNames({Date:"%SharedDate%",Error:"%SharedError%",RegExp:"%SharedRegExp%",Math:"%SharedMath%"});$h‍_once.uniqueGlobalPropertyNames({globalThis:"%UniqueGlobalThis%",eval:"%UniqueEval%",Function:"%UniqueFunction%",Compartment:"%UniqueCompartment%"});const NativeErrors=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError];$h‍_once.NativeErrors(NativeErrors);const FunctionInstance={"[[Proto]]":"%FunctionPrototype%",length:"number",name:"string"};$h‍_once.FunctionInstance(FunctionInstance);const fn=FunctionInstance,asyncFn={"[[Proto]]":"%AsyncFunctionPrototype%"},getter={get:fn,set:"undefined"},accessor={get:fn,set:fn};function NativeError(prototype){return{"[[Proto]]":"%SharedError%",prototype:prototype}}function NativeErrorPrototype(constructor){return{"[[Proto]]":"%ErrorPrototype%",constructor:constructor,message:"string",name:"string",toString:!1}}function TypedArray(prototype){return{"[[Proto]]":"%TypedArray%",BYTES_PER_ELEMENT:"number",prototype:prototype}}function TypedArrayPrototype(constructor){return{"[[Proto]]":"%TypedArrayPrototype%",BYTES_PER_ELEMENT:"number",constructor:constructor}}$h‍_once.isAccessorPermit(permit=>permit===getter||permit===accessor);const SharedMath={E:"number",LN10:"number",LN2:"number",LOG10E:"number",LOG2E:"number",PI:"number",SQRT1_2:"number",SQRT2:"number","@@toStringTag":"string",abs:fn,acos:fn,acosh:fn,asin:fn,asinh:fn,atan:fn,atanh:fn,atan2:fn,cbrt:fn,ceil:fn,clz32:fn,cos:fn,cosh:fn,exp:fn,expm1:fn,floor:fn,fround:fn,hypot:fn,imul:fn,log:fn,log1p:fn,log10:fn,log2:fn,max:fn,min:fn,pow:fn,round:fn,sign:fn,sin:fn,sinh:fn,sqrt:fn,tan:fn,tanh:fn,trunc:fn,idiv:!1,idivmod:!1,imod:!1,imuldiv:!1,irem:!1,mod:!1},whitelist={"[[Proto]]":null,"%ThrowTypeError%":fn,Infinity:"number",NaN:"number",undefined:"undefined","%UniqueEval%":fn,isFinite:fn,isNaN:fn,parseFloat:fn,parseInt:fn,decodeURI:fn,decodeURIComponent:fn,encodeURI:fn,encodeURIComponent:fn,Object:{"[[Proto]]":"%FunctionPrototype%",assign:fn,create:fn,defineProperties:fn,defineProperty:fn,entries:fn,freeze:fn,fromEntries:fn,getOwnPropertyDescriptor:fn,getOwnPropertyDescriptors:fn,getOwnPropertyNames:fn,getOwnPropertySymbols:fn,getPrototypeOf:fn,is:fn,isExtensible:fn,isFrozen:fn,isSealed:fn,keys:fn,preventExtensions:fn,prototype:"%ObjectPrototype%",seal:fn,setPrototypeOf:fn,values:fn,hasOwn:fn},"%ObjectPrototype%":{"[[Proto]]":null,constructor:"Object",hasOwnProperty:fn,isPrototypeOf:fn,propertyIsEnumerable:fn,toLocaleString:fn,toString:fn,valueOf:fn,"--proto--":accessor,__defineGetter__:fn,__defineSetter__:fn,__lookupGetter__:fn,__lookupSetter__:fn},"%UniqueFunction%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%FunctionPrototype%"},"%InertFunction%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%FunctionPrototype%"},"%FunctionPrototype%":{apply:fn,bind:fn,call:fn,constructor:"%InertFunction%",toString:fn,"@@hasInstance":fn,caller:!1,arguments:!1},Boolean:{"[[Proto]]":"%FunctionPrototype%",prototype:"%BooleanPrototype%"},"%BooleanPrototype%":{constructor:"Boolean",toString:fn,valueOf:fn},Symbol:{"[[Proto]]":"%FunctionPrototype%",asyncIterator:"symbol",for:fn,hasInstance:"symbol",isConcatSpreadable:"symbol",iterator:"symbol",keyFor:fn,match:"symbol",matchAll:"symbol",prototype:"%SymbolPrototype%",replace:"symbol",search:"symbol",species:"symbol",split:"symbol",toPrimitive:"symbol",toStringTag:"symbol",unscopables:"symbol"},"%SymbolPrototype%":{constructor:"Symbol",description:getter,toString:fn,valueOf:fn,"@@toPrimitive":fn,"@@toStringTag":"string"},"%InitialError%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%ErrorPrototype%",captureStackTrace:fn,stackTraceLimit:accessor,prepareStackTrace:accessor},"%SharedError%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%ErrorPrototype%",captureStackTrace:fn,stackTraceLimit:accessor,prepareStackTrace:accessor},"%ErrorPrototype%":{constructor:"%SharedError%",message:"string",name:"string",toString:fn,at:!1,stack:!1},EvalError:NativeError("%EvalErrorPrototype%"),RangeError:NativeError("%RangeErrorPrototype%"),ReferenceError:NativeError("%ReferenceErrorPrototype%"),SyntaxError:NativeError("%SyntaxErrorPrototype%"),TypeError:NativeError("%TypeErrorPrototype%"),URIError:NativeError("%URIErrorPrototype%"),"%EvalErrorPrototype%":NativeErrorPrototype("EvalError"),"%RangeErrorPrototype%":NativeErrorPrototype("RangeError"),"%ReferenceErrorPrototype%":NativeErrorPrototype("ReferenceError"),"%SyntaxErrorPrototype%":NativeErrorPrototype("SyntaxError"),"%TypeErrorPrototype%":NativeErrorPrototype("TypeError"),"%URIErrorPrototype%":NativeErrorPrototype("URIError"),Number:{"[[Proto]]":"%FunctionPrototype%",EPSILON:"number",isFinite:fn,isInteger:fn,isNaN:fn,isSafeInteger:fn,MAX_SAFE_INTEGER:"number",MAX_VALUE:"number",MIN_SAFE_INTEGER:"number",MIN_VALUE:"number",NaN:"number",NEGATIVE_INFINITY:"number",parseFloat:fn,parseInt:fn,POSITIVE_INFINITY:"number",prototype:"%NumberPrototype%"},"%NumberPrototype%":{constructor:"Number",toExponential:fn,toFixed:fn,toLocaleString:fn,toPrecision:fn,toString:fn,valueOf:fn},BigInt:{"[[Proto]]":"%FunctionPrototype%",asIntN:fn,asUintN:fn,prototype:"%BigIntPrototype%",bitLength:!1,fromArrayBuffer:!1},"%BigIntPrototype%":{constructor:"BigInt",toLocaleString:fn,toString:fn,valueOf:fn,"@@toStringTag":"string"},"%InitialMath%":{...SharedMath,random:fn},"%SharedMath%":SharedMath,"%InitialDate%":{"[[Proto]]":"%FunctionPrototype%",now:fn,parse:fn,prototype:"%DatePrototype%",UTC:fn},"%SharedDate%":{"[[Proto]]":"%FunctionPrototype%",now:fn,parse:fn,prototype:"%DatePrototype%",UTC:fn},"%DatePrototype%":{constructor:"%SharedDate%",getDate:fn,getDay:fn,getFullYear:fn,getHours:fn,getMilliseconds:fn,getMinutes:fn,getMonth:fn,getSeconds:fn,getTime:fn,getTimezoneOffset:fn,getUTCDate:fn,getUTCDay:fn,getUTCFullYear:fn,getUTCHours:fn,getUTCMilliseconds:fn,getUTCMinutes:fn,getUTCMonth:fn,getUTCSeconds:fn,setDate:fn,setFullYear:fn,setHours:fn,setMilliseconds:fn,setMinutes:fn,setMonth:fn,setSeconds:fn,setTime:fn,setUTCDate:fn,setUTCFullYear:fn,setUTCHours:fn,setUTCMilliseconds:fn,setUTCMinutes:fn,setUTCMonth:fn,setUTCSeconds:fn,toDateString:fn,toISOString:fn,toJSON:fn,toLocaleDateString:fn,toLocaleString:fn,toLocaleTimeString:fn,toString:fn,toTimeString:fn,toUTCString:fn,valueOf:fn,"@@toPrimitive":fn,getYear:fn,setYear:fn,toGMTString:fn},String:{"[[Proto]]":"%FunctionPrototype%",fromCharCode:fn,fromCodePoint:fn,prototype:"%StringPrototype%",raw:fn,fromArrayBuffer:!1},"%StringPrototype%":{length:"number",charAt:fn,charCodeAt:fn,codePointAt:fn,concat:fn,constructor:"String",endsWith:fn,includes:fn,indexOf:fn,lastIndexOf:fn,localeCompare:fn,match:fn,matchAll:fn,normalize:fn,padEnd:fn,padStart:fn,repeat:fn,replace:fn,replaceAll:fn,search:fn,slice:fn,split:fn,startsWith:fn,substring:fn,toLocaleLowerCase:fn,toLocaleUpperCase:fn,toLowerCase:fn,toString:fn,toUpperCase:fn,trim:fn,trimEnd:fn,trimStart:fn,valueOf:fn,"@@iterator":fn,substr:fn,anchor:fn,big:fn,blink:fn,bold:fn,fixed:fn,fontcolor:fn,fontsize:fn,italics:fn,link:fn,small:fn,strike:fn,sub:fn,sup:fn,trimLeft:fn,trimRight:fn,compare:!1,at:fn},"%StringIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:fn,"@@toStringTag":"string"},"%InitialRegExp%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%RegExpPrototype%","@@species":getter,input:!1,$_:!1,lastMatch:!1,"$&":!1,lastParen:!1,"$+":!1,leftContext:!1,"$`":!1,rightContext:!1,"$'":!1,$1:!1,$2:!1,$3:!1,$4:!1,$5:!1,$6:!1,$7:!1,$8:!1,$9:!1},"%SharedRegExp%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%RegExpPrototype%","@@species":getter},"%RegExpPrototype%":{constructor:"%SharedRegExp%",exec:fn,dotAll:getter,flags:getter,global:getter,ignoreCase:getter,"@@match":fn,"@@matchAll":fn,multiline:getter,"@@replace":fn,"@@search":fn,source:getter,"@@split":fn,sticky:getter,test:fn,toString:fn,unicode:getter,compile:!1,hasIndices:!1},"%RegExpStringIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:fn,"@@toStringTag":"string"},Array:{"[[Proto]]":"%FunctionPrototype%",from:fn,isArray:fn,of:fn,prototype:"%ArrayPrototype%","@@species":getter,at:fn},"%ArrayPrototype%":{length:"number",concat:fn,constructor:"Array",copyWithin:fn,entries:fn,every:fn,fill:fn,filter:fn,find:fn,findIndex:fn,flat:fn,flatMap:fn,forEach:fn,includes:fn,indexOf:fn,join:fn,keys:fn,lastIndexOf:fn,map:fn,pop:fn,push:fn,reduce:fn,reduceRight:fn,reverse:fn,shift:fn,slice:fn,some:fn,sort:fn,splice:fn,toLocaleString:fn,toString:fn,unshift:fn,values:fn,"@@iterator":fn,"@@unscopables":{"[[Proto]]":null,copyWithin:"boolean",entries:"boolean",fill:"boolean",find:"boolean",findIndex:"boolean",flat:"boolean",flatMap:"boolean",includes:"boolean",keys:"boolean",values:"boolean",at:!1},at:!1,findLast:fn,findLastIndex:fn},"%ArrayIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:fn,"@@toStringTag":"string"},"%TypedArray%":{"[[Proto]]":"%FunctionPrototype%",from:fn,of:fn,prototype:"%TypedArrayPrototype%","@@species":getter},"%TypedArrayPrototype%":{buffer:getter,byteLength:getter,byteOffset:getter,constructor:"%TypedArray%",copyWithin:fn,entries:fn,every:fn,fill:fn,filter:fn,find:fn,findIndex:fn,forEach:fn,includes:fn,indexOf:fn,join:fn,keys:fn,lastIndexOf:fn,length:getter,map:fn,reduce:fn,reduceRight:fn,reverse:fn,set:fn,slice:fn,some:fn,sort:fn,subarray:fn,toLocaleString:fn,toString:fn,values:fn,"@@iterator":fn,"@@toStringTag":getter,at:!1,findLast:fn,findLastIndex:fn},BigInt64Array:TypedArray("%BigInt64ArrayPrototype%"),BigUint64Array:TypedArray("%BigUint64ArrayPrototype%"),Float32Array:TypedArray("%Float32ArrayPrototype%"),Float64Array:TypedArray("%Float64ArrayPrototype%"),Int16Array:TypedArray("%Int16ArrayPrototype%"),Int32Array:TypedArray("%Int32ArrayPrototype%"),Int8Array:TypedArray("%Int8ArrayPrototype%"),Uint16Array:TypedArray("%Uint16ArrayPrototype%"),Uint32Array:TypedArray("%Uint32ArrayPrototype%"),Uint8Array:TypedArray("%Uint8ArrayPrototype%"),Uint8ClampedArray:TypedArray("%Uint8ClampedArrayPrototype%"),"%BigInt64ArrayPrototype%":TypedArrayPrototype("BigInt64Array"),"%BigUint64ArrayPrototype%":TypedArrayPrototype("BigUint64Array"),"%Float32ArrayPrototype%":TypedArrayPrototype("Float32Array"),"%Float64ArrayPrototype%":TypedArrayPrototype("Float64Array"),"%Int16ArrayPrototype%":TypedArrayPrototype("Int16Array"),"%Int32ArrayPrototype%":TypedArrayPrototype("Int32Array"),"%Int8ArrayPrototype%":TypedArrayPrototype("Int8Array"),"%Uint16ArrayPrototype%":TypedArrayPrototype("Uint16Array"),"%Uint32ArrayPrototype%":TypedArrayPrototype("Uint32Array"),"%Uint8ArrayPrototype%":TypedArrayPrototype("Uint8Array"),"%Uint8ClampedArrayPrototype%":TypedArrayPrototype("Uint8ClampedArray"),Map:{"[[Proto]]":"%FunctionPrototype%","@@species":getter,prototype:"%MapPrototype%"},"%MapPrototype%":{clear:fn,constructor:"Map",delete:fn,entries:fn,forEach:fn,get:fn,has:fn,keys:fn,set:fn,size:getter,values:fn,"@@iterator":fn,"@@toStringTag":"string"},"%MapIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:fn,"@@toStringTag":"string"},Set:{"[[Proto]]":"%FunctionPrototype%",prototype:"%SetPrototype%","@@species":getter},"%SetPrototype%":{add:fn,clear:fn,constructor:"Set",delete:fn,entries:fn,forEach:fn,has:fn,keys:fn,size:getter,values:fn,"@@iterator":fn,"@@toStringTag":"string"},"%SetIteratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",next:fn,"@@toStringTag":"string"},WeakMap:{"[[Proto]]":"%FunctionPrototype%",prototype:"%WeakMapPrototype%"},"%WeakMapPrototype%":{constructor:"WeakMap",delete:fn,get:fn,has:fn,set:fn,"@@toStringTag":"string"},WeakSet:{"[[Proto]]":"%FunctionPrototype%",prototype:"%WeakSetPrototype%"},"%WeakSetPrototype%":{add:fn,constructor:"WeakSet",delete:fn,has:fn,"@@toStringTag":"string"},ArrayBuffer:{"[[Proto]]":"%FunctionPrototype%",isView:fn,prototype:"%ArrayBufferPrototype%","@@species":getter,fromString:!1,fromBigInt:!1},"%ArrayBufferPrototype%":{byteLength:getter,constructor:"ArrayBuffer",slice:fn,"@@toStringTag":"string",concat:!1,transfer:fn,resize:fn,resizable:getter,maxByteLength:getter},SharedArrayBuffer:!1,"%SharedArrayBufferPrototype%":!1,DataView:{"[[Proto]]":"%FunctionPrototype%",BYTES_PER_ELEMENT:"number",prototype:"%DataViewPrototype%"},"%DataViewPrototype%":{buffer:getter,byteLength:getter,byteOffset:getter,constructor:"DataView",getBigInt64:fn,getBigUint64:fn,getFloat32:fn,getFloat64:fn,getInt8:fn,getInt16:fn,getInt32:fn,getUint8:fn,getUint16:fn,getUint32:fn,setBigInt64:fn,setBigUint64:fn,setFloat32:fn,setFloat64:fn,setInt8:fn,setInt16:fn,setInt32:fn,setUint8:fn,setUint16:fn,setUint32:fn,"@@toStringTag":"string"},Atomics:!1,JSON:{parse:fn,stringify:fn,"@@toStringTag":"string"},"%IteratorPrototype%":{"@@iterator":fn},"%AsyncIteratorPrototype%":{"@@asyncIterator":fn},"%InertGeneratorFunction%":{"[[Proto]]":"%InertFunction%",prototype:"%Generator%"},"%Generator%":{"[[Proto]]":"%FunctionPrototype%",constructor:"%InertGeneratorFunction%",prototype:"%GeneratorPrototype%","@@toStringTag":"string"},"%InertAsyncGeneratorFunction%":{"[[Proto]]":"%InertFunction%",prototype:"%AsyncGenerator%"},"%AsyncGenerator%":{"[[Proto]]":"%FunctionPrototype%",constructor:"%InertAsyncGeneratorFunction%",prototype:"%AsyncGeneratorPrototype%","@@toStringTag":"string"},"%GeneratorPrototype%":{"[[Proto]]":"%IteratorPrototype%",constructor:"%Generator%",next:fn,return:fn,throw:fn,"@@toStringTag":"string"},"%AsyncGeneratorPrototype%":{"[[Proto]]":"%AsyncIteratorPrototype%",constructor:"%AsyncGenerator%",next:fn,return:fn,throw:fn,"@@toStringTag":"string"},HandledPromise:{"[[Proto]]":"Promise",applyFunction:fn,applyFunctionSendOnly:fn,applyMethod:fn,applyMethodSendOnly:fn,get:fn,getSendOnly:fn,prototype:"%PromisePrototype%",resolve:fn},Promise:{"[[Proto]]":"%FunctionPrototype%",all:fn,allSettled:fn,any:!1,prototype:"%PromisePrototype%",race:fn,reject:fn,resolve:fn,"@@species":getter},"%PromisePrototype%":{catch:fn,constructor:"Promise",finally:fn,then:fn,"@@toStringTag":"string"},"%InertAsyncFunction%":{"[[Proto]]":"%InertFunction%",prototype:"%AsyncFunctionPrototype%"},"%AsyncFunctionPrototype%":{"[[Proto]]":"%FunctionPrototype%",constructor:"%InertAsyncFunction%","@@toStringTag":"string"},Reflect:{apply:fn,construct:fn,defineProperty:fn,deleteProperty:fn,get:fn,getOwnPropertyDescriptor:fn,getPrototypeOf:fn,has:fn,isExtensible:fn,ownKeys:fn,preventExtensions:fn,set:fn,setPrototypeOf:fn,"@@toStringTag":"string"},Proxy:{"[[Proto]]":"%FunctionPrototype%",revocable:fn},escape:fn,unescape:fn,"%UniqueCompartment%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%CompartmentPrototype%",toString:fn},"%InertCompartment%":{"[[Proto]]":"%FunctionPrototype%",prototype:"%CompartmentPrototype%",toString:fn},"%CompartmentPrototype%":{constructor:"%InertCompartment%",evaluate:fn,globalThis:getter,name:getter,toString:fn,__isKnownScopeProxy__:fn,import:asyncFn,load:asyncFn,importNow:fn,module:fn},lockdown:fn,harden:fn,"%InitialGetStackString%":fn};$h‍_once.whitelist(whitelist)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let defineProperty,objectHasOwnProperty,entries,makeEvalFunction,makeFunctionConstructor,constantProperties,universalPropertyNames;$h‍_imports([["./commons.js",[["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["entries",[$h‍_a=>entries=$h‍_a]]]],["./make-eval-function.js",[["makeEvalFunction",[$h‍_a=>makeEvalFunction=$h‍_a]]]],["./make-function-constructor.js",[["makeFunctionConstructor",[$h‍_a=>makeFunctionConstructor=$h‍_a]]]],["./whitelist.js",[["constantProperties",[$h‍_a=>constantProperties=$h‍_a]],["universalPropertyNames",[$h‍_a=>universalPropertyNames=$h‍_a]]]]]);$h‍_once.setGlobalObjectConstantProperties(globalObject=>{for(const[name,constant]of entries(constantProperties))defineProperty(globalObject,name,{value:constant,writable:!1,enumerable:!1,configurable:!1})});$h‍_once.setGlobalObjectMutableProperties((globalObject,{intrinsics:intrinsics,newGlobalPropertyNames:newGlobalPropertyNames,makeCompartmentConstructor:makeCompartmentConstructor,safeEvaluate:safeEvaluate,markVirtualizedNativeFunction:markVirtualizedNativeFunction})=>{for(const[name,intrinsicName]of entries(universalPropertyNames))objectHasOwnProperty(intrinsics,intrinsicName)&&defineProperty(globalObject,name,{value:intrinsics[intrinsicName],writable:!0,enumerable:!1,configurable:!0});for(const[name,intrinsicName]of entries(newGlobalPropertyNames))objectHasOwnProperty(intrinsics,intrinsicName)&&defineProperty(globalObject,name,{value:intrinsics[intrinsicName],writable:!0,enumerable:!1,configurable:!0});const perCompartmentGlobals={globalThis:globalObject,eval:makeEvalFunction(safeEvaluate),Function:makeFunctionConstructor(safeEvaluate)};perCompartmentGlobals.Compartment=makeCompartmentConstructor(makeCompartmentConstructor,intrinsics,markVirtualizedNativeFunction);for(const[name,value]of entries(perCompartmentGlobals))defineProperty(globalObject,name,{value:value,writable:!0,enumerable:!1,configurable:!0}),"function"==typeof value&&markVirtualizedNativeFunction(value)})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let ReferenceError,TypeError,Map,Set,arrayJoin,arrayMap,arrayPush,create,freeze,mapGet,mapHas,mapSet,setAdd,promiseCatch,promiseThen,values,weakmapGet,assert;$h‍_imports([["./commons.js",[["ReferenceError",[$h‍_a=>ReferenceError=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["Map",[$h‍_a=>Map=$h‍_a]],["Set",[$h‍_a=>Set=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]],["arrayMap",[$h‍_a=>arrayMap=$h‍_a]],["arrayPush",[$h‍_a=>arrayPush=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["mapGet",[$h‍_a=>mapGet=$h‍_a]],["mapHas",[$h‍_a=>mapHas=$h‍_a]],["mapSet",[$h‍_a=>mapSet=$h‍_a]],["setAdd",[$h‍_a=>setAdd=$h‍_a]],["promiseCatch",[$h‍_a=>promiseCatch=$h‍_a]],["promiseThen",[$h‍_a=>promiseThen=$h‍_a]],["values",[$h‍_a=>values=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);const{details:d,quote:q}=assert,noop=()=>{};$h‍_once.makeAlias((compartment,specifier)=>freeze({compartment:compartment,specifier:specifier}));const loadRecord=async(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier,staticModuleRecord,pendingJobs,moduleLoads,errors)=>{const{resolveHook:resolveHook,moduleRecords:moduleRecords}=weakmapGet(compartmentPrivateFields,compartment),resolvedImports=((imports,resolveHook,fullReferrerSpecifier)=>{const resolvedImports=create(null);for(const importSpecifier of imports){const fullSpecifier=resolveHook(importSpecifier,fullReferrerSpecifier);resolvedImports[importSpecifier]=fullSpecifier}return freeze(resolvedImports)})(staticModuleRecord.imports,resolveHook,moduleSpecifier),moduleRecord=freeze({compartment:compartment,staticModuleRecord:staticModuleRecord,moduleSpecifier:moduleSpecifier,resolvedImports:resolvedImports});for(const fullSpecifier of values(resolvedImports)){const dependencyLoaded=memoizedLoadWithErrorAnnotation(compartmentPrivateFields,moduleAliases,compartment,fullSpecifier,pendingJobs,moduleLoads,errors);setAdd(pendingJobs,promiseThen(dependencyLoaded,noop,error=>{arrayPush(errors,error)}))}return mapSet(moduleRecords,moduleSpecifier,moduleRecord),moduleRecord},memoizedLoadWithErrorAnnotation=async(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier,pendingJobs,moduleLoads,errors)=>{const{name:compartmentName}=weakmapGet(compartmentPrivateFields,compartment);let compartmentLoading=mapGet(moduleLoads,compartment);void 0===compartmentLoading&&(compartmentLoading=new Map,mapSet(moduleLoads,compartment,compartmentLoading));let moduleLoading=mapGet(compartmentLoading,moduleSpecifier);return void 0!==moduleLoading||(moduleLoading=promiseCatch((async(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier,pendingJobs,moduleLoads,errors)=>{const{importHook:importHook,moduleMap:moduleMap,moduleMapHook:moduleMapHook,moduleRecords:moduleRecords}=weakmapGet(compartmentPrivateFields,compartment);let aliasNamespace=moduleMap[moduleSpecifier];if(void 0===aliasNamespace&&void 0!==moduleMapHook&&(aliasNamespace=moduleMapHook(moduleSpecifier)),"string"==typeof aliasNamespace)assert.fail(d`Cannot map module ${q(moduleSpecifier)} to ${q(aliasNamespace)} in parent compartment, not yet implemented`,TypeError);else if(void 0!==aliasNamespace){const alias=weakmapGet(moduleAliases,aliasNamespace);void 0===alias&&assert.fail(d`Cannot map module ${q(moduleSpecifier)} because the value is not a module exports namespace, or is from another realm`,ReferenceError);const aliasRecord=await memoizedLoadWithErrorAnnotation(compartmentPrivateFields,moduleAliases,alias.compartment,alias.specifier,pendingJobs,moduleLoads,errors);return mapSet(moduleRecords,moduleSpecifier,aliasRecord),aliasRecord}if(mapHas(moduleRecords,moduleSpecifier))return mapGet(moduleRecords,moduleSpecifier);const staticModuleRecord=await importHook(moduleSpecifier);if(null!==staticModuleRecord&&"object"==typeof staticModuleRecord||assert.fail(d`importHook must return a promise for an object, for module ${q(moduleSpecifier)} in compartment ${q(compartment.name)}`),void 0!==staticModuleRecord.record){const{compartment:aliasCompartment=compartment,specifier:aliasSpecifier=moduleSpecifier,record:aliasModuleRecord}=staticModuleRecord,aliasRecord=await loadRecord(compartmentPrivateFields,moduleAliases,aliasCompartment,aliasSpecifier,aliasModuleRecord,pendingJobs,moduleLoads,errors);return mapSet(moduleRecords,moduleSpecifier,aliasRecord),aliasRecord}return loadRecord(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier,staticModuleRecord,pendingJobs,moduleLoads,errors)})(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier,pendingJobs,moduleLoads,errors),error=>{throw assert.note(error,d`${error.message}, loading ${q(moduleSpecifier)} in compartment ${q(compartmentName)}`),error}),mapSet(compartmentLoading,moduleSpecifier,moduleLoading)),moduleLoading};$h‍_once.load(async(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier)=>{const{name:compartmentName}=weakmapGet(compartmentPrivateFields,compartment),pendingJobs=new Set,moduleLoads=new Map,errors=[],dependencyLoaded=memoizedLoadWithErrorAnnotation(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier,pendingJobs,moduleLoads,errors);setAdd(pendingJobs,promiseThen(dependencyLoaded,noop,error=>{arrayPush(errors,error)}));for(const job of pendingJobs)await job;if(errors.length>0)throw new TypeError(`Failed to load module ${q(moduleSpecifier)} in package ${q(compartmentName)} (${errors.length} underlying failures: ${arrayJoin(arrayMap(errors,error=>error.message),", ")}`)})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let makeAlias,Proxy,TypeError,create,freeze,mapGet,mapHas,mapSet,ownKeys,reflectGet,reflectGetOwnPropertyDescriptor,reflectHas,reflectIsExtensible,reflectPreventExtensions,weakmapSet,assert;$h‍_imports([["./module-load.js",[["makeAlias",[$h‍_a=>makeAlias=$h‍_a]]]],["./commons.js",[["Proxy",[$h‍_a=>Proxy=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["mapGet",[$h‍_a=>mapGet=$h‍_a]],["mapHas",[$h‍_a=>mapHas=$h‍_a]],["mapSet",[$h‍_a=>mapSet=$h‍_a]],["ownKeys",[$h‍_a=>ownKeys=$h‍_a]],["reflectGet",[$h‍_a=>reflectGet=$h‍_a]],["reflectGetOwnPropertyDescriptor",[$h‍_a=>reflectGetOwnPropertyDescriptor=$h‍_a]],["reflectHas",[$h‍_a=>reflectHas=$h‍_a]],["reflectIsExtensible",[$h‍_a=>reflectIsExtensible=$h‍_a]],["reflectPreventExtensions",[$h‍_a=>reflectPreventExtensions=$h‍_a]],["weakmapSet",[$h‍_a=>weakmapSet=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);const{quote:q}=assert,deferExports=()=>{let active=!1;const proxiedExports=create(null);return freeze({activate(){active=!0},proxiedExports:proxiedExports,exportsProxy:new Proxy(proxiedExports,{get(_target,name,receiver){if(!active)throw new TypeError(`Cannot get property ${q(name)} of module exports namespace, the module has not yet begun to execute`);return reflectGet(proxiedExports,name,receiver)},set(_target,name,_value){throw new TypeError(`Cannot set property ${q(name)} of module exports namespace`)},has(_target,name){if(!active)throw new TypeError(`Cannot check property ${q(name)}, the module has not yet begun to execute`);return reflectHas(proxiedExports,name)},deleteProperty(_target,name){throw new TypeError(`Cannot delete property ${q(name)}s of module exports namespace`)},ownKeys(_target){if(!active)throw new TypeError("Cannot enumerate keys, the module has not yet begun to execute");return ownKeys(proxiedExports)},getOwnPropertyDescriptor(_target,name){if(!active)throw new TypeError(`Cannot get own property descriptor ${q(name)}, the module has not yet begun to execute`);return reflectGetOwnPropertyDescriptor(proxiedExports,name)},preventExtensions(_target){if(!active)throw new TypeError("Cannot prevent extensions of module exports namespace, the module has not yet begun to execute");return reflectPreventExtensions(proxiedExports)},isExtensible(){if(!active)throw new TypeError("Cannot check extensibility of module exports namespace, the module has not yet begun to execute");return reflectIsExtensible(proxiedExports)},getPrototypeOf:_target=>null,setPrototypeOf(_target,_proto){throw new TypeError("Cannot set prototype of module exports namespace")},defineProperty(_target,name,_descriptor){throw new TypeError(`Cannot define property ${q(name)} of module exports namespace`)},apply(_target,_thisArg,_args){throw new TypeError("Cannot call module exports namespace, it is not a function")},construct(_target,_args){throw new TypeError("Cannot construct module exports namespace, it is not a constructor")}})})};$h‍_once.deferExports(deferExports);$h‍_once.getDeferredExports((compartment,compartmentPrivateFields,moduleAliases,specifier)=>{const{deferredExports:deferredExports}=compartmentPrivateFields;if(!mapHas(deferredExports,specifier)){const deferred=deferExports();weakmapSet(moduleAliases,deferred.exportsProxy,makeAlias(compartment,specifier)),mapSet(deferredExports,specifier,deferred)}return mapGet(deferredExports,specifier)})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let assert,getDeferredExports,ReferenceError,SyntaxError,TypeError,arrayForEach,arrayIncludes,arrayPush,arraySome,arraySort,create,defineProperty,entries,freeze,isArray,keys,mapGet,weakmapGet,compartmentEvaluate;$h‍_imports([["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]],["./module-proxy.js",[["getDeferredExports",[$h‍_a=>getDeferredExports=$h‍_a]]]],["./commons.js",[["ReferenceError",[$h‍_a=>ReferenceError=$h‍_a]],["SyntaxError",[$h‍_a=>SyntaxError=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["arrayForEach",[$h‍_a=>arrayForEach=$h‍_a]],["arrayIncludes",[$h‍_a=>arrayIncludes=$h‍_a]],["arrayPush",[$h‍_a=>arrayPush=$h‍_a]],["arraySome",[$h‍_a=>arraySome=$h‍_a]],["arraySort",[$h‍_a=>arraySort=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["entries",[$h‍_a=>entries=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["isArray",[$h‍_a=>isArray=$h‍_a]],["keys",[$h‍_a=>keys=$h‍_a]],["mapGet",[$h‍_a=>mapGet=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]]]],["./compartment-evaluate.js",[["compartmentEvaluate",[$h‍_a=>compartmentEvaluate=$h‍_a]]]]]);const{quote:q}=assert;$h‍_once.makeThirdPartyModuleInstance((compartmentPrivateFields,staticModuleRecord,compartment,moduleAliases,moduleSpecifier,resolvedImports)=>{const{exportsProxy:exportsProxy,proxiedExports:proxiedExports,activate:activate}=getDeferredExports(compartment,weakmapGet(compartmentPrivateFields,compartment),moduleAliases,moduleSpecifier),notifiers=create(null);if(staticModuleRecord.exports){if(!isArray(staticModuleRecord.exports)||arraySome(staticModuleRecord.exports,name=>"string"!=typeof name))throw new TypeError('SES third-party static module record "exports" property must be an array of strings for module '+moduleSpecifier);arrayForEach(staticModuleRecord.exports,name=>{let value=proxiedExports[name];const updaters=[];defineProperty(proxiedExports,name,{get:()=>value,set:newValue=>{value=newValue;for(const updater of updaters)updater(newValue)},enumerable:!0,configurable:!1}),notifiers[name]=update=>{arrayPush(updaters,update),update(value)}})}let activated=!1;return freeze({notifiers:notifiers,exportsProxy:exportsProxy,execute(){activated||(activate(),activated=!0,staticModuleRecord.execute(proxiedExports,compartment,resolvedImports))}})});$h‍_once.makeModuleInstance((privateFields,moduleAliases,moduleRecord,importedInstances)=>{const{compartment:compartment,moduleSpecifier:moduleSpecifier,staticModuleRecord:staticModuleRecord}=moduleRecord,{reexports:exportAlls=[],__syncModuleProgram__:functorSource,__fixedExportMap__:fixedExportMap={},__liveExportMap__:liveExportMap={}}=staticModuleRecord,compartmentFields=weakmapGet(privateFields,compartment),{__shimTransforms__:__shimTransforms__}=compartmentFields,{exportsProxy:exportsProxy,proxiedExports:proxiedExports,activate:activate}=getDeferredExports(compartment,compartmentFields,moduleAliases,moduleSpecifier),exportsProps=create(null),localLexicals=create(null),onceVar=create(null),liveVar=create(null),localGetNotify=create(null),notifiers=create(null);arrayForEach(entries(fixedExportMap),([fixedExportName,[localName]])=>{let fixedGetNotify=localGetNotify[localName];if(!fixedGetNotify){let value,tdz=!0,optUpdaters=[];const get=()=>{if(tdz)throw new ReferenceError(`binding ${q(localName)} not yet initialized`);return value},init=freeze(initValue=>{if(!tdz)throw new TypeError(`Internal: binding ${q(localName)} already initialized`);value=initValue;const updaters=optUpdaters;optUpdaters=null,tdz=!1;for(const updater of updaters)updater(initValue);return initValue});fixedGetNotify={get:get,notify:updater=>{updater!==init&&(tdz?arrayPush(optUpdaters,updater):updater(value))}},localGetNotify[localName]=fixedGetNotify,onceVar[localName]=init}exportsProps[fixedExportName]={get:fixedGetNotify.get,set:void 0,enumerable:!0,configurable:!1},notifiers[fixedExportName]=fixedGetNotify.notify}),arrayForEach(entries(liveExportMap),([liveExportName,[localName,setProxyTrap]])=>{let liveGetNotify=localGetNotify[localName];if(!liveGetNotify){let value,tdz=!0;const updaters=[],get=()=>{if(tdz)throw new ReferenceError(`binding ${q(liveExportName)} not yet initialized`);return value},update=freeze(newValue=>{value=newValue,tdz=!1;for(const updater of updaters)updater(newValue)}),set=newValue=>{if(tdz)throw new ReferenceError(`binding ${q(localName)} not yet initialized`);value=newValue;for(const updater of updaters)updater(newValue)};liveGetNotify={get:get,notify:updater=>{updater!==update&&(arrayPush(updaters,updater),tdz||updater(value))}},localGetNotify[localName]=liveGetNotify,setProxyTrap&&defineProperty(localLexicals,localName,{get:get,set:set,enumerable:!0,configurable:!1}),liveVar[localName]=update}exportsProps[liveExportName]={get:liveGetNotify.get,set:void 0,enumerable:!0,configurable:!1},notifiers[liveExportName]=liveGetNotify.notify});function imports(updateRecord){const candidateAll=create(null);candidateAll.default=!1;for(const[specifier,importUpdaters]of updateRecord){const instance=mapGet(importedInstances,specifier);instance.execute();const{notifiers:importNotifiers}=instance;for(const[importName,updaters]of importUpdaters){const importNotify=importNotifiers[importName];if(!importNotify)throw SyntaxError(`The requested module '${specifier}' does not provide an export named '${importName}'`);for(const updater of updaters)importNotify(updater)}if(arrayIncludes(exportAlls,specifier))for(const[importName,importNotify]of entries(importNotifiers))void 0===candidateAll[importName]?candidateAll[importName]=importNotify:candidateAll[importName]=!1}for(const[importName,notify]of entries(candidateAll))if(!notifiers[importName]&&!1!==notify){let value;notifiers[importName]=notify;notify(newValue=>value=newValue),exportsProps[importName]={get:()=>value,set:void 0,enumerable:!0,configurable:!1}}arrayForEach(arraySort(keys(exportsProps)),k=>defineProperty(proxiedExports,k,exportsProps[k])),freeze(proxiedExports),activate()}notifiers["*"]=update=>{update(proxiedExports)};let thrownError,optFunctor=compartmentEvaluate(compartmentFields,functorSource,{globalObject:compartment.globalThis,transforms:__shimTransforms__,__moduleShimLexicals__:localLexicals}),didThrow=!1;return freeze({notifiers:notifiers,exportsProxy:exportsProxy,execute:function(){if(optFunctor){const functor=optFunctor;optFunctor=null;try{functor(freeze({imports:freeze(imports),onceVar:freeze(onceVar),liveVar:freeze(liveVar)}))}catch(e){didThrow=!0,thrownError=e}}if(didThrow)throw thrownError}})})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let assert,makeModuleInstance,makeThirdPartyModuleInstance,Map,ReferenceError,TypeError,entries,isArray,isObject,mapGet,mapHas,mapSet,weakmapGet;$h‍_imports([["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]],["./module-instance.js",[["makeModuleInstance",[$h‍_a=>makeModuleInstance=$h‍_a]],["makeThirdPartyModuleInstance",[$h‍_a=>makeThirdPartyModuleInstance=$h‍_a]]]],["./commons.js",[["Map",[$h‍_a=>Map=$h‍_a]],["ReferenceError",[$h‍_a=>ReferenceError=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["entries",[$h‍_a=>entries=$h‍_a]],["isArray",[$h‍_a=>isArray=$h‍_a]],["isObject",[$h‍_a=>isObject=$h‍_a]],["mapGet",[$h‍_a=>mapGet=$h‍_a]],["mapHas",[$h‍_a=>mapHas=$h‍_a]],["mapSet",[$h‍_a=>mapSet=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]]]]]);const{quote:q}=assert,link=(compartmentPrivateFields,moduleAliases,compartment,moduleSpecifier)=>{const{name:compartmentName,moduleRecords:moduleRecords}=weakmapGet(compartmentPrivateFields,compartment),moduleRecord=mapGet(moduleRecords,moduleSpecifier);if(void 0===moduleRecord)throw new ReferenceError(`Missing link to module ${q(moduleSpecifier)} from compartment ${q(compartmentName)}`);return instantiate(compartmentPrivateFields,moduleAliases,moduleRecord)};$h‍_once.link(link);const instantiate=(compartmentPrivateFields,moduleAliases,moduleRecord)=>{const{compartment:compartment,moduleSpecifier:moduleSpecifier,resolvedImports:resolvedImports,staticModuleRecord:staticModuleRecord}=moduleRecord,{instances:instances}=weakmapGet(compartmentPrivateFields,compartment);if(mapHas(instances,moduleSpecifier))return mapGet(instances,moduleSpecifier);!function(staticModuleRecord,moduleSpecifier){assert(isObject(staticModuleRecord),`Static module records must be of type object, got ${q(staticModuleRecord)}, for module ${q(moduleSpecifier)}`);const{imports:imports,exports:exports,reexports:reexports=[]}=staticModuleRecord;assert(isArray(imports),`Property 'imports' of a static module record must be an array, got ${q(imports)}, for module ${q(moduleSpecifier)}`),assert(isArray(exports),`Property 'exports' of a precompiled module record must be an array, got ${q(exports)}, for module ${q(moduleSpecifier)}`),assert(isArray(reexports),`Property 'reexports' of a precompiled module record must be an array if present, got ${q(reexports)}, for module ${q(moduleSpecifier)}`)}(staticModuleRecord,moduleSpecifier);const importedInstances=new Map;let moduleInstance;if(function(staticModuleRecord){return"string"==typeof staticModuleRecord.__syncModuleProgram__}(staticModuleRecord))!function(staticModuleRecord,moduleSpecifier){const{__fixedExportMap__:__fixedExportMap__,__liveExportMap__:__liveExportMap__}=staticModuleRecord;assert(isObject(__fixedExportMap__),`Property '__fixedExportMap__' of a precompiled module record must be an object, got ${q(__fixedExportMap__)}, for module ${q(moduleSpecifier)}`),assert(isObject(__liveExportMap__),`Property '__liveExportMap__' of a precompiled module record must be an object, got ${q(__liveExportMap__)}, for module ${q(moduleSpecifier)}`)}(staticModuleRecord,moduleSpecifier),moduleInstance=makeModuleInstance(compartmentPrivateFields,moduleAliases,moduleRecord,importedInstances);else{if(!function(staticModuleRecord){return"function"==typeof staticModuleRecord.execute}(staticModuleRecord))throw new TypeError("importHook must return a static module record, got "+q(staticModuleRecord));!function(staticModuleRecord,moduleSpecifier){const{exports:exports}=staticModuleRecord;assert(isArray(exports),`Property 'exports' of a third-party static module record must be an array, got ${q(exports)}, for module ${q(moduleSpecifier)}`)}(staticModuleRecord,moduleSpecifier),moduleInstance=makeThirdPartyModuleInstance(compartmentPrivateFields,staticModuleRecord,compartment,moduleAliases,moduleSpecifier,resolvedImports)}mapSet(instances,moduleSpecifier,moduleInstance);for(const[importSpecifier,resolvedSpecifier]of entries(resolvedImports)){const importedInstance=link(compartmentPrivateFields,moduleAliases,compartment,resolvedSpecifier);mapSet(importedInstances,importSpecifier,importedInstance)}return moduleInstance};$h‍_once.instantiate(instantiate)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let Map,ReferenceError,TypeError,WeakMap,WeakSet,arrayFilter,arrayJoin,assign,defineProperties,entries,freeze,getOwnPropertyNames,promiseThen,weakmapGet,weakmapSet,weaksetHas,setGlobalObjectConstantProperties,setGlobalObjectMutableProperties,isValidIdentifierName,sharedGlobalPropertyNames,load,link,getDeferredExports,assert,compartmentEvaluate,makeSafeEvaluator;$h‍_imports([["./commons.js",[["Map",[$h‍_a=>Map=$h‍_a]],["ReferenceError",[$h‍_a=>ReferenceError=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["WeakMap",[$h‍_a=>WeakMap=$h‍_a]],["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["arrayFilter",[$h‍_a=>arrayFilter=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]],["assign",[$h‍_a=>assign=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["entries",[$h‍_a=>entries=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["getOwnPropertyNames",[$h‍_a=>getOwnPropertyNames=$h‍_a]],["promiseThen",[$h‍_a=>promiseThen=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]],["weakmapSet",[$h‍_a=>weakmapSet=$h‍_a]],["weaksetHas",[$h‍_a=>weaksetHas=$h‍_a]]]],["./global-object.js",[["setGlobalObjectConstantProperties",[$h‍_a=>setGlobalObjectConstantProperties=$h‍_a]],["setGlobalObjectMutableProperties",[$h‍_a=>setGlobalObjectMutableProperties=$h‍_a]]]],["./scope-constants.js",[["isValidIdentifierName",[$h‍_a=>isValidIdentifierName=$h‍_a]]]],["./whitelist.js",[["sharedGlobalPropertyNames",[$h‍_a=>sharedGlobalPropertyNames=$h‍_a]]]],["./module-load.js",[["load",[$h‍_a=>load=$h‍_a]]]],["./module-link.js",[["link",[$h‍_a=>link=$h‍_a]]]],["./module-proxy.js",[["getDeferredExports",[$h‍_a=>getDeferredExports=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]],["./compartment-evaluate.js",[["compartmentEvaluate",[$h‍_a=>compartmentEvaluate=$h‍_a]]]],["./make-safe-evaluator.js",[["makeSafeEvaluator",[$h‍_a=>makeSafeEvaluator=$h‍_a]]]]]);const{quote:q}=assert,moduleAliases=new WeakMap,privateFields=new WeakMap,assertModuleHooks=compartment=>{const{importHook:importHook,resolveHook:resolveHook}=weakmapGet(privateFields,compartment);if("function"!=typeof importHook||"function"!=typeof resolveHook)throw new TypeError("Compartment must be constructed with an importHook and a resolveHook for it to be able to load modules")},InertCompartment=function(_endowments={},_modules={},_options={}){throw new TypeError("Compartment.prototype.constructor is not a valid constructor.")};$h‍_once.InertCompartment(InertCompartment);const compartmentImportNow=(compartment,specifier)=>{const{execute:execute,exportsProxy:exportsProxy}=link(privateFields,moduleAliases,compartment,specifier);return execute(),exportsProxy},CompartmentPrototype={constructor:InertCompartment,get globalThis(){return weakmapGet(privateFields,this).globalObject},get name(){return weakmapGet(privateFields,this).name},evaluate(source,options={}){const compartmentFields=weakmapGet(privateFields,this);return compartmentEvaluate(compartmentFields,source,options)},toString:()=>"[object Compartment]",__isKnownScopeProxy__(value){const{knownScopeProxies:knownScopeProxies}=weakmapGet(privateFields,this);return weaksetHas(knownScopeProxies,value)},module(specifier){if("string"!=typeof specifier)throw new TypeError("first argument of module() must be a string");assertModuleHooks(this);const{exportsProxy:exportsProxy}=getDeferredExports(this,weakmapGet(privateFields,this),moduleAliases,specifier);return exportsProxy},async import(specifier){if("string"!=typeof specifier)throw new TypeError("first argument of import() must be a string");return assertModuleHooks(this),promiseThen(load(privateFields,moduleAliases,this,specifier),()=>({namespace:compartmentImportNow(this,specifier)}))},async load(specifier){if("string"!=typeof specifier)throw new TypeError("first argument of load() must be a string");return assertModuleHooks(this),load(privateFields,moduleAliases,this,specifier)},importNow(specifier){if("string"!=typeof specifier)throw new TypeError("first argument of importNow() must be a string");return assertModuleHooks(this),compartmentImportNow(this,specifier)}};$h‍_once.CompartmentPrototype(CompartmentPrototype),defineProperties(InertCompartment,{prototype:{value:CompartmentPrototype}});$h‍_once.makeCompartmentConstructor((targetMakeCompartmentConstructor,intrinsics,markVirtualizedNativeFunction)=>{function Compartment(endowments={},moduleMap={},options={}){if(void 0===new.target)throw new TypeError("Class constructor Compartment cannot be invoked without 'new'");const{name:name="<unknown>",transforms:transforms=[],__shimTransforms__:__shimTransforms__=[],globalLexicals:globalLexicalsOption={},resolveHook:resolveHook,importHook:importHook,moduleMapHook:moduleMapHook}=options,globalTransforms=[...transforms,...__shimTransforms__],moduleRecords=new Map,instances=new Map,deferredExports=new Map;for(const[specifier,aliasNamespace]of entries(moduleMap||{})){if("string"==typeof aliasNamespace)throw new TypeError(`Cannot map module ${q(specifier)} to ${q(aliasNamespace)} in parent compartment`);if(void 0===weakmapGet(moduleAliases,aliasNamespace))throw ReferenceError(`Cannot map module ${q(specifier)} because it has no known compartment in this realm`)}const invalidNames=arrayFilter(getOwnPropertyNames(globalLexicalsOption),identifier=>!isValidIdentifierName(identifier));if(invalidNames.length)throw new TypeError(`Cannot create compartment with invalid names for global lexicals: ${arrayJoin(invalidNames,", ")}; these names would not be lexically mentionable`);const globalLexicals=freeze({...globalLexicalsOption}),globalObject={};setGlobalObjectConstantProperties(globalObject);const knownScopeProxies=new WeakSet,{safeEvaluate:safeEvaluate}=makeSafeEvaluator({globalObject:globalObject,localObject:globalLexicals,globalTransforms:globalTransforms,sloppyGlobalsMode:!1,knownScopeProxies:knownScopeProxies});setGlobalObjectMutableProperties(globalObject,{intrinsics:intrinsics,newGlobalPropertyNames:sharedGlobalPropertyNames,makeCompartmentConstructor:targetMakeCompartmentConstructor,safeEvaluate:safeEvaluate,markVirtualizedNativeFunction:markVirtualizedNativeFunction}),assign(globalObject,endowments),weakmapSet(privateFields,this,{name:name,globalTransforms:globalTransforms,globalObject:globalObject,knownScopeProxies:knownScopeProxies,globalLexicals:globalLexicals,safeEvaluate:safeEvaluate,resolveHook:resolveHook,importHook:importHook,moduleMap:moduleMap,moduleMapHook:moduleMapHook,moduleRecords:moduleRecords,__shimTransforms__:__shimTransforms__,deferredExports:deferredExports,instances:instances})}return Compartment.prototype=CompartmentPrototype,Compartment})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let TypeError,WeakSet,arrayFilter,defineProperty,entries,freeze,getOwnPropertyDescriptor,getOwnPropertyDescriptors,globalThis,is,isObject,objectHasOwnProperty,values,weaksetHas,constantProperties,sharedGlobalPropertyNames,universalPropertyNames,whitelist;$h‍_imports([["./commons.js",[["TypeError",[$h‍_a=>TypeError=$h‍_a]],["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["arrayFilter",[$h‍_a=>arrayFilter=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["entries",[$h‍_a=>entries=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["getOwnPropertyDescriptors",[$h‍_a=>getOwnPropertyDescriptors=$h‍_a]],["globalThis",[$h‍_a=>globalThis=$h‍_a]],["is",[$h‍_a=>is=$h‍_a]],["isObject",[$h‍_a=>isObject=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["values",[$h‍_a=>values=$h‍_a]],["weaksetHas",[$h‍_a=>weaksetHas=$h‍_a]]]],["./whitelist.js",[["constantProperties",[$h‍_a=>constantProperties=$h‍_a]],["sharedGlobalPropertyNames",[$h‍_a=>sharedGlobalPropertyNames=$h‍_a]],["universalPropertyNames",[$h‍_a=>universalPropertyNames=$h‍_a]],["whitelist",[$h‍_a=>whitelist=$h‍_a]]]]]);const isFunction=obj=>"function"==typeof obj;function initProperty(obj,name,desc){if(objectHasOwnProperty(obj,name)){const preDesc=getOwnPropertyDescriptor(obj,name);if(!is(preDesc.value,desc.value)||preDesc.get!==desc.get||preDesc.set!==desc.set||preDesc.writable!==desc.writable||preDesc.enumerable!==desc.enumerable||preDesc.configurable!==desc.configurable)throw new TypeError("Conflicting definitions of "+name)}defineProperty(obj,name,desc)}function sampleGlobals(globalObject,newPropertyNames){const newIntrinsics={__proto__:null};for(const[globalName,intrinsicName]of entries(newPropertyNames))objectHasOwnProperty(globalObject,globalName)&&(newIntrinsics[intrinsicName]=globalObject[globalName]);return newIntrinsics}const makeIntrinsicsCollector=()=>{const intrinsics={__proto__:null};let pseudoNatives;const addIntrinsics=newIntrinsics=>{!function(obj,descs){for(const[name,desc]of entries(descs))initProperty(obj,name,desc)}(intrinsics,getOwnPropertyDescriptors(newIntrinsics))};freeze(addIntrinsics);const completePrototypes=()=>{for(const[name,intrinsic]of entries(intrinsics)){if(!isObject(intrinsic))continue;if(!objectHasOwnProperty(intrinsic,"prototype"))continue;const permit=whitelist[name];if("object"!=typeof permit)throw new TypeError("Expected permit object at whitelist."+name);const namePrototype=permit.prototype;if(!namePrototype)throw new TypeError(name+".prototype property not whitelisted");if("string"!=typeof namePrototype||!objectHasOwnProperty(whitelist,namePrototype))throw new TypeError(`Unrecognized ${name}.prototype whitelist entry`);const intrinsicPrototype=intrinsic.prototype;if(objectHasOwnProperty(intrinsics,namePrototype)){if(intrinsics[namePrototype]!==intrinsicPrototype)throw new TypeError("Conflicting bindings of "+namePrototype)}else intrinsics[namePrototype]=intrinsicPrototype}};freeze(completePrototypes);const finalIntrinsics=()=>(freeze(intrinsics),pseudoNatives=new WeakSet(arrayFilter(values(intrinsics),isFunction)),intrinsics);freeze(finalIntrinsics);const isPseudoNative=obj=>{if(!pseudoNatives)throw new TypeError("isPseudoNative can only be called after finalIntrinsics");return weaksetHas(pseudoNatives,obj)};freeze(isPseudoNative);const intrinsicsCollector={addIntrinsics:addIntrinsics,completePrototypes:completePrototypes,finalIntrinsics:finalIntrinsics,isPseudoNative:isPseudoNative};return freeze(intrinsicsCollector),addIntrinsics(constantProperties),addIntrinsics(sampleGlobals(globalThis,universalPropertyNames)),intrinsicsCollector};$h‍_once.makeIntrinsicsCollector(makeIntrinsicsCollector);$h‍_once.getGlobalIntrinsics(globalObject=>{const{addIntrinsics:addIntrinsics,finalIntrinsics:finalIntrinsics}=makeIntrinsicsCollector();return addIntrinsics(sampleGlobals(globalObject,sharedGlobalPropertyNames)),finalIntrinsics()})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{$h‍_imports([]);$h‍_once.minEnablements({"%ObjectPrototype%":{toString:!0},"%FunctionPrototype%":{toString:!0},"%ErrorPrototype%":{name:!0}});const moderateEnablements={"%ObjectPrototype%":{toString:!0,valueOf:!0},"%ArrayPrototype%":{toString:!0,push:!0},"%FunctionPrototype%":{constructor:!0,bind:!0,toString:!0},"%ErrorPrototype%":{constructor:!0,message:!0,name:!0,toString:!0},"%TypeErrorPrototype%":{constructor:!0,message:!0,name:!0},"%SyntaxErrorPrototype%":{message:!0,name:!0},"%RangeErrorPrototype%":{message:!0,name:!0},"%URIErrorPrototype%":{message:!0,name:!0},"%EvalErrorPrototype%":{message:!0,name:!0},"%ReferenceErrorPrototype%":{message:!0,name:!0},"%PromisePrototype%":{constructor:!0},"%TypedArrayPrototype%":"*","%Generator%":{constructor:!0,name:!0,toString:!0},"%IteratorPrototype%":{toString:!0}};$h‍_once.moderateEnablements(moderateEnablements);const severeEnablements={...moderateEnablements,"%ObjectPrototype%":"*","%TypedArrayPrototype%":"*"};$h‍_once.severeEnablements(severeEnablements)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let Set,String,TypeError,arrayForEach,defineProperty,getOwnPropertyDescriptor,getOwnPropertyDescriptors,getOwnPropertyNames,isObject,objectHasOwnProperty,ownKeys,setHas,minEnablements,moderateEnablements,severeEnablements;$h‍_imports([["./commons.js",[["Set",[$h‍_a=>Set=$h‍_a]],["String",[$h‍_a=>String=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["arrayForEach",[$h‍_a=>arrayForEach=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["getOwnPropertyDescriptors",[$h‍_a=>getOwnPropertyDescriptors=$h‍_a]],["getOwnPropertyNames",[$h‍_a=>getOwnPropertyNames=$h‍_a]],["isObject",[$h‍_a=>isObject=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["ownKeys",[$h‍_a=>ownKeys=$h‍_a]],["setHas",[$h‍_a=>setHas=$h‍_a]]]],["./enablements.js",[["minEnablements",[$h‍_a=>minEnablements=$h‍_a]],["moderateEnablements",[$h‍_a=>moderateEnablements=$h‍_a]],["severeEnablements",[$h‍_a=>severeEnablements=$h‍_a]]]]]),$h‍_once.default((function(intrinsics,overrideTaming,overrideDebug=[]){const debugProperties=new Set(overrideDebug);function enable(path,obj,prop,desc){if("value"in desc&&desc.configurable){const{value:value}=desc;function getter(){return value}defineProperty(getter,"originalValue",{value:value,writable:!1,enumerable:!1,configurable:!1});const isDebug=setHas(debugProperties,prop);defineProperty(obj,prop,{get:getter,set:function(newValue){if(obj===this)throw new TypeError(`Cannot assign to read only property '${String(prop)}' of '${path}'`);objectHasOwnProperty(this,prop)?this[prop]=newValue:(isDebug&&console.error(new TypeError("Override property "+prop)),defineProperty(this,prop,{value:newValue,writable:!0,enumerable:!0,configurable:!0}))},enumerable:desc.enumerable,configurable:desc.configurable})}}function enableProperty(path,obj,prop){const desc=getOwnPropertyDescriptor(obj,prop);desc&&enable(path,obj,prop,desc)}function enableAllProperties(path,obj){const descs=getOwnPropertyDescriptors(obj);descs&&arrayForEach(ownKeys(descs),prop=>enable(path,obj,prop,descs[prop]))}let plan;switch(overrideTaming){case"min":plan=minEnablements;break;case"moderate":plan=moderateEnablements;break;case"severe":plan=severeEnablements;break;default:throw new TypeError("unrecognized overrideTaming "+overrideTaming)}!function enableProperties(path,obj,plan){for(const prop of getOwnPropertyNames(plan)){const desc=getOwnPropertyDescriptor(obj,prop);if(!desc||desc.get||desc.set)continue;const subPath=`${path}.${String(prop)}`,subPlan=plan[prop];if(!0===subPlan)enableProperty(subPath,obj,prop);else if("*"===subPlan)enableAllProperties(subPath,desc.value);else{if(!isObject(subPlan))throw new TypeError("Unexpected override enablement plan "+subPath);enableProperties(subPath,desc.value,subPlan)}}}("root",intrinsics,plan)}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let arrayPush,arraySlice,freeze,assert;$h‍_imports([["./commons.js",[["arrayPush",[$h‍_a=>arrayPush=$h‍_a]],["arraySlice",[$h‍_a=>arraySlice=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);const{details:X,quote:q}=assert,makeEnvironmentCaptor=aGlobal=>{const capturedEnvironmentOptionNames=[],getEnvironmentOption=(optionName,defaultSetting)=>{assert.typeof(optionName,"string",X`Environment option name ${q(optionName)} must be a string.`),assert.typeof(defaultSetting,"string",X`Environment option default setting ${q(defaultSetting)} must be a string.`);let setting=defaultSetting;const globalProcess=aGlobal.process;if(globalProcess&&"object"==typeof globalProcess){const globalEnv=globalProcess.env;if(globalEnv&&"object"==typeof globalEnv&&optionName in globalEnv){arrayPush(capturedEnvironmentOptionNames,optionName);const optionValue=globalEnv[optionName];assert.typeof(optionValue,"string",X`Environment option named ${q(optionName)}, if present, must have a corresponding string value, got ${q(optionValue)}`),setting=optionValue}}return assert(void 0===setting||"string"==typeof setting,X`Environment option value ${q(setting)}, if present, must be a string.`),setting};freeze(getEnvironmentOption);const getCapturedEnvironmentOptionNames=()=>freeze(arraySlice(capturedEnvironmentOptionNames));return freeze(getCapturedEnvironmentOptionNames),{getEnvironmentOption:getEnvironmentOption,getCapturedEnvironmentOptionNames:getCapturedEnvironmentOptionNames}};$h‍_once.makeEnvironmentCaptor(makeEnvironmentCaptor),freeze(makeEnvironmentCaptor)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let WeakSet,arrayFilter,arrayMap,arrayPush,defineProperty,freeze,fromEntries,isError,stringEndsWith,weaksetAdd,weaksetHas;$h‍_imports([["../commons.js",[["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["arrayFilter",[$h‍_a=>arrayFilter=$h‍_a]],["arrayMap",[$h‍_a=>arrayMap=$h‍_a]],["arrayPush",[$h‍_a=>arrayPush=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["fromEntries",[$h‍_a=>fromEntries=$h‍_a]],["isError",[$h‍_a=>isError=$h‍_a]],["stringEndsWith",[$h‍_a=>stringEndsWith=$h‍_a]],["weaksetAdd",[$h‍_a=>weaksetAdd=$h‍_a]],["weaksetHas",[$h‍_a=>weaksetHas=$h‍_a]]]],["./types.js",[]],["./internal-types.js",[]]]);const consoleLevelMethods=freeze([["debug","debug"],["log","log"],["info","info"],["warn","warn"],["error","error"],["trace","log"],["dirxml","log"],["group","log"],["groupCollapsed","log"]]),consoleOtherMethods=freeze([["assert","error"],["timeLog","log"],["clear",void 0],["count","info"],["countReset",void 0],["dir","log"],["groupEnd","log"],["table","log"],["time","info"],["timeEnd","info"],["profile",void 0],["profileEnd",void 0],["timeStamp",void 0]]),consoleWhitelist=freeze([...consoleLevelMethods,...consoleOtherMethods]);$h‍_once.consoleWhitelist(consoleWhitelist);const makeLoggingConsoleKit=(loggedErrorHandler,{shouldResetForDebugging:shouldResetForDebugging=!1}={})=>{shouldResetForDebugging&&loggedErrorHandler.resetErrorTagNum();let logArray=[];const loggingConsole=fromEntries(arrayMap(consoleWhitelist,([name,_])=>{const method=(...args)=>{arrayPush(logArray,[name,...args])};return defineProperty(method,"name",{value:name}),[name,freeze(method)]}));freeze(loggingConsole);const takeLog=()=>{const result=freeze(logArray);return logArray=[],result};freeze(takeLog);return freeze({loggingConsole:loggingConsole,takeLog:takeLog})};$h‍_once.makeLoggingConsoleKit(makeLoggingConsoleKit),freeze(makeLoggingConsoleKit);const ErrorInfo={NOTE:"ERROR_NOTE:",MESSAGE:"ERROR_MESSAGE:"};freeze(ErrorInfo);$h‍_once.BASE_CONSOLE_LEVEL("debug");const makeCausalConsole=(baseConsole,loggedErrorHandler)=>{const{getStackString:getStackString,tagError:tagError,takeMessageLogArgs:takeMessageLogArgs,takeNoteLogArgsArray:takeNoteLogArgsArray}=loggedErrorHandler,extractErrorArgs=(logArgs,subErrorsSink)=>arrayMap(logArgs,arg=>isError(arg)?(arrayPush(subErrorsSink,arg),`(${tagError(arg)})`):arg),logErrorInfo=(error,kind,logArgs,subErrorsSink)=>{const errorTag=tagError(error),errorName=kind===ErrorInfo.MESSAGE?errorTag+":":`${errorTag} ${kind}`,argTags=extractErrorArgs(logArgs,subErrorsSink);baseConsole.debug(errorName,...argTags)},logSubErrors=(subErrors,optTag)=>{if(0===subErrors.length)return;if(1===subErrors.length&&void 0===optTag)return void logError(subErrors[0]);let label;label=1===subErrors.length?"Nested error":`Nested ${subErrors.length} errors`,void 0!==optTag&&(label=`${label} under ${optTag}`),baseConsole.group(label);try{for(const subError of subErrors)logError(subError)}finally{baseConsole.groupEnd()}},errorsLogged=new WeakSet,noteCallback=(error,noteLogArgs)=>{const subErrors=[];logErrorInfo(error,ErrorInfo.NOTE,noteLogArgs,subErrors),logSubErrors(subErrors,tagError(error))},logError=error=>{if(weaksetHas(errorsLogged,error))return;const errorTag=tagError(error);weaksetAdd(errorsLogged,error);const subErrors=[],messageLogArgs=takeMessageLogArgs(error),noteLogArgsArray=takeNoteLogArgsArray(error,noteCallback);void 0===messageLogArgs?baseConsole.debug(errorTag+":",error.message):logErrorInfo(error,ErrorInfo.MESSAGE,messageLogArgs,subErrors);let stackString=getStackString(error);"string"==typeof stackString&&stackString.length>=1&&!stringEndsWith(stackString,"\n")&&(stackString+="\n"),baseConsole.debug(stackString);for(const noteLogArgs of noteLogArgsArray)logErrorInfo(error,ErrorInfo.NOTE,noteLogArgs,subErrors);logSubErrors(subErrors,errorTag)},levelMethods=arrayMap(consoleLevelMethods,([level,_])=>{const levelMethod=(...logArgs)=>{const subErrors=[],argTags=extractErrorArgs(logArgs,subErrors);baseConsole[level](...argTags),logSubErrors(subErrors)};return defineProperty(levelMethod,"name",{value:level}),[level,freeze(levelMethod)]}),otherMethodNames=arrayFilter(consoleOtherMethods,([name,_])=>name in baseConsole),otherMethods=arrayMap(otherMethodNames,([name,_])=>{const otherMethod=(...args)=>{baseConsole[name](...args)};return defineProperty(otherMethod,"name",{value:name}),[name,freeze(otherMethod)]}),causalConsole=fromEntries([...levelMethods,...otherMethods]);return freeze(causalConsole)};$h‍_once.makeCausalConsole(makeCausalConsole),freeze(makeCausalConsole);const filterConsole=(baseConsole,filter,_topic)=>{const whitelist=arrayFilter(consoleWhitelist,([name,_])=>name in baseConsole),methods=arrayMap(whitelist,([name,severity])=>[name,freeze((...args)=>{(void 0===severity||filter.canLog(severity))&&baseConsole[name](...args)})]),filteringConsole=fromEntries(methods);return freeze(filteringConsole)};$h‍_once.filterConsole(filterConsole),freeze(filterConsole)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let TypeError,globalThis,defaultHandler,makeCausalConsole;$h‍_imports([["../commons.js",[["TypeError",[$h‍_a=>TypeError=$h‍_a]],["globalThis",[$h‍_a=>globalThis=$h‍_a]]]],["./assert.js",[["loggedErrorHandler",[$h‍_a=>defaultHandler=$h‍_a]]]],["./console.js",[["makeCausalConsole",[$h‍_a=>makeCausalConsole=$h‍_a]]]],["./types.js",[]],["./internal-types.js",[]]]);const originalConsole=console;$h‍_once.tameConsole((consoleTaming="safe",errorTrapping="platform",optGetStackString)=>{if("safe"!==consoleTaming&&"unsafe"!==consoleTaming)throw new TypeError("unrecognized consoleTaming "+consoleTaming);if("unsafe"===consoleTaming)return{console:originalConsole};let loggedErrorHandler;loggedErrorHandler=void 0===optGetStackString?defaultHandler:{...defaultHandler,getStackString:optGetStackString};const causalConsole=makeCausalConsole(originalConsole,loggedErrorHandler);return"none"!==errorTrapping&&void 0!==globalThis.process&&globalThis.process.on("uncaughtException",error=>{causalConsole.error(error),"platform"===errorTrapping||"exit"===errorTrapping?globalThis.process.exit(globalThis.process.exitCode||-1):"abort"===errorTrapping&&globalThis.process.abort()}),"none"!==errorTrapping&&void 0!==globalThis.window&&globalThis.window.addEventListener("error",event=>{event.preventDefault(),causalConsole.error(event.error),"exit"!==errorTrapping&&"abort"!==errorTrapping||(globalThis.window.location.href="about:blank")}),{console:causalConsole}})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let WeakMap,WeakSet,apply,arrayFilter,arrayJoin,arrayMap,arraySlice,create,defineProperties,fromEntries,reflectSet,regexpExec,regexpTest,weakmapGet,weakmapHas,weakmapSet,weaksetAdd,weaksetHas;$h‍_imports([["../commons.js",[["WeakMap",[$h‍_a=>WeakMap=$h‍_a]],["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["apply",[$h‍_a=>apply=$h‍_a]],["arrayFilter",[$h‍_a=>arrayFilter=$h‍_a]],["arrayJoin",[$h‍_a=>arrayJoin=$h‍_a]],["arrayMap",[$h‍_a=>arrayMap=$h‍_a]],["arraySlice",[$h‍_a=>arraySlice=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["fromEntries",[$h‍_a=>fromEntries=$h‍_a]],["reflectSet",[$h‍_a=>reflectSet=$h‍_a]],["regexpExec",[$h‍_a=>regexpExec=$h‍_a]],["regexpTest",[$h‍_a=>regexpTest=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]],["weakmapHas",[$h‍_a=>weakmapHas=$h‍_a]],["weakmapSet",[$h‍_a=>weakmapSet=$h‍_a]],["weaksetAdd",[$h‍_a=>weaksetAdd=$h‍_a]],["weaksetHas",[$h‍_a=>weaksetHas=$h‍_a]]]]]);const safeV8CallSiteMethodNames=["getTypeName","getFunctionName","getMethodName","getFileName","getLineNumber","getColumnNumber","getEvalOrigin","isToplevel","isEval","isNative","isConstructor","isAsync","getPosition","getScriptNameOrSourceURL","toString"],safeV8CallSiteFacet=callSite=>{const o=fromEntries(arrayMap(safeV8CallSiteMethodNames,name=>{const method=callSite[name];return[name,()=>apply(method,callSite,[])]}));return create(o,{})},FILENAME_CENSORS=[/\/node_modules\//,/^(?:node:)?internal\//,/\/packages\/ses\/src\/error\/assert.js$/,/\/packages\/eventual-send\/src\//],filterFileName=fileName=>{if(!fileName)return!0;for(const filter of FILENAME_CENSORS)if(regexpTest(filter,fileName))return!1;return!0};$h‍_once.filterFileName(filterFileName);const CALLSITE_PATTERNS=[/^((?:.*[( ])?)[:/\w_-]*\/\.\.\.\/(.+)$/,/^((?:.*[( ])?)[:/\w_-]*\/(packages\/.+)$/],shortenCallSiteString=callSiteString=>{for(const filter of CALLSITE_PATTERNS){const match=regexpExec(filter,callSiteString);if(match)return arrayJoin(arraySlice(match,1),"")}return callSiteString};$h‍_once.shortenCallSiteString(shortenCallSiteString);$h‍_once.tameV8ErrorConstructor((OriginalError,InitialError,errorTaming,stackFiltering)=>{const originalCaptureStackTrace=OriginalError.captureStackTrace,callSiteFilter=callSite=>"verbose"===stackFiltering||filterFileName(callSite.getFileName()),callSiteStringifier=callSite=>{let callSiteString=""+callSite;return"concise"===stackFiltering&&(callSiteString=shortenCallSiteString(callSiteString)),"\n  at "+callSiteString},stackStringFromSST=(_error,sst)=>arrayJoin(arrayMap(arrayFilter(sst,callSiteFilter),callSiteStringifier),""),ssts=new WeakMap,tamedMethods={captureStackTrace(error,optFn=tamedMethods.captureStackTrace){"function"!=typeof originalCaptureStackTrace?reflectSet(error,"stack",""):apply(originalCaptureStackTrace,OriginalError,[error,optFn])},getStackString(error){weakmapHas(ssts,error)||error.stack;const sst=weakmapGet(ssts,error);return sst?stackStringFromSST(0,sst):""},prepareStackTrace(error,sst){if(weakmapSet(ssts,error,sst),"unsafe"===errorTaming){return`${error}${stackStringFromSST(0,sst)}`}return""}},defaultPrepareFn=tamedMethods.prepareStackTrace;OriginalError.prepareStackTrace=defaultPrepareFn;const systemPrepareFnSet=new WeakSet([defaultPrepareFn]),systemPrepareFnFor=inputPrepareFn=>{if(weaksetHas(systemPrepareFnSet,inputPrepareFn))return inputPrepareFn;const systemMethods={prepareStackTrace:(error,sst)=>(weakmapSet(ssts,error,sst),inputPrepareFn(error,(sst=>arrayMap(sst,safeV8CallSiteFacet))(sst)))};return weaksetAdd(systemPrepareFnSet,systemMethods.prepareStackTrace),systemMethods.prepareStackTrace};return defineProperties(InitialError,{captureStackTrace:{value:tamedMethods.captureStackTrace,writable:!0,enumerable:!1,configurable:!0},prepareStackTrace:{get:()=>OriginalError.prepareStackTrace,set(inputPrepareStackTraceFn){if("function"==typeof inputPrepareStackTraceFn){const systemPrepareFn=systemPrepareFnFor(inputPrepareStackTraceFn);OriginalError.prepareStackTrace=systemPrepareFn}else OriginalError.prepareStackTrace=defaultPrepareFn},enumerable:!1,configurable:!0}}),tamedMethods.getStackString})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_ERROR,TypeError,apply,construct,defineProperties,setPrototypeOf,getOwnPropertyDescriptor,NativeErrors,tameV8ErrorConstructor;$h‍_imports([["../commons.js",[["FERAL_ERROR",[$h‍_a=>FERAL_ERROR=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["apply",[$h‍_a=>apply=$h‍_a]],["construct",[$h‍_a=>construct=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["setPrototypeOf",[$h‍_a=>setPrototypeOf=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]]]],["../whitelist.js",[["NativeErrors",[$h‍_a=>NativeErrors=$h‍_a]]]],["./tame-v8-error-constructor.js",[["tameV8ErrorConstructor",[$h‍_a=>tameV8ErrorConstructor=$h‍_a]]]]]);const stackDesc=getOwnPropertyDescriptor(FERAL_ERROR.prototype,"stack"),stackGetter=stackDesc&&stackDesc.get,tamedMethods={getStackString:error=>"function"==typeof stackGetter?apply(stackGetter,error,[]):"stack"in error?""+error.stack:""};$h‍_once.default((function(errorTaming="safe",stackFiltering="concise"){if("safe"!==errorTaming&&"unsafe"!==errorTaming)throw new TypeError("unrecognized errorTaming "+errorTaming);if("concise"!==stackFiltering&&"verbose"!==stackFiltering)throw new TypeError("unrecognized stackFiltering "+stackFiltering);const ErrorPrototype=FERAL_ERROR.prototype,platform="function"==typeof FERAL_ERROR.captureStackTrace?"v8":"unknown",{captureStackTrace:originalCaptureStackTrace}=FERAL_ERROR,makeErrorConstructor=(_={})=>{const ResultError=function(...rest){let error;return error=void 0===new.target?apply(FERAL_ERROR,this,rest):construct(FERAL_ERROR,rest,new.target),"v8"===platform&&apply(originalCaptureStackTrace,FERAL_ERROR,[error,ResultError]),error};return defineProperties(ResultError,{length:{value:1},prototype:{value:ErrorPrototype,writable:!1,enumerable:!1,configurable:!1}}),ResultError},InitialError=makeErrorConstructor({powers:"original"}),SharedError=makeErrorConstructor({powers:"none"});defineProperties(ErrorPrototype,{constructor:{value:SharedError}});for(const NativeError of NativeErrors)setPrototypeOf(NativeError,SharedError);defineProperties(InitialError,{stackTraceLimit:{get(){if("number"==typeof FERAL_ERROR.stackTraceLimit)return FERAL_ERROR.stackTraceLimit},set(newLimit){"number"==typeof newLimit&&("number"!=typeof FERAL_ERROR.stackTraceLimit||(FERAL_ERROR.stackTraceLimit=newLimit))},enumerable:!1,configurable:!0}}),defineProperties(SharedError,{stackTraceLimit:{get(){},set(_newLimit){},enumerable:!1,configurable:!0}});let initialGetStackString=tamedMethods.getStackString;return"v8"===platform&&(initialGetStackString=tameV8ErrorConstructor(FERAL_ERROR,InitialError,errorTaming,stackFiltering)),{"%InitialGetStackString%":initialGetStackString,"%InitialError%":InitialError,"%SharedError%":SharedError}}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_FUNCTION,Float32Array,Map,Set,String,getOwnPropertyDescriptor,getPrototypeOf,iterateArray,iterateMap,iterateSet,iterateString,matchAllRegExp,matchAllSymbol,regexpPrototype,InertCompartment;function getConstructorOf(obj){return getPrototypeOf(obj).constructor}$h‍_imports([["./commons.js",[["FERAL_FUNCTION",[$h‍_a=>FERAL_FUNCTION=$h‍_a]],["Float32Array",[$h‍_a=>Float32Array=$h‍_a]],["Map",[$h‍_a=>Map=$h‍_a]],["Set",[$h‍_a=>Set=$h‍_a]],["String",[$h‍_a=>String=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["getPrototypeOf",[$h‍_a=>getPrototypeOf=$h‍_a]],["iterateArray",[$h‍_a=>iterateArray=$h‍_a]],["iterateMap",[$h‍_a=>iterateMap=$h‍_a]],["iterateSet",[$h‍_a=>iterateSet=$h‍_a]],["iterateString",[$h‍_a=>iterateString=$h‍_a]],["matchAllRegExp",[$h‍_a=>matchAllRegExp=$h‍_a]],["matchAllSymbol",[$h‍_a=>matchAllSymbol=$h‍_a]],["regexpPrototype",[$h‍_a=>regexpPrototype=$h‍_a]]]],["./compartment-shim.js",[["InertCompartment",[$h‍_a=>InertCompartment=$h‍_a]]]]]);$h‍_once.getAnonymousIntrinsics(()=>{const InertFunction=FERAL_FUNCTION.prototype.constructor,ThrowTypeError=getOwnPropertyDescriptor(function(){return arguments}(),"callee").get,StringIteratorObject=iterateString(new String),StringIteratorPrototype=getPrototypeOf(StringIteratorObject),RegExpStringIterator=regexpPrototype[matchAllSymbol]&&matchAllRegExp(/./),RegExpStringIteratorPrototype=RegExpStringIterator&&getPrototypeOf(RegExpStringIterator),ArrayIteratorObject=iterateArray([]),ArrayIteratorPrototype=getPrototypeOf(ArrayIteratorObject),TypedArray=getPrototypeOf(Float32Array),MapIteratorObject=iterateMap(new Map),MapIteratorPrototype=getPrototypeOf(MapIteratorObject),SetIteratorObject=iterateSet(new Set),SetIteratorPrototype=getPrototypeOf(SetIteratorObject),IteratorPrototype=getPrototypeOf(ArrayIteratorPrototype);const GeneratorFunction=getConstructorOf((function*(){})),Generator=GeneratorFunction.prototype;const AsyncGeneratorFunction=getConstructorOf((async function*(){})),AsyncGenerator=AsyncGeneratorFunction.prototype,AsyncGeneratorPrototype=AsyncGenerator.prototype,AsyncIteratorPrototype=getPrototypeOf(AsyncGeneratorPrototype);return{"%InertFunction%":InertFunction,"%ArrayIteratorPrototype%":ArrayIteratorPrototype,"%InertAsyncFunction%":getConstructorOf((async function(){})),"%AsyncGenerator%":AsyncGenerator,"%InertAsyncGeneratorFunction%":AsyncGeneratorFunction,"%AsyncGeneratorPrototype%":AsyncGeneratorPrototype,"%AsyncIteratorPrototype%":AsyncIteratorPrototype,"%Generator%":Generator,"%InertGeneratorFunction%":GeneratorFunction,"%IteratorPrototype%":IteratorPrototype,"%MapIteratorPrototype%":MapIteratorPrototype,"%RegExpStringIteratorPrototype%":RegExpStringIteratorPrototype,"%SetIteratorPrototype%":SetIteratorPrototype,"%StringIteratorPrototype%":StringIteratorPrototype,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%InertCompartment%":InertCompartment}})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let Set,String,TypeError,WeakMap,WeakSet,arrayForEach,freeze,getOwnPropertyDescriptors,getPrototypeOf,isObject,objectHasOwnProperty,ownKeys,setAdd,setForEach,setHas,weakmapGet,weakmapSet,weaksetAdd,weaksetHas;$h‍_imports([["./commons.js",[["Set",[$h‍_a=>Set=$h‍_a]],["String",[$h‍_a=>String=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["WeakMap",[$h‍_a=>WeakMap=$h‍_a]],["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["arrayForEach",[$h‍_a=>arrayForEach=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["getOwnPropertyDescriptors",[$h‍_a=>getOwnPropertyDescriptors=$h‍_a]],["getPrototypeOf",[$h‍_a=>getPrototypeOf=$h‍_a]],["isObject",[$h‍_a=>isObject=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["ownKeys",[$h‍_a=>ownKeys=$h‍_a]],["setAdd",[$h‍_a=>setAdd=$h‍_a]],["setForEach",[$h‍_a=>setForEach=$h‍_a]],["setHas",[$h‍_a=>setHas=$h‍_a]],["weakmapGet",[$h‍_a=>weakmapGet=$h‍_a]],["weakmapSet",[$h‍_a=>weakmapSet=$h‍_a]],["weaksetAdd",[$h‍_a=>weaksetAdd=$h‍_a]],["weaksetHas",[$h‍_a=>weaksetHas=$h‍_a]]]]]);$h‍_once.makeHardener(()=>{const hardened=new WeakSet,{harden:harden}={harden(root){const toFreeze=new Set,paths=new WeakMap;function enqueue(val,path){if(!isObject(val))return;const type=typeof val;if("object"!==type&&"function"!==type)throw new TypeError("Unexpected typeof: "+type);weaksetHas(hardened,val)||setHas(toFreeze,val)||(setAdd(toFreeze,val),weakmapSet(paths,val,path))}function freezeAndTraverse(obj){freeze(obj);const path=weakmapGet(paths,obj)||"unknown",descs=getOwnPropertyDescriptors(obj);enqueue(getPrototypeOf(obj),path+".__proto__"),arrayForEach(ownKeys(descs),name=>{const pathname=`${path}.${String(name)}`,desc=descs[name];objectHasOwnProperty(desc,"value")?enqueue(desc.value,""+pathname):(enqueue(desc.get,pathname+"(get)"),enqueue(desc.set,pathname+"(set)"))})}function markHardened(value){weaksetAdd(hardened,value)}return enqueue(root),setForEach(toFreeze,freezeAndTraverse),setForEach(toFreeze,markHardened),root}};return harden})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let Date,TypeError,apply,construct,defineProperties;$h‍_imports([["./commons.js",[["Date",[$h‍_a=>Date=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["apply",[$h‍_a=>apply=$h‍_a]],["construct",[$h‍_a=>construct=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]]]]]),$h‍_once.default((function(dateTaming="safe"){if("safe"!==dateTaming&&"unsafe"!==dateTaming)throw new TypeError("unrecognized dateTaming "+dateTaming);const OriginalDate=Date,DatePrototype=OriginalDate.prototype,tamedMethods={now:()=>NaN},makeDateConstructor=({powers:powers="none"}={})=>{let ResultDate;return ResultDate="original"===powers?function(...rest){return void 0===new.target?apply(OriginalDate,void 0,rest):construct(OriginalDate,rest,new.target)}:function(...rest){return void 0===new.target?"Invalid Date":(0===rest.length&&(rest=[NaN]),construct(OriginalDate,rest,new.target))},defineProperties(ResultDate,{length:{value:7},prototype:{value:DatePrototype,writable:!1,enumerable:!1,configurable:!1},parse:{value:Date.parse,writable:!0,enumerable:!1,configurable:!0},UTC:{value:Date.UTC,writable:!0,enumerable:!1,configurable:!0}}),ResultDate},InitialDate=makeDateConstructor({powers:"original"}),SharedDate=makeDateConstructor({powers:"none"});return defineProperties(InitialDate,{now:{value:Date.now,writable:!0,enumerable:!1,configurable:!0}}),defineProperties(SharedDate,{now:{value:tamedMethods.now,writable:!0,enumerable:!1,configurable:!0}}),defineProperties(DatePrototype,{constructor:{value:SharedDate}}),{"%InitialDate%":InitialDate,"%SharedDate%":SharedDate}}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let TypeError,globalThis,getOwnPropertyDescriptor,defineProperty;function tameDomains(domainTaming="safe"){if("safe"!==domainTaming&&"unsafe"!==domainTaming)throw new TypeError("unrecognized domainTaming "+domainTaming);if("unsafe"!==domainTaming&&"object"==typeof globalThis.process&&null!==globalThis.process){const domainDescriptor=getOwnPropertyDescriptor(globalThis.process,"domain");if(void 0!==domainDescriptor&&void 0!==domainDescriptor.get)throw new TypeError("SES failed to lockdown, Node.js domains have been initialized (SES_NO_DOMAINS)");defineProperty(globalThis.process,"domain",{value:null,configurable:!1,writable:!1,enumerable:!1})}}$h‍_imports([["./commons.js",[["TypeError",[$h‍_a=>TypeError=$h‍_a]],["globalThis",[$h‍_a=>globalThis=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]]]]]),Object.defineProperty(tameDomains,"name",{value:"tameDomains"}),$h‍_once.tameDomains(tameDomains)},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_FUNCTION,SyntaxError,TypeError,defineProperties,getPrototypeOf,setPrototypeOf;$h‍_imports([["./commons.js",[["FERAL_FUNCTION",[$h‍_a=>FERAL_FUNCTION=$h‍_a]],["SyntaxError",[$h‍_a=>SyntaxError=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["getPrototypeOf",[$h‍_a=>getPrototypeOf=$h‍_a]],["setPrototypeOf",[$h‍_a=>setPrototypeOf=$h‍_a]]]]]),$h‍_once.default((function(){try{FERAL_FUNCTION.prototype.constructor("return 1")}catch(ignore){return{}}const newIntrinsics={};function repairFunction(name,intrinsicName,declaration){let FunctionInstance;try{FunctionInstance=(0,eval)(declaration)}catch(e){if(e instanceof SyntaxError)return;throw e}const FunctionPrototype=getPrototypeOf(FunctionInstance),InertConstructor=function(){throw new TypeError("Function.prototype.constructor is not a valid constructor.")};defineProperties(InertConstructor,{prototype:{value:FunctionPrototype},name:{value:name,writable:!1,enumerable:!1,configurable:!0}}),defineProperties(FunctionPrototype,{constructor:{value:InertConstructor}}),InertConstructor!==FERAL_FUNCTION.prototype.constructor&&setPrototypeOf(InertConstructor,FERAL_FUNCTION.prototype.constructor),newIntrinsics[intrinsicName]=InertConstructor}return repairFunction("Function","%InertFunction%","(function(){})"),repairFunction("GeneratorFunction","%InertGeneratorFunction%","(function*(){})"),repairFunction("AsyncFunction","%InertAsyncFunction%","(async function(){})"),repairFunction("AsyncGeneratorFunction","%InertAsyncGeneratorFunction%","(async function*(){})"),newIntrinsics}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let WeakSet,defineProperty,freeze,functionPrototype,functionToString,stringEndsWith,weaksetAdd,weaksetHas;$h‍_imports([["./commons.js",[["WeakSet",[$h‍_a=>WeakSet=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["freeze",[$h‍_a=>freeze=$h‍_a]],["functionPrototype",[$h‍_a=>functionPrototype=$h‍_a]],["functionToString",[$h‍_a=>functionToString=$h‍_a]],["stringEndsWith",[$h‍_a=>stringEndsWith=$h‍_a]],["weaksetAdd",[$h‍_a=>weaksetAdd=$h‍_a]],["weaksetHas",[$h‍_a=>weaksetHas=$h‍_a]]]]]);let markVirtualizedNativeFunction;$h‍_once.tameFunctionToString(()=>{if(void 0===markVirtualizedNativeFunction){const virtualizedNativeFunctions=new WeakSet;defineProperty(functionPrototype,"toString",{value:{toString(){const str=functionToString(this,[]);return stringEndsWith(str,") { [native code] }")||!weaksetHas(virtualizedNativeFunctions,this)?str:`function ${this.name}() { [native code] }`}}.toString}),markVirtualizedNativeFunction=freeze(func=>weaksetAdd(virtualizedNativeFunctions,func))}return markVirtualizedNativeFunction})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let String,TypeError,defineProperty,getOwnPropertyNames,isObject,regexpExec,assert;$h‍_imports([["./commons.js",[["String",[$h‍_a=>String=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["defineProperty",[$h‍_a=>defineProperty=$h‍_a]],["getOwnPropertyNames",[$h‍_a=>getOwnPropertyNames=$h‍_a]],["isObject",[$h‍_a=>isObject=$h‍_a]],["regexpExec",[$h‍_a=>regexpExec=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]);const{details:d,quote:q}=assert,localePattern=/^(\w*[a-z])Locale([A-Z]\w*)$/,nonLocaleCompare={localeCompare(that){if(null==this)throw new TypeError('Cannot localeCompare with null or undefined "this" value');const s=""+this;return s<(that=""+that)?-1:s>that?1:(assert(s===that,d`expected ${q(s)} and ${q(that)} to compare`),0)}}.localeCompare;$h‍_once.default((function(intrinsics,localeTaming="safe"){if("safe"!==localeTaming&&"unsafe"!==localeTaming)throw new TypeError("unrecognized localeTaming "+localeTaming);if("unsafe"!==localeTaming){defineProperty(String.prototype,"localeCompare",{value:nonLocaleCompare});for(const intrinsicName of getOwnPropertyNames(intrinsics)){const intrinsic=intrinsics[intrinsicName];if(isObject(intrinsic))for(const methodName of getOwnPropertyNames(intrinsic)){const match=regexpExec(localePattern,methodName);if(match){assert("function"==typeof intrinsic[methodName],d`expected ${q(methodName)} to be a function`);const nonLocaleMethodName=`${match[1]}${match[2]}`,method=intrinsic[nonLocaleMethodName];assert("function"==typeof method,d`function ${q(nonLocaleMethodName)} not found`),defineProperty(intrinsic,methodName,{value:method})}}}}}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let Math,TypeError,create,getOwnPropertyDescriptors,objectPrototype;$h‍_imports([["./commons.js",[["Math",[$h‍_a=>Math=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["create",[$h‍_a=>create=$h‍_a]],["getOwnPropertyDescriptors",[$h‍_a=>getOwnPropertyDescriptors=$h‍_a]],["objectPrototype",[$h‍_a=>objectPrototype=$h‍_a]]]]]),$h‍_once.default((function(mathTaming="safe"){if("safe"!==mathTaming&&"unsafe"!==mathTaming)throw new TypeError("unrecognized mathTaming "+mathTaming);const originalMath=Math,initialMath=originalMath,{random:_,...otherDescriptors}=getOwnPropertyDescriptors(originalMath);return{"%InitialMath%":initialMath,"%SharedMath%":create(objectPrototype,otherDescriptors)}}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let FERAL_REG_EXP,TypeError,construct,defineProperties,getOwnPropertyDescriptor,speciesSymbol;$h‍_imports([["./commons.js",[["FERAL_REG_EXP",[$h‍_a=>FERAL_REG_EXP=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["construct",[$h‍_a=>construct=$h‍_a]],["defineProperties",[$h‍_a=>defineProperties=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["speciesSymbol",[$h‍_a=>speciesSymbol=$h‍_a]]]]]),$h‍_once.default((function(regExpTaming="safe"){if("safe"!==regExpTaming&&"unsafe"!==regExpTaming)throw new TypeError("unrecognized regExpTaming "+regExpTaming);const RegExpPrototype=FERAL_REG_EXP.prototype,makeRegExpConstructor=(_={})=>{const ResultRegExp=function(...rest){return void 0===new.target?FERAL_REG_EXP(...rest):construct(FERAL_REG_EXP,rest,new.target)};return defineProperties(ResultRegExp,{length:{value:2},prototype:{value:RegExpPrototype,writable:!1,enumerable:!1,configurable:!1},[speciesSymbol]:getOwnPropertyDescriptor(FERAL_REG_EXP,speciesSymbol)}),ResultRegExp},InitialRegExp=makeRegExpConstructor(),SharedRegExp=makeRegExpConstructor();return"unsafe"!==regExpTaming&&delete RegExpPrototype.compile,defineProperties(RegExpPrototype,{constructor:{value:SharedRegExp}}),{"%InitialRegExp%":InitialRegExp,"%SharedRegExp%":SharedRegExp}}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let whitelist,FunctionInstance,isAccessorPermit,String,TypeError,arrayIncludes,getOwnPropertyDescriptor,getPrototypeOf,isObject,objectHasOwnProperty,ownKeys,stringSlice;function asStringPropertyName(path,prop){if("string"==typeof prop)return prop;if("symbol"==typeof prop)return"@@"+stringSlice(String(prop),14,-1);throw new TypeError(`Unexpected property name type ${path} ${prop}`)}$h‍_imports([["./whitelist.js",[["whitelist",[$h‍_a=>whitelist=$h‍_a]],["FunctionInstance",[$h‍_a=>FunctionInstance=$h‍_a]],["isAccessorPermit",[$h‍_a=>isAccessorPermit=$h‍_a]]]],["./commons.js",[["String",[$h‍_a=>String=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["arrayIncludes",[$h‍_a=>arrayIncludes=$h‍_a]],["getOwnPropertyDescriptor",[$h‍_a=>getOwnPropertyDescriptor=$h‍_a]],["getPrototypeOf",[$h‍_a=>getPrototypeOf=$h‍_a]],["isObject",[$h‍_a=>isObject=$h‍_a]],["objectHasOwnProperty",[$h‍_a=>objectHasOwnProperty=$h‍_a]],["ownKeys",[$h‍_a=>ownKeys=$h‍_a]],["stringSlice",[$h‍_a=>stringSlice=$h‍_a]]]]]),$h‍_once.default((function(intrinsics,markVirtualizedNativeFunction){const primitives=["undefined","boolean","number","string","symbol"];function isAllowedPropertyValue(path,value,prop,permit){if("object"==typeof permit)return visitProperties(path,value,permit),!0;if(!1===permit)return!1;if("string"==typeof permit)if("prototype"===prop||"constructor"===prop){if(objectHasOwnProperty(intrinsics,permit)){if(value!==intrinsics[permit])throw new TypeError("Does not match whitelist "+path);return!0}}else if(arrayIncludes(primitives,permit)){if(typeof value!==permit)throw new TypeError(`At ${path} expected ${permit} not ${typeof value}`);return!0}throw new TypeError(`Unexpected whitelist permit ${permit} at ${path}`)}function isAllowedProperty(path,obj,prop,permit){const desc=getOwnPropertyDescriptor(obj,prop);if(objectHasOwnProperty(desc,"value")){if(isAccessorPermit(permit))throw new TypeError("Accessor expected at "+path);return isAllowedPropertyValue(path,desc.value,prop,permit)}if(!isAccessorPermit(permit))throw new TypeError("Accessor not expected at "+path);return isAllowedPropertyValue(path+"<get>",desc.get,prop,permit.get)&&isAllowedPropertyValue(path+"<set>",desc.set,prop,permit.set)}function getSubPermit(obj,permit,prop){const permitProp="__proto__"===prop?"--proto--":prop;return objectHasOwnProperty(permit,permitProp)?permit[permitProp]:"function"==typeof obj&&(markVirtualizedNativeFunction(obj),objectHasOwnProperty(FunctionInstance,permitProp))?FunctionInstance[permitProp]:void 0}function visitProperties(path,obj,permit){if(void 0===obj)return;!function(path,obj,protoName){if(!isObject(obj))throw new TypeError(`Object expected: ${path}, ${obj}, ${protoName}`);const proto=getPrototypeOf(obj);if(null!==proto||null!==protoName){if(void 0!==protoName&&"string"!=typeof protoName)throw new TypeError(`Malformed whitelist permit ${path}.__proto__`);if(proto!==intrinsics[protoName||"%ObjectPrototype%"])throw new TypeError(`Unexpected intrinsic ${path}.__proto__ at ${protoName}`)}}(path,obj,permit["[[Proto]]"]);for(const prop of ownKeys(obj)){const propString=asStringPropertyName(path,prop),subPath=`${path}.${propString}`,subPermit=getSubPermit(obj,permit,propString);if(!subPermit||!isAllowedProperty(subPath,obj,prop,subPermit)){!1!==subPermit&&console.warn("Removing "+subPath);try{delete obj[prop]}catch(err){throw prop in obj?console.error("failed to delete "+subPath,err):console.error(`deleting ${subPath} threw`,err),err}}}}visitProperties("intrinsics",intrinsics,whitelist)}))},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let TypeError,arrayFilter,arrayMap,globalThis,is,ownKeys,stringSplit,enJoin,makeHardener,makeIntrinsicsCollector,whitelistIntrinsics,tameFunctionConstructors,tameDateConstructor,tameMathObject,tameRegExpConstructor,enablePropertyOverrides,tameLocaleMethods,setGlobalObjectConstantProperties,setGlobalObjectMutableProperties,makeSafeEvaluator,initialGlobalPropertyNames,tameFunctionToString,tameDomains,tameConsole,tameErrorConstructor,assert,makeAssert,makeEnvironmentCaptor,getAnonymousIntrinsics,makeCompartmentConstructor;$h‍_imports([["./commons.js",[["TypeError",[$h‍_a=>TypeError=$h‍_a]],["arrayFilter",[$h‍_a=>arrayFilter=$h‍_a]],["arrayMap",[$h‍_a=>arrayMap=$h‍_a]],["globalThis",[$h‍_a=>globalThis=$h‍_a]],["is",[$h‍_a=>is=$h‍_a]],["ownKeys",[$h‍_a=>ownKeys=$h‍_a]],["stringSplit",[$h‍_a=>stringSplit=$h‍_a]]]],["./error/stringify-utils.js",[["enJoin",[$h‍_a=>enJoin=$h‍_a]]]],["./make-hardener.js",[["makeHardener",[$h‍_a=>makeHardener=$h‍_a]]]],["./intrinsics.js",[["makeIntrinsicsCollector",[$h‍_a=>makeIntrinsicsCollector=$h‍_a]]]],["./whitelist-intrinsics.js",[["default",[$h‍_a=>whitelistIntrinsics=$h‍_a]]]],["./tame-function-constructors.js",[["default",[$h‍_a=>tameFunctionConstructors=$h‍_a]]]],["./tame-date-constructor.js",[["default",[$h‍_a=>tameDateConstructor=$h‍_a]]]],["./tame-math-object.js",[["default",[$h‍_a=>tameMathObject=$h‍_a]]]],["./tame-regexp-constructor.js",[["default",[$h‍_a=>tameRegExpConstructor=$h‍_a]]]],["./enable-property-overrides.js",[["default",[$h‍_a=>enablePropertyOverrides=$h‍_a]]]],["./tame-locale-methods.js",[["default",[$h‍_a=>tameLocaleMethods=$h‍_a]]]],["./global-object.js",[["setGlobalObjectConstantProperties",[$h‍_a=>setGlobalObjectConstantProperties=$h‍_a]],["setGlobalObjectMutableProperties",[$h‍_a=>setGlobalObjectMutableProperties=$h‍_a]]]],["./make-safe-evaluator.js",[["makeSafeEvaluator",[$h‍_a=>makeSafeEvaluator=$h‍_a]]]],["./whitelist.js",[["initialGlobalPropertyNames",[$h‍_a=>initialGlobalPropertyNames=$h‍_a]]]],["./tame-function-tostring.js",[["tameFunctionToString",[$h‍_a=>tameFunctionToString=$h‍_a]]]],["./tame-domains.js",[["tameDomains",[$h‍_a=>tameDomains=$h‍_a]]]],["./error/tame-console.js",[["tameConsole",[$h‍_a=>tameConsole=$h‍_a]]]],["./error/tame-error-constructor.js",[["default",[$h‍_a=>tameErrorConstructor=$h‍_a]]]],["./error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]],["makeAssert",[$h‍_a=>makeAssert=$h‍_a]]]],["./environment-options.js",[["makeEnvironmentCaptor",[$h‍_a=>makeEnvironmentCaptor=$h‍_a]]]],["./get-anonymous-intrinsics.js",[["getAnonymousIntrinsics",[$h‍_a=>getAnonymousIntrinsics=$h‍_a]]]],["./compartment-shim.js",[["makeCompartmentConstructor",[$h‍_a=>makeCompartmentConstructor=$h‍_a]]]]]);const{details:d,quote:q}=assert;let priorLockdown;const harden=makeHardener(),repairIntrinsics=(options={})=>{const{getEnvironmentOption:getenv,getCapturedEnvironmentOptionNames:getCapturedEnvironmentOptionNames}=makeEnvironmentCaptor(globalThis),{errorTaming:errorTaming=getenv("LOCKDOWN_ERROR_TAMING","safe"),errorTrapping:errorTrapping=getenv("LOCKDOWN_ERROR_TRAPPING","platform"),regExpTaming:regExpTaming=getenv("LOCKDOWN_REGEXP_TAMING","safe"),localeTaming:localeTaming=getenv("LOCKDOWN_LOCALE_TAMING","safe"),consoleTaming:consoleTaming=getenv("LOCKDOWN_CONSOLE_TAMING","safe"),overrideTaming:overrideTaming=getenv("LOCKDOWN_OVERRIDE_TAMING","moderate"),stackFiltering:stackFiltering=getenv("LOCKDOWN_STACK_FILTERING","concise"),domainTaming:domainTaming=getenv("LOCKDOWN_DOMAIN_TAMING","safe"),overrideDebug:overrideDebug=arrayFilter(stringSplit(getenv("LOCKDOWN_OVERRIDE_DEBUG",""),","),debugName=>""!==debugName),__allowUnsafeMonkeyPatching__:__allowUnsafeMonkeyPatching__=getenv("__LOCKDOWN_ALLOW_UNSAFE_MONKEY_PATCHING__","safe"),dateTaming:dateTaming="safe",mathTaming:mathTaming="safe",...extraOptions}=options,capturedEnvironmentOptionNames=getCapturedEnvironmentOptionNames();capturedEnvironmentOptionNames.length>0&&console.warn("SES Lockdown using options from environment variables "+enJoin(arrayMap(capturedEnvironmentOptionNames,q),"and"));const extraOptionsNames=ownKeys(extraOptions);assert(0===extraOptionsNames.length,d`lockdown(): non supported option ${q(extraOptionsNames)}`),assert(void 0===priorLockdown,`Already locked down at ${priorLockdown} (SES_ALREADY_LOCKED_DOWN)`,TypeError),priorLockdown=new TypeError("Prior lockdown (SES_ALREADY_LOCKED_DOWN)"),priorLockdown.stack;if(globalThis.Function.prototype.constructor!==globalThis.Function&&"function"==typeof globalThis.harden&&"function"==typeof globalThis.lockdown&&globalThis.Date.prototype.constructor!==globalThis.Date&&"function"==typeof globalThis.Date.now&&is(globalThis.Date.prototype.constructor.now(),NaN))throw new TypeError("Already locked down but not by this SES instance (SES_MULTIPLE_INSTANCES)");tameDomains(domainTaming);const{addIntrinsics:addIntrinsics,completePrototypes:completePrototypes,finalIntrinsics:finalIntrinsics}=makeIntrinsicsCollector();addIntrinsics({harden:harden}),addIntrinsics(tameFunctionConstructors()),addIntrinsics(tameDateConstructor(dateTaming)),addIntrinsics(tameErrorConstructor(errorTaming,stackFiltering)),addIntrinsics(tameMathObject(mathTaming)),addIntrinsics(tameRegExpConstructor(regExpTaming)),addIntrinsics(getAnonymousIntrinsics()),completePrototypes();const intrinsics=finalIntrinsics();let optGetStackString;"unsafe"!==errorTaming&&(optGetStackString=intrinsics["%InitialGetStackString%"]);const consoleRecord=tameConsole(consoleTaming,errorTrapping,optGetStackString);globalThis.console=consoleRecord.console,"unsafe"===errorTaming&&globalThis.assert===assert&&(globalThis.assert=makeAssert(void 0,!0)),tameLocaleMethods(intrinsics,localeTaming);const markVirtualizedNativeFunction=tameFunctionToString();whitelistIntrinsics(intrinsics,markVirtualizedNativeFunction),setGlobalObjectConstantProperties(globalThis);const{safeEvaluate:safeEvaluate}=makeSafeEvaluator({globalObject:globalThis});return setGlobalObjectMutableProperties(globalThis,{intrinsics:intrinsics,newGlobalPropertyNames:initialGlobalPropertyNames,makeCompartmentConstructor:makeCompartmentConstructor,safeEvaluate:safeEvaluate,markVirtualizedNativeFunction:markVirtualizedNativeFunction}),function(){return enablePropertyOverrides(intrinsics,overrideTaming,overrideDebug),"unsafe"!==__allowUnsafeMonkeyPatching__&&harden(intrinsics),globalThis.harden=harden,!0}};$h‍_once.repairIntrinsics(repairIntrinsics);$h‍_once.lockdown((options={})=>{repairIntrinsics(options)()})},({imports:$h‍_imports,liveVar:$h‍_live,onceVar:$h‍_once})=>{let globalThis,TypeError,assign,tameFunctionToString,getGlobalIntrinsics,lockdown,makeCompartmentConstructor,assert;if($h‍_imports([["./src/commons.js",[["globalThis",[$h‍_a=>globalThis=$h‍_a]],["TypeError",[$h‍_a=>TypeError=$h‍_a]],["assign",[$h‍_a=>assign=$h‍_a]]]],["./src/tame-function-tostring.js",[["tameFunctionToString",[$h‍_a=>tameFunctionToString=$h‍_a]]]],["./src/intrinsics.js",[["getGlobalIntrinsics",[$h‍_a=>getGlobalIntrinsics=$h‍_a]]]],["./src/lockdown-shim.js",[["lockdown",[$h‍_a=>lockdown=$h‍_a]]]],["./src/compartment-shim.js",[["makeCompartmentConstructor",[$h‍_a=>makeCompartmentConstructor=$h‍_a]]]],["./src/error/assert.js",[["assert",[$h‍_a=>assert=$h‍_a]]]]]),function(){return this}())throw new TypeError("SES failed to initialize, sloppy mode (SES_NO_SLOPPY)");const markVirtualizedNativeFunction=tameFunctionToString(),Compartment=makeCompartmentConstructor(makeCompartmentConstructor,getGlobalIntrinsics(globalThis),markVirtualizedNativeFunction);assign(globalThis,{lockdown:lockdown,Compartment:Compartment,assert:assert})}];function cell(name,value){const observers=[];return{get:function(){return value},set:function(newValue){value=newValue;for(const observe of observers)observe(value)},observe:function(observe){observers.push(observe),observe(value)},enumerable:!0}}const cells=[{globalThis:cell(),Array:cell(),Date:cell(),Float32Array:cell(),JSON:cell(),Map:cell(),Math:cell(),Object:cell(),Promise:cell(),Proxy:cell(),Reflect:cell(),FERAL_REG_EXP:cell(),Set:cell(),String:cell(),WeakMap:cell(),WeakSet:cell(),FERAL_ERROR:cell(),RangeError:cell(),ReferenceError:cell(),SyntaxError:cell(),TypeError:cell(),assign:cell(),create:cell(),defineProperties:cell(),entries:cell(),freeze:cell(),getOwnPropertyDescriptor:cell(),getOwnPropertyDescriptors:cell(),getOwnPropertyNames:cell(),getPrototypeOf:cell(),is:cell(),isExtensible:cell(),keys:cell(),objectPrototype:cell(),seal:cell(),setPrototypeOf:cell(),values:cell(),speciesSymbol:cell(),toStringTagSymbol:cell(),iteratorSymbol:cell(),matchAllSymbol:cell(),stringifyJson:cell(),fromEntries:cell(),defineProperty:cell(),apply:cell(),construct:cell(),reflectGet:cell(),reflectGetOwnPropertyDescriptor:cell(),reflectHas:cell(),reflectIsExtensible:cell(),ownKeys:cell(),reflectPreventExtensions:cell(),reflectSet:cell(),isArray:cell(),arrayPrototype:cell(),mapPrototype:cell(),proxyRevocable:cell(),regexpPrototype:cell(),setPrototype:cell(),stringPrototype:cell(),weakmapPrototype:cell(),weaksetPrototype:cell(),functionPrototype:cell(),promisePrototype:cell(),uncurryThis:cell(),objectHasOwnProperty:cell(),arrayFilter:cell(),arrayForEach:cell(),arrayIncludes:cell(),arrayJoin:cell(),arrayMap:cell(),arrayPop:cell(),arrayPush:cell(),arraySlice:cell(),arraySome:cell(),arraySort:cell(),iterateArray:cell(),mapSet:cell(),mapGet:cell(),mapHas:cell(),iterateMap:cell(),setAdd:cell(),setForEach:cell(),setHas:cell(),iterateSet:cell(),regexpTest:cell(),regexpExec:cell(),matchAllRegExp:cell(),stringEndsWith:cell(),stringIncludes:cell(),stringIndexOf:cell(),stringMatch:cell(),stringReplace:cell(),stringSearch:cell(),stringSlice:cell(),stringSplit:cell(),stringStartsWith:cell(),iterateString:cell(),weakmapDelete:cell(),weakmapGet:cell(),weakmapHas:cell(),weakmapSet:cell(),weaksetAdd:cell(),weaksetGet:cell(),weaksetHas:cell(),functionToString:cell(),promiseAll:cell(),promiseCatch:cell(),promiseThen:cell(),getConstructorOf:cell(),immutableObject:cell(),isObject:cell(),isError:cell(),FERAL_EVAL:cell(),FERAL_FUNCTION:cell()},{},{an:cell(),bestEffortStringify:cell(),enJoin:cell()},{},{unredactedDetails:cell(),loggedErrorHandler:cell(),makeAssert:cell(),assert:cell()},{makeEvaluateFactory:cell()},{isValidIdentifierName:cell(),getScopeConstants:cell()},{createScopeHandler:cell()},{getSourceURL:cell()},{rejectHtmlComments:cell(),evadeHtmlCommentTest:cell(),rejectImportExpressions:cell(),evadeImportExpressionTest:cell(),rejectSomeDirectEvalExpressions:cell(),mandatoryTransforms:cell(),applyTransforms:cell()},{makeSafeEvaluator:cell()},{provideCompartmentEvaluator:cell(),compartmentEvaluate:cell()},{makeEvalFunction:cell()},{makeFunctionConstructor:cell()},{constantProperties:cell(),universalPropertyNames:cell(),initialGlobalPropertyNames:cell(),sharedGlobalPropertyNames:cell(),uniqueGlobalPropertyNames:cell(),NativeErrors:cell(),FunctionInstance:cell(),isAccessorPermit:cell(),whitelist:cell()},{setGlobalObjectConstantProperties:cell(),setGlobalObjectMutableProperties:cell()},{makeAlias:cell(),load:cell()},{deferExports:cell(),getDeferredExports:cell()},{makeThirdPartyModuleInstance:cell(),makeModuleInstance:cell()},{link:cell(),instantiate:cell()},{InertCompartment:cell(),CompartmentPrototype:cell(),makeCompartmentConstructor:cell()},{makeIntrinsicsCollector:cell(),getGlobalIntrinsics:cell()},{minEnablements:cell(),moderateEnablements:cell(),severeEnablements:cell()},{default:cell()},{makeEnvironmentCaptor:cell()},{makeLoggingConsoleKit:cell(),makeCausalConsole:cell(),filterConsole:cell(),consoleWhitelist:cell(),BASE_CONSOLE_LEVEL:cell()},{tameConsole:cell()},{filterFileName:cell(),shortenCallSiteString:cell(),tameV8ErrorConstructor:cell()},{default:cell()},{getAnonymousIntrinsics:cell()},{makeHardener:cell()},{default:cell()},{tameDomains:cell()},{default:cell()},{tameFunctionToString:cell()},{default:cell()},{default:cell()},{default:cell()},{default:cell()},{repairIntrinsics:cell(),lockdown:cell()},{}],namespaces=cells.map(cells=>Object.create(null,cells));for(let index=0;index<namespaces.length;index+=1)cells[index]["*"]=cell(0,namespaces[index]);function observeImports(map,importName,importIndex){for(const[name,observers]of map.get(importName)){const cell=cells[importIndex][name];if(void 0===cell)throw new ReferenceError("Cannot import name "+name);for(const observer of observers)cell.observe(observer)}}functors[0]({imports(entries){new Map(entries)},liveVar:{},onceVar:{universalThis:cells[0].globalThis.set,Array:cells[0].Array.set,Date:cells[0].Date.set,Float32Array:cells[0].Float32Array.set,JSON:cells[0].JSON.set,Map:cells[0].Map.set,Math:cells[0].Math.set,Object:cells[0].Object.set,Promise:cells[0].Promise.set,Proxy:cells[0].Proxy.set,Reflect:cells[0].Reflect.set,FERAL_REG_EXP:cells[0].FERAL_REG_EXP.set,Set:cells[0].Set.set,String:cells[0].String.set,WeakMap:cells[0].WeakMap.set,WeakSet:cells[0].WeakSet.set,FERAL_ERROR:cells[0].FERAL_ERROR.set,RangeError:cells[0].RangeError.set,ReferenceError:cells[0].ReferenceError.set,SyntaxError:cells[0].SyntaxError.set,TypeError:cells[0].TypeError.set,assign:cells[0].assign.set,create:cells[0].create.set,defineProperties:cells[0].defineProperties.set,entries:cells[0].entries.set,freeze:cells[0].freeze.set,getOwnPropertyDescriptor:cells[0].getOwnPropertyDescriptor.set,getOwnPropertyDescriptors:cells[0].getOwnPropertyDescriptors.set,getOwnPropertyNames:cells[0].getOwnPropertyNames.set,getPrototypeOf:cells[0].getPrototypeOf.set,is:cells[0].is.set,isExtensible:cells[0].isExtensible.set,keys:cells[0].keys.set,objectPrototype:cells[0].objectPrototype.set,seal:cells[0].seal.set,setPrototypeOf:cells[0].setPrototypeOf.set,values:cells[0].values.set,speciesSymbol:cells[0].speciesSymbol.set,toStringTagSymbol:cells[0].toStringTagSymbol.set,iteratorSymbol:cells[0].iteratorSymbol.set,matchAllSymbol:cells[0].matchAllSymbol.set,stringifyJson:cells[0].stringifyJson.set,fromEntries:cells[0].fromEntries.set,defineProperty:cells[0].defineProperty.set,apply:cells[0].apply.set,construct:cells[0].construct.set,reflectGet:cells[0].reflectGet.set,reflectGetOwnPropertyDescriptor:cells[0].reflectGetOwnPropertyDescriptor.set,reflectHas:cells[0].reflectHas.set,reflectIsExtensible:cells[0].reflectIsExtensible.set,ownKeys:cells[0].ownKeys.set,reflectPreventExtensions:cells[0].reflectPreventExtensions.set,reflectSet:cells[0].reflectSet.set,isArray:cells[0].isArray.set,arrayPrototype:cells[0].arrayPrototype.set,mapPrototype:cells[0].mapPrototype.set,proxyRevocable:cells[0].proxyRevocable.set,regexpPrototype:cells[0].regexpPrototype.set,setPrototype:cells[0].setPrototype.set,stringPrototype:cells[0].stringPrototype.set,weakmapPrototype:cells[0].weakmapPrototype.set,weaksetPrototype:cells[0].weaksetPrototype.set,functionPrototype:cells[0].functionPrototype.set,promisePrototype:cells[0].promisePrototype.set,uncurryThis:cells[0].uncurryThis.set,objectHasOwnProperty:cells[0].objectHasOwnProperty.set,arrayFilter:cells[0].arrayFilter.set,arrayForEach:cells[0].arrayForEach.set,arrayIncludes:cells[0].arrayIncludes.set,arrayJoin:cells[0].arrayJoin.set,arrayMap:cells[0].arrayMap.set,arrayPop:cells[0].arrayPop.set,arrayPush:cells[0].arrayPush.set,arraySlice:cells[0].arraySlice.set,arraySome:cells[0].arraySome.set,arraySort:cells[0].arraySort.set,iterateArray:cells[0].iterateArray.set,mapSet:cells[0].mapSet.set,mapGet:cells[0].mapGet.set,mapHas:cells[0].mapHas.set,iterateMap:cells[0].iterateMap.set,setAdd:cells[0].setAdd.set,setForEach:cells[0].setForEach.set,setHas:cells[0].setHas.set,iterateSet:cells[0].iterateSet.set,regexpTest:cells[0].regexpTest.set,regexpExec:cells[0].regexpExec.set,matchAllRegExp:cells[0].matchAllRegExp.set,stringEndsWith:cells[0].stringEndsWith.set,stringIncludes:cells[0].stringIncludes.set,stringIndexOf:cells[0].stringIndexOf.set,stringMatch:cells[0].stringMatch.set,stringReplace:cells[0].stringReplace.set,stringSearch:cells[0].stringSearch.set,stringSlice:cells[0].stringSlice.set,stringSplit:cells[0].stringSplit.set,stringStartsWith:cells[0].stringStartsWith.set,iterateString:cells[0].iterateString.set,weakmapDelete:cells[0].weakmapDelete.set,weakmapGet:cells[0].weakmapGet.set,weakmapHas:cells[0].weakmapHas.set,weakmapSet:cells[0].weakmapSet.set,weaksetAdd:cells[0].weaksetAdd.set,weaksetGet:cells[0].weaksetGet.set,weaksetHas:cells[0].weaksetHas.set,functionToString:cells[0].functionToString.set,promiseAll:cells[0].promiseAll.set,promiseCatch:cells[0].promiseCatch.set,promiseThen:cells[0].promiseThen.set,getConstructorOf:cells[0].getConstructorOf.set,immutableObject:cells[0].immutableObject.set,isObject:cells[0].isObject.set,isError:cells[0].isError.set,FERAL_EVAL:cells[0].FERAL_EVAL.set,FERAL_FUNCTION:cells[0].FERAL_FUNCTION.set}}),functors[1]({imports(entries){new Map(entries)},liveVar:{},onceVar:{}}),functors[2]({imports(entries){observeImports(new Map(entries),"../commons.js",0)},liveVar:{},onceVar:{an:cells[2].an.set,bestEffortStringify:cells[2].bestEffortStringify.set,enJoin:cells[2].enJoin.set}}),functors[3]({imports(entries){new Map(entries)},liveVar:{},onceVar:{}}),functors[4]({imports(entries){const map=new Map(entries);observeImports(map,"../commons.js",0),observeImports(map,"./internal-types.js",1),observeImports(map,"./stringify-utils.js",2),observeImports(map,"./types.js",3)},liveVar:{},onceVar:{unredactedDetails:cells[4].unredactedDetails.set,loggedErrorHandler:cells[4].loggedErrorHandler.set,makeAssert:cells[4].makeAssert.set,assert:cells[4].assert.set}}),functors[5]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{makeEvaluateFactory:cells[5].makeEvaluateFactory.set}}),functors[6]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{isValidIdentifierName:cells[6].isValidIdentifierName.set,getScopeConstants:cells[6].getScopeConstants.set}}),functors[7]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4)},liveVar:{},onceVar:{createScopeHandler:cells[7].createScopeHandler.set}}),functors[8]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{getSourceURL:cells[8].getSourceURL.set}}),functors[9]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./get-source-url.js",8)},liveVar:{},onceVar:{rejectHtmlComments:cells[9].rejectHtmlComments.set,evadeHtmlCommentTest:cells[9].evadeHtmlCommentTest.set,rejectImportExpressions:cells[9].rejectImportExpressions.set,evadeImportExpressionTest:cells[9].evadeImportExpressionTest.set,rejectSomeDirectEvalExpressions:cells[9].rejectSomeDirectEvalExpressions.set,mandatoryTransforms:cells[9].mandatoryTransforms.set,applyTransforms:cells[9].applyTransforms.set}}),functors[10]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4),observeImports(map,"./make-evaluate-factory.js",5),observeImports(map,"./scope-constants.js",6),observeImports(map,"./scope-handler.js",7),observeImports(map,"./transforms.js",9)},liveVar:{},onceVar:{makeSafeEvaluator:cells[10].makeSafeEvaluator.set}}),functors[11]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./make-safe-evaluator.js",10),observeImports(map,"./transforms.js",9)},liveVar:{},onceVar:{provideCompartmentEvaluator:cells[11].provideCompartmentEvaluator.set,compartmentEvaluate:cells[11].compartmentEvaluate.set}}),functors[12]({imports(entries){new Map(entries)},liveVar:{},onceVar:{makeEvalFunction:cells[12].makeEvalFunction.set}}),functors[13]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4)},liveVar:{},onceVar:{makeFunctionConstructor:cells[13].makeFunctionConstructor.set}}),functors[14]({imports(entries){new Map(entries)},liveVar:{},onceVar:{constantProperties:cells[14].constantProperties.set,universalPropertyNames:cells[14].universalPropertyNames.set,initialGlobalPropertyNames:cells[14].initialGlobalPropertyNames.set,sharedGlobalPropertyNames:cells[14].sharedGlobalPropertyNames.set,uniqueGlobalPropertyNames:cells[14].uniqueGlobalPropertyNames.set,NativeErrors:cells[14].NativeErrors.set,FunctionInstance:cells[14].FunctionInstance.set,isAccessorPermit:cells[14].isAccessorPermit.set,whitelist:cells[14].whitelist.set}}),functors[15]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./make-eval-function.js",12),observeImports(map,"./make-function-constructor.js",13),observeImports(map,"./whitelist.js",14)},liveVar:{},onceVar:{setGlobalObjectConstantProperties:cells[15].setGlobalObjectConstantProperties.set,setGlobalObjectMutableProperties:cells[15].setGlobalObjectMutableProperties.set}}),functors[16]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4)},liveVar:{},onceVar:{makeAlias:cells[16].makeAlias.set,load:cells[16].load.set}}),functors[17]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4),observeImports(map,"./module-load.js",16)},liveVar:{},onceVar:{deferExports:cells[17].deferExports.set,getDeferredExports:cells[17].getDeferredExports.set}}),functors[18]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./compartment-evaluate.js",11),observeImports(map,"./error/assert.js",4),observeImports(map,"./module-proxy.js",17)},liveVar:{},onceVar:{makeThirdPartyModuleInstance:cells[18].makeThirdPartyModuleInstance.set,makeModuleInstance:cells[18].makeModuleInstance.set}}),functors[19]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4),observeImports(map,"./module-instance.js",18)},liveVar:{},onceVar:{link:cells[19].link.set,instantiate:cells[19].instantiate.set}}),functors[20]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./compartment-evaluate.js",11),observeImports(map,"./error/assert.js",4),observeImports(map,"./global-object.js",15),observeImports(map,"./make-safe-evaluator.js",10),observeImports(map,"./module-link.js",19),observeImports(map,"./module-load.js",16),observeImports(map,"./module-proxy.js",17),observeImports(map,"./scope-constants.js",6),observeImports(map,"./whitelist.js",14)},liveVar:{},onceVar:{InertCompartment:cells[20].InertCompartment.set,CompartmentPrototype:cells[20].CompartmentPrototype.set,makeCompartmentConstructor:cells[20].makeCompartmentConstructor.set}}),functors[21]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./whitelist.js",14)},liveVar:{},onceVar:{makeIntrinsicsCollector:cells[21].makeIntrinsicsCollector.set,getGlobalIntrinsics:cells[21].getGlobalIntrinsics.set}}),functors[22]({imports(entries){new Map(entries)},liveVar:{},onceVar:{minEnablements:cells[22].minEnablements.set,moderateEnablements:cells[22].moderateEnablements.set,severeEnablements:cells[22].severeEnablements.set}}),functors[23]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./enablements.js",22)},liveVar:{},onceVar:{default:cells[23].default.set}}),functors[24]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4)},liveVar:{},onceVar:{makeEnvironmentCaptor:cells[24].makeEnvironmentCaptor.set}}),functors[25]({imports(entries){const map=new Map(entries);observeImports(map,"../commons.js",0),observeImports(map,"./internal-types.js",1),observeImports(map,"./types.js",3)},liveVar:{},onceVar:{makeLoggingConsoleKit:cells[25].makeLoggingConsoleKit.set,makeCausalConsole:cells[25].makeCausalConsole.set,filterConsole:cells[25].filterConsole.set,consoleWhitelist:cells[25].consoleWhitelist.set,BASE_CONSOLE_LEVEL:cells[25].BASE_CONSOLE_LEVEL.set}}),functors[26]({imports(entries){const map=new Map(entries);observeImports(map,"../commons.js",0),observeImports(map,"./assert.js",4),observeImports(map,"./console.js",25),observeImports(map,"./internal-types.js",1),observeImports(map,"./types.js",3)},liveVar:{},onceVar:{tameConsole:cells[26].tameConsole.set}}),functors[27]({imports(entries){observeImports(new Map(entries),"../commons.js",0)},liveVar:{},onceVar:{filterFileName:cells[27].filterFileName.set,shortenCallSiteString:cells[27].shortenCallSiteString.set,tameV8ErrorConstructor:cells[27].tameV8ErrorConstructor.set}}),functors[28]({imports(entries){const map=new Map(entries);observeImports(map,"../commons.js",0),observeImports(map,"../whitelist.js",14),observeImports(map,"./tame-v8-error-constructor.js",27)},liveVar:{},onceVar:{default:cells[28].default.set}}),functors[29]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./compartment-shim.js",20)},liveVar:{},onceVar:{getAnonymousIntrinsics:cells[29].getAnonymousIntrinsics.set}}),functors[30]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{makeHardener:cells[30].makeHardener.set}}),functors[31]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{default:cells[31].default.set}}),functors[32]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{tameDomains:cells[32].tameDomains.set}}),functors[33]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{default:cells[33].default.set}}),functors[34]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{tameFunctionToString:cells[34].tameFunctionToString.set}}),functors[35]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./error/assert.js",4)},liveVar:{},onceVar:{default:cells[35].default.set}}),functors[36]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{default:cells[36].default.set}}),functors[37]({imports(entries){observeImports(new Map(entries),"./commons.js",0)},liveVar:{},onceVar:{default:cells[37].default.set}}),functors[38]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./whitelist.js",14)},liveVar:{},onceVar:{default:cells[38].default.set}}),functors[39]({imports(entries){const map=new Map(entries);observeImports(map,"./commons.js",0),observeImports(map,"./compartment-shim.js",20),observeImports(map,"./enable-property-overrides.js",23),observeImports(map,"./environment-options.js",24),observeImports(map,"./error/assert.js",4),observeImports(map,"./error/stringify-utils.js",2),observeImports(map,"./error/tame-console.js",26),observeImports(map,"./error/tame-error-constructor.js",28),observeImports(map,"./get-anonymous-intrinsics.js",29),observeImports(map,"./global-object.js",15),observeImports(map,"./intrinsics.js",21),observeImports(map,"./make-hardener.js",30),observeImports(map,"./make-safe-evaluator.js",10),observeImports(map,"./tame-date-constructor.js",31),observeImports(map,"./tame-domains.js",32),observeImports(map,"./tame-function-constructors.js",33),observeImports(map,"./tame-function-tostring.js",34),observeImports(map,"./tame-locale-methods.js",35),observeImports(map,"./tame-math-object.js",36),observeImports(map,"./tame-regexp-constructor.js",37),observeImports(map,"./whitelist-intrinsics.js",38),observeImports(map,"./whitelist.js",14)},liveVar:{},onceVar:{repairIntrinsics:cells[39].repairIntrinsics.set,lockdown:cells[39].lockdown.set}}),functors[40]({imports(entries){const map=new Map(entries);observeImports(map,"./src/commons.js",0),observeImports(map,"./src/compartment-shim.js",20),observeImports(map,"./src/error/assert.js",4),observeImports(map,"./src/intrinsics.js",21),observeImports(map,"./src/lockdown-shim.js",39),observeImports(map,"./src/tame-function-tostring.js",34)},liveVar:{},onceVar:{}})})();!function(){var e=function(e){var t;return function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}},t=e((function(e,t){(function(t,i){(function(){"use strict";var o;e.exports=f,f.ReadableState=d,D.EventEmitter;var a=function(e,t){return e.listeners(t).length},s=cr.Buffer,u=i.Uint8Array||function(){};et.inherits=tt;var l,c=void 0;c=x&&x.debuglog?x.debuglog("stream"):function(){},et.inherits(f,lr);var h=["error","close","destroy","pause","resume"];function d(e,t){o=o||n({}),e=e||{},this.objectMode=!!e.objectMode,t instanceof o&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new yr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=r({}).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function f(e){if(o=o||n({}),!(this instanceof f))return new f(e);this._readableState=new d(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),lr.call(this)}function p(e,t,r,n,i){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,m(e)}}(e,a)):(i||(o=function(e,t){var r,n;return n=t,s.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):g(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?g(e,a,t,!1):w(e,a)):g(e,a,t,!1))):n||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function g(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&m(e)),w(e,t)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),f.prototype.destroy=br.destroy,f.prototype._undestroy=br.undestroy,f.prototype._destroy=function(e,t){this.push(null),t(e)},f.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),p(this,e,t,!1,r)},f.prototype.unshift=function(e){return p(this,e,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(e){return l||(l=r({}).StringDecoder),this._readableState.decoder=new l(e),this._readableState.encoding=e,this};function y(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?ur(b,e):b(e))}function b(e){c("emit readable"),e.emit("readable"),E(e)}function w(e,t){t.readingMore||(t.readingMore=!0,ur(v,e,t))}function v(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function _(e){c("readable nexttick read 0"),e.read(0)}function S(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=s.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0==(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function k(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,ur(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}f.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?k(this):m(this),null;if(0===(e=y(e,t))&&t.ended)return 0===t.length&&k(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=y(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&k(this)),null!==n&&this.emit("data",n),n},f.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(e,r){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,r);var o=r&&!1===r.end||e===t.stdout||e===t.stderr?y:s;function s(){c("onend"),e.end()}i.endEmitted?ur(o):n.once("end",o),e.on("unpipe",(function t(r,o){c("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",y),n.removeListener("data",d),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,E(e))}}(n);e.on("drain",u);var l=!1,h=!1;function d(t){c("ondata"),h=!1,!1!==e.write(t)||h||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==C(i.pipes,e))&&!l&&(c("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function f(t){c("onerror",t),y(),e.removeListener("error",f),0===a(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",g),y()}function g(){c("onfinish"),e.removeListener("close",p),y()}function y(){c("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener("error",r);e._events&&e._events.error?Ne(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on("error",r)}(e,0,f),e.once("close",p),e.once("finish",g),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},f.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=C(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},f.prototype.on=function(e,t){var r=lr.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&m(this):ur(_,this))}return r},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,ur(S,e,t))}(this,e)),this},f.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(c("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){c("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<h.length;o++)e.on(h[o],n.emit.bind(n,h[o]));return n._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},n},f._fromList=M}).call(this)}).call(this,m,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),r=e((function(e,t){"use strict";var r=cr.Buffer,n=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd".repeat(r+2)}}(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd".repeat(this.lastTotal-this.lastNeed):t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),n=e((function(e,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c,et.inherits=tt;var o=t({}),a=i({});et.inherits(c,o);for(var s=n(a.prototype),u=0;u<s.length;u++){var l=s[u];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||ur(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),ur(t,e)}})),i=e((function(e,t){(function(t,r,i){(function(){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(void 0),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=p;var a,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:ur;p.WritableState=f,et.inherits=tt;var u,l={deprecate:at},c=cr.Buffer,h=r.Uint8Array||function(){};function d(){}function f(e,t){a=a||n({}),e=e||{},this.objectMode=!!e.objectMode,t instanceof a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(ur(i,n),ur(v,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),v(e,t))}(e,r,n,t,i);else{var o=b(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?s(y,e,r,o,i):y(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function p(e){if(a=a||n({}),!(u.call(p,this)||this instanceof a))return new p(e);this._writableState=new f(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),lr.call(this)}function g(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function y(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),v(e,t)}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,g(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t)}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(g(e,t,!1,t.objectMode?1:l.length,l,c,h),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),v(e,t)}))}function v(e,t){var r=b(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,ur(w,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}et.inherits(p,lr),f.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(f.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||e&&e._writableState instanceof f}})):u=function(e){return e instanceof this},p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},p.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,a=(n=e,(c.isBuffer(n)||n instanceof h)&&!i.objectMode);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=d),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),ur(t,r)}(this,r):(a||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),ur(n,o),i=!1),i}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,s,n,i,o);return u}(this,i,a,e,t,r)),o},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},p.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},p.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},p.prototype._writev=null,p.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,v(e,t),r&&(t.finished?ur(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),p.prototype.destroy=br.destroy,p.prototype._undestroy=br.undestroy,p.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,m,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},l({}).setImmediate)})),o=e((function(e,t){(function(t,r){(function(){"use strict";var n;e.exports=p,p.ReadableState=f,D.EventEmitter;var i=function(e,t){return e.listeners(t).length},o=Ke.Buffer,u=r.Uint8Array||function(){},l=Object.create(et);l.inherits=tt;var c,h=void 0;h=x&&x.debuglog?x.debuglog("stream"):function(){},l.inherits(p,Ie);var d=["error","close","destroy","pause","resume"];function f(e,t){e=e||{};var r=t instanceof(n=n||s({}));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:u,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new rt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=a({}).StringDecoder),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function p(e){if(n=n||s({}),!(this instanceof p))return new p(e);this._readableState=new f(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Ie.call(this)}function g(e,t,r,n,i){var a,s=e._readableState;return null===t?(s.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,b(e)}}(e,s)):(i||(a=function(e,t){var r,n;return n=t,o.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):y(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?y(e,s,t,!1):v(e,s)):y(e,s,t,!1))):n||(s.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function y(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&b(e)),v(e,t)}Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),p.prototype.destroy=ot.destroy,p.prototype._undestroy=ot.undestroy,p.prototype._destroy=function(e,t){this.push(null),t(e)},p.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),g(this,e,t,!1,r)},p.prototype.unshift=function(e){return g(this,e,null,!0,!1)},p.prototype.isPaused=function(){return!1===this._readableState.flowing},p.prototype.setEncoding=function(e){return c||(c=a({}).StringDecoder),this._readableState.decoder=new c(e),this._readableState.encoding=e,this};function m(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function b(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Le.nextTick(w,e):w(e))}function w(e){h("emit readable"),e.emit("readable"),M(e)}function v(e,t){t.readingMore||(t.readingMore=!0,Le.nextTick(_,e,t))}function _(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function S(e){h("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=o.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0==(e-=s)){s===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(s));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Le.nextTick(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function j(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}p.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):b(this),null;if(0===(e=m(e,t))&&t.ended)return 0===t.length&&R(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=m(r,t))),null===(n=e>0?k(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==n&&this.emit("data",n),n},p.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},p.prototype.pipe=function(e,r){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,r);var a=r&&!1===r.end||e===t.stdout||e===t.stderr?y:s;function s(){h("onend"),e.end()}o.endEmitted?Le.nextTick(a):n.once("end",a),e.on("unpipe",(function t(r,i){h("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",y),n.removeListener("data",d),l=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,M(e))}}(n);e.on("drain",u);var l=!1,c=!1;function d(t){h("ondata"),c=!1,!1!==e.write(t)||c||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==j(o.pipes,e))&&!l&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,c=!0),n.pause())}function f(t){h("onerror",t),y(),e.removeListener("error",f),0===i(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",g),y()}function g(){h("onfinish"),e.removeListener("close",p),y()}function y(){h("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener("error",r);e._events&&e._events.error?Ne(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on("error",r)}(e,0,f),e.once("close",p),e.once("finish",g),e.emit("pipe",n),o.flowing||(h("pipe resume"),n.resume()),e},p.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=j(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},p.prototype.on=function(e,t){var r=Ie.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&b(this):Le.nextTick(S,this))}return r},p.prototype.addListener=p.prototype.on,p.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Le.nextTick(E,e,t))}(this,e)),this},p.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},p.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<d.length;o++)e.on(d[o],this.emit.bind(this,d[o]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),p._fromList=k}).call(this)}).call(this,m,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),a=e((function(e,t){"use strict";var r=Ke.Buffer,n=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),s=e((function(e,t){"use strict";var r=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var n=Object.create(et);n.inherits=tt;var i=o({}),a=u({});n.inherits(h,i);for(var s=r(a.prototype),l=0;l<s.length;l++){var c=s[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||Le.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),Le.nextTick(t,e)}})),u=e((function(e,t){(function(t,r,n){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(void 0),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=g;var o,a=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:Le.nextTick;g.WritableState=p;var u=Object.create(et);u.inherits=tt;var l,c={deprecate:at},h=Ke.Buffer,d=r.Uint8Array||function(){};function f(){}function p(e,t){o=o||s({}),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,u=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(Le.nextTick(i,n),Le.nextTick(_,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),_(e,t))}(e,r,n,t,i);else{var o=w(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||b(e,r),n?a(m,e,r,o,i):m(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||s({}),!(l.call(g,this)||this instanceof o))return new g(e);this._writableState=new p(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Ie.call(this)}function y(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),_(e,t)}function b(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,y(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(y(e,t,!1,t.objectMode?1:l.length,l,c,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function _(e,t){var r=w(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,Le.nextTick(v,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(g,Ie),p.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(p.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===g&&e&&e._writableState instanceof p}})):l=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,a=!i.objectMode&&(n=e,h.isBuffer(n)||n instanceof d);return a&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=f),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),Le.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Le.nextTick(n,o),i=!1),i}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r)),t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,n,i,o);return u}(this,i,a,e,t,r)),o},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?Le.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=ot.destroy,g.prototype._undestroy=ot.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,m,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},l({}).setImmediate)})),l=e((function(e,t){(function(e,r){(function(){var n=m.nextTick,i=(Function.prototype.apply,Array.prototype.slice),o={},a=0;function s(e,t){this._id=e,this._clearFn=t}s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},t.setImmediate="function"==typeof e?e:function(e){var r=a++,s=!(arguments.length<2)&&i.call(arguments,1);return o[r]=!0,n((function(){o[r]&&(s?e.apply(null,s):e.call(null),t.clearImmediate(r))})),r},t.clearImmediate="function"==typeof r?r:function(e){delete o[e]}}).call(this)}).call(this,l({}).setImmediate,l({}).clearImmediate)})),c=e((function(e,t){(function(e){(function(){"use strict";var e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=n,t.SlowBuffer=function(e){return+e!=e&&(e=0),n.alloc(+e)},t.INSPECT_MAX_BYTES=50;function r(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,n.prototype),t}function n(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return i(e,t,r)}function i(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!n.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|c(e,t),o=r(i),a=o.write(e,t);return a!==i&&(o=o.slice(0,a)),o}(e,t);if(ArrayBuffer.isView(e))return function(e){if(B(e,Uint8Array)){var t=new Uint8Array(e);return u(t.buffer,t.byteOffset,t.byteLength)}return s(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return u(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(B(e,SharedArrayBuffer)||e&&B(e.buffer,SharedArrayBuffer)))return u(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return n.from(o,t,i);var a=function(e){if(n.isBuffer(e)){var t=0|l(e.length),i=r(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||N(e.length)?r(0):s(e):"Buffer"===e.type&&Array.isArray(e.data)?s(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return n.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return o(e),r(e<0?0:0|l(e))}function s(e){for(var t=e.length<0?0:0|l(e.length),n=r(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function u(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,n.prototype),i}function l(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function c(e,t){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(e).length;default:if(o)return i?-1:A(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,i,o){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),N(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=n.from(t,i)),n.isBuffer(t))return 0===t.length?-1:f(e,t,r,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):f(e,[t],r,i,o);throw new TypeError("val must be string, number or Buffer")}function f(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){h=!1;break}if(h)return o}return-1}function p(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(N(s))return a;e[r+a]=s}return a}function g(e,t,r,n){return L(A(t,e.length-r),e,r,n)}function y(e,t,r,n){return L(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function m(e,t,r,n){return L(T(t),e,r,n)}function b(e,t,r,n){return L(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function w(e,t,r){return 0===t&&r===e.length?De.fromByteArray(e):De.fromByteArray(e.slice(t,r))}function v(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=_));return r}(n)}t.kMaxLength=2147483647,n.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),n.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(e,t,r){return i(e,t,r)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(e,t,n){return function(e,t,n){return o(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)}(e,t,n)},n.allocUnsafe=function(e){return a(e)},n.allocUnsafeSlow=function(e){return a(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==n.prototype},n.compare=function(e,t){if(B(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,o=0,a=Math.min(r,i);o<a;++o)if(e[o]!==t[o]){r=e[o],i=t[o];break}return r<i?-1:i<r?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=n.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(B(a,Uint8Array))o+a.length>i.length?n.from(a).copy(i,o):Uint8Array.prototype.set.call(i,a,o);else{if(!n.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o)}o+=a.length}return i},n.byteLength=c,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},n.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},n.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},n.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return w(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},e&&(n.prototype[e]=n.prototype.inspect),n.prototype.compare=function(e,t,r,i,o){if(B(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),!n.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),u=Math.min(a,s),l=this.slice(i,o),c=e.slice(t,r),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},n.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},n.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},n.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},n.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return p(this,e,t,r);case"utf8":case"utf-8":return g(this,e,t,r);case"ascii":case"latin1":case"binary":return y(this,e,t,r);case"base64":return m(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function E(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=I[e[o]];return i}function k(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,i,o,a){if(!n.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,i){return t=+t,r>>>=0,i||j(e,0,r,4),$e.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,i){return t=+t,r>>>=0,i||j(e,0,r,8),$e.write(e,t,r,n,52,8),r+8}n.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,n.prototype),i},n.prototype.readUintLE=n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},n.prototype.readUintBE=n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},n.prototype.readUint8=n.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},n.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),$e.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),$e.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),$e.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),$e.read(this,e,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},n.prototype.writeUint8=n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},n.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,i){if(!n.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var o=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),o},n.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!n.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=n.isBuffer(e)?e:n.from(e,i),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var x=/[^+/0-9A-Za-z-_]/g;function A(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function T(e){return De.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(x,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}var I=function(){for(var e=new Array(256),t=0;t<16;++t)for(var r=16*t,n=0;n<16;++n)e[r+n]="0123456789abcdef"[t]+"0123456789abcdef"[n];return e}()}).call(this)}).call(this,c({}).Buffer)})),h=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}},d={};function f(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function p(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}(d=h(f)).strict=h(p),f.proto=f((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return f(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return p(this)},configurable:!0})}));var g,y,m={},b=m={};function w(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function _(e){if(g===setTimeout)return setTimeout(e,0);if((g===w||!g)&&setTimeout)return g=setTimeout,setTimeout(e,0);try{return g(e,0)}catch(t){try{return g.call(null,e,0)}catch(t){return g.call(this,e,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:w}catch(e){g=w}try{y="function"==typeof clearTimeout?clearTimeout:v}catch(e){y=v}}();var S,E=[],M=!1,k=-1;function R(){M&&S&&(M=!1,S.length?E=S.concat(E):k=-1,E.length&&C())}function C(){if(!M){var e=_(R);M=!0;for(var t=E.length;t;){for(S=E,E=[];++k<t;)S&&S[k].run();k=-1,t=E.length}S=null,M=!1,function(e){if(y===clearTimeout)return clearTimeout(e);if((y===v||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(e);try{y(e)}catch(t){try{return y.call(null,e)}catch(t){return y.call(this,e)}}}(e)}}function j(e,t){this.fun=e,this.array=t}function O(){}b.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];E.push(new j(e,t)),1!==E.length||M||_(C)},j.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=O,b.addListener=O,b.once=O,b.off=O,b.removeListener=O,b.removeAllListeners=O,b.emit=O,b.prependListener=O,b.prependOnceListener=O,b.listeners=function(e){return[]},b.binding=function(e){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(e){throw new Error("process.chdir is not supported")},b.umask=function(){return 0};var P={};(function(e){(function(){var t=function(){},r=function(n,i,o){if("function"==typeof i)return r(n,null,i);i||(i={}),o=d(o||t);var a=n._writableState,s=n._readableState,u=i.readable||!1!==i.readable&&n.readable,l=i.writable||!1!==i.writable&&n.writable,c=!1,h=function(){n.writable||f()},f=function(){l=!1,u||o.call(n)},p=function(){u=!1,l||o.call(n)},g=function(e){o.call(n,e?new Error("exited with error code: "+e):null)},y=function(e){o.call(n,e)},m=function(){e.nextTick(b)},b=function(){if(!c)return(!u||s&&s.ended&&!s.destroyed)&&(!l||a&&a.ended&&!a.destroyed)?void 0:o.call(n,new Error("premature close"))},w=function(){n.req.on("finish",f)};return function(e){return e.setHeader&&"function"==typeof e.abort}(n)?(n.on("complete",f),n.on("abort",m),n.req?w():n.on("request",w)):l&&!a&&(n.on("end",h),n.on("close",h)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(n)&&n.on("exit",g),n.on("end",p),n.on("finish",f),!1!==i.error&&n.on("error",y),n.on("close",m),function(){c=!0,n.removeListener("complete",f),n.removeListener("abort",m),n.removeListener("request",w),n.req&&n.req.removeListener("finish",f),n.removeListener("end",h),n.removeListener("close",h),n.removeListener("finish",f),n.removeListener("exit",g),n.removeListener("end",p),n.removeListener("error",y),n.removeListener("close",m)}};P=r}).call(this)}).call(this,m);var x={},A={};(function(e){(function(){var t=function(){},r=/^v?\.0/.test(e.version),n=function(e){return"function"==typeof e},i=function(e,i,o,a){a=d(a);var s=!1;e.on("close",(function(){s=!0})),P(e,{readable:i,writable:o},(function(e){if(e)return a(e);s=!0,a()}));var u=!1;return function(i){if(!s&&!u)return u=!0,function(e){return!!r&&!!x&&(e instanceof(x.ReadStream||t)||e instanceof(x.WriteStream||t))&&n(e.close)}(e)?e.close(t):function(e){return e.setHeader&&n(e.abort)}(e)?e.abort():n(e.destroy)?e.destroy():void a(i||new Error("stream was destroyed"))}},o=function(e){e()},a=function(e,t){return e.pipe(t)};A=function(){var e,r=Array.prototype.slice.call(arguments),s=n(r[r.length-1]||t)&&r.pop()||t;if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new Error("pump requires two streams per minimum");var u=r.map((function(t,n){var a=n<r.length-1;return i(t,a,n>0,(function(t){e||(e=t),t&&u.forEach(o),a||(u.forEach(o),s(e))}))}));return r.reduce(a)}}).call(this)}).call(this,m);var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.getUniqueId=void 0;let L=Math.floor(4294967295*Math.random());T.getUniqueId=function(){return L=(L+1)%4294967295};var B={};Object.defineProperty(B,"__esModule",{value:!0}),B.createIdRemapMiddleware=void 0,B.createIdRemapMiddleware=function(){return(e,t,r,n)=>{const i=e.id,o=T.getUniqueId();e.id=o,t.id=o,r(r=>{e.id=i,t.id=i,r()})}};var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.createAsyncMiddleware=void 0,N.createAsyncMiddleware=function(e){return async(t,r,n,i)=>{let o;const a=new Promise(e=>{o=e});let s=null,u=!1;const l=async()=>{u=!0,n(e=>{s=e,o()}),await a};try{await e(t,r,l),u?(await a,s(null)):i(null)}catch(c){s?s(c):i(c)}}};var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.createScaffoldMiddleware=void 0,I.createScaffoldMiddleware=function(e){return(t,r,n,i)=>{const o=e[t.method];return void 0===o?n():"function"==typeof o?o(t,r,n,i):(r.result=o,i())}};var D={},q=Object.create||function(e){var t=function(){};return t.prototype=e,new t},U=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},W=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function F(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=q(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}D=F,F.EventEmitter=F,F.prototype._events=void 0,F.prototype._maxListeners=void 0;var z,H=10;try{var J={};Object.defineProperty&&Object.defineProperty(J,"x",{value:0}),z=0===J.x}catch(Ir){z=!1}function V(e){return void 0===e._maxListeners?F.defaultMaxListeners:e._maxListeners}function $(e,t,r,n){var i,o,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]):(o=e._events=q(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(i=V(e))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=r,++e._eventsCount;return e}function K(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function Y(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=W.call(K,n);return i.listener=r,n.wrapFn=i,i}function G(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):Z(i,i.length):[]}function X(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function Z(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}z?Object.defineProperty(F,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');H=e}}):F.defaultMaxListeners=H,F.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},F.prototype.getMaxListeners=function(){return V(this)},F.prototype.emit=function(e){var t,r,n,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(r=a[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=Z(e,n),o=0;o<n;++o)i[o].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=Z(e,i),a=0;a<i;++a)o[a].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,a=Z(e,o),s=0;s<o;++s)a[s].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var a=e.length,s=Z(e,a),u=0;u<a;++u)s[u].call(r,n,i,o)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=Z(e,i),a=0;a<i;++a)o[a].apply(r,n)}(r,l,this,i)}return!0},F.prototype.addListener=function(e,t){return $(this,e,t,!1)},F.prototype.on=F.prototype.addListener,F.prototype.prependListener=function(e,t){return $(this,e,t,!0)},F.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Y(this,e,t)),this},F.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Y(this,e,t)),this},F.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=q(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,a||t)}return this},F.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=q(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=q(null):delete r[e]),this;if(0===arguments.length){var i,o=U(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=q(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},F.prototype.listeners=function(e){return G(this,e,!0)},F.prototype.rawListeners=function(e){return G(this,e,!1)},F.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):X.call(e,t)},F.prototype.listenerCount=X,F.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Q={};function ee(e,t,r){try{Reflect.apply(e,t,r)}catch(Ir){setTimeout(()=>{throw Ir})}}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=class extends D.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const i=n[e];if(void 0===i)return!1;if("function"==typeof i)ee(i,this,t);else{const e=i.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(i);for(let n=0;n<e;n+=1)ee(r[n],this,t)}return!0}};var te={};te=ie,ie.default=ie,ie.stable=ae,ie.stableStringify=ae;var re=[],ne=[];function ie(e,t,r){var n;for(function e(t,r,n,i){var o;if("object"==typeof t&&null!==t){for(o=0;o<n.length;o++)if(n[o]===t){var a=Object.getOwnPropertyDescriptor(i,r);return void(void 0!==a.get?a.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),re.push([i,r,t,a])):ne.push([t,r]):(i[r]="[Circular]",re.push([i,r,t])))}if(n.push(t),Array.isArray(t))for(o=0;o<t.length;o++)e(t[o],o,n,t);else{var s=Object.keys(t);for(o=0;o<s.length;o++){var u=s[o];e(t[u],u,n,t)}}n.pop()}}(e,"",[],void 0),n=0===ne.length?JSON.stringify(e,t,r):JSON.stringify(e,se(t),r);0!==re.length;){var i=re.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function oe(e,t){return e<t?-1:e>t?1:0}function ae(e,t,r){var n,i=function e(t,r,n,i){var o;if("object"==typeof t&&null!==t){for(o=0;o<n.length;o++)if(n[o]===t){var a=Object.getOwnPropertyDescriptor(i,r);return void(void 0!==a.get?a.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),re.push([i,r,t,a])):ne.push([t,r]):(i[r]="[Circular]",re.push([i,r,t])))}if("function"==typeof t.toJSON)return;if(n.push(t),Array.isArray(t))for(o=0;o<t.length;o++)e(t[o],o,n,t);else{var s={},u=Object.keys(t).sort(oe);for(o=0;o<u.length;o++){var l=u[o];e(t[l],l,n,t),s[l]=t[l]}if(void 0===i)return s;re.push([i,r,t]),i[r]=s}n.pop()}}(e,"",[],void 0)||e;for(n=0===ne.length?JSON.stringify(i,t,r):JSON.stringify(i,se(t),r);0!==re.length;){var o=re.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return n}function se(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(ne.length>0)for(var n=0;n<ne.length;n++){var i=ne[n];if(i[1]===t&&i[0]===r){r="[Circular]",ne.splice(n,1);break}}return e.call(this,t,r)}}var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.EthereumProviderError=ue.EthereumRpcError=void 0;class le extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return te.default(this.serialize(),ce,2)}}function ce(e,t){if("[Circular]"!==t)return t}ue.EthereumRpcError=le,ue.EthereumProviderError=class extends le{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}};var he={};Object.defineProperty(he,"__esModule",{value:!0}),he.errorValues=he.errorCodes=void 0,he.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},he.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};var de={};Object.defineProperty(de,"__esModule",{value:!0}),de.serializeError=de.getMessageFromCode=de.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const fe=he.errorCodes.rpc.internal,pe={code:fe,message:ge(fe)};function ge(e,t="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){const t=e.toString();if(we(he.errorValues,t))return he.errorValues[t].message;if(me(e))return de.JSON_RPC_SERVER_ERROR_MESSAGE}return t}function ye(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!he.errorValues[t]||!!me(e)}function me(e){return e>=-32099&&e<=-32e3}function be(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function we(e,t){return Object.prototype.hasOwnProperty.call(e,t)}de.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",de.getMessageFromCode=ge,de.serializeError=function(e,{fallbackError:t=pe,shouldIncludeStack:r=!1}={}){var n,i;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof ue.EthereumRpcError)return e.serialize();const o={};if(e&&"object"==typeof e&&!Array.isArray(e)&&we(e,"code")&&ye(e.code)){const t=e;o.code=t.code,t.message&&"string"==typeof t.message?(o.message=t.message,we(t,"data")&&(o.data=t.data)):(o.message=ge(o.code),o.data={originalError:be(e)})}else{o.code=t.code;const r=null===(n=e)||void 0===n?void 0:n.message;o.message=r&&"string"==typeof r?r:t.message,o.data={originalError:be(e)}}const a=null===(i=e)||void 0===i?void 0:i.stack;return r&&e&&a&&"string"==typeof a&&(o.stack=a),o};var ve={};function _e(e,t){const[r,n]=Ee(t);return new ue.EthereumRpcError(e,r||de.getMessageFromCode(e),n)}function Se(e,t){const[r,n]=Ee(t);return new ue.EthereumProviderError(e,r||de.getMessageFromCode(e),n)}function Ee(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}Object.defineProperty(ve,"__esModule",{value:!0}),ve.ethErrors=void 0,ve.ethErrors={rpc:{parse:e=>_e(he.errorCodes.rpc.parse,e),invalidRequest:e=>_e(he.errorCodes.rpc.invalidRequest,e),invalidParams:e=>_e(he.errorCodes.rpc.invalidParams,e),methodNotFound:e=>_e(he.errorCodes.rpc.methodNotFound,e),internal:e=>_e(he.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return _e(t,e)},invalidInput:e=>_e(he.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>_e(he.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>_e(he.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>_e(he.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>_e(he.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>_e(he.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Se(he.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Se(he.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Se(he.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Se(he.errorCodes.provider.disconnected,e),chainDisconnected:e=>Se(he.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new ue.EthereumProviderError(t,r,n)}}};var Me={};Object.defineProperty(Me,"__esModule",{value:!0}),Me.serializeError=Me.EthereumRpcError=Me.ethErrors=Me.errorCodes=void 0,Object.defineProperty(Me,"EthereumRpcError",{enumerable:!0,get:function(){return ue.EthereumRpcError}}),Object.defineProperty(Me,"EthereumProviderError",{enumerable:!0,get:function(){return ue.EthereumProviderError}}),Object.defineProperty(Me,"serializeError",{enumerable:!0,get:function(){return de.serializeError}}),Object.defineProperty(Me,"getMessageFromCode",{enumerable:!0,get:function(){return de.getMessageFromCode}}),Object.defineProperty(Me,"ethErrors",{enumerable:!0,get:function(){return ve.ethErrors}}),Object.defineProperty(Me,"errorCodes",{enumerable:!0,get:function(){return he.errorCodes}});var ke={},Re=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0}),ke.JsonRpcEngine=void 0;const Ce=Re(Q);class je extends Ce.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,a]=await je._runAllMiddleware(e,t,this._middleware);return o?(await je._runReturnHandlers(a),n(i)):r(async e=>{try{await je._runReturnHandlers(a)}catch(t){return e(t)}return e()})}catch(i){return n(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise(t=>{this._handle(e,(e,r)=>{t(r)})})}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new Me.EthereumRpcError(Me.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:void 0,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new Me.EthereumRpcError(Me.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=Object.assign({},e),n={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,n)}catch(o){i=o}return i&&(delete n.result,n.error||(n.error=Me.serializeError(i))),t(i,n)}async _processRequest(e,t){const[r,n,i]=await je._runAllMiddleware(e,t,this._middleware);if(je._checkForCompletion(e,t,n),await je._runReturnHandlers(i),r)throw r}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const a of r)if([i,o]=await je._runMiddleware(e,t,a,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise(i=>{const o=e=>{const r=e||t.error;r&&(t.error=Me.serializeError(r)),i([r,!0])},a=r=>{t.error?o(t.error):(r&&("function"!=typeof r&&o(new Me.EthereumRpcError(Me.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${Oe(e)}`,{request:e})),n.push(r)),i([null,!1]))};try{r(e,t,a,o)}catch(s){o(s)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((e,r)=>{t(t=>t?r(t):e())})}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new Me.EthereumRpcError(Me.errorCodes.rpc.internal,"JsonRpcEngine: Response has no error or result for request:\n"+Oe(e),{request:e});if(!r)throw new Me.EthereumRpcError(Me.errorCodes.rpc.internal,"JsonRpcEngine: Nothing ended request:\n"+Oe(e),{request:e})}}function Oe(e){return JSON.stringify(e,null,2)}ke.JsonRpcEngine=je;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.mergeMiddleware=void 0,Pe.mergeMiddleware=function(e){const t=new ke.JsonRpcEngine;return e.forEach(e=>t.push(e)),t.asMiddleware()};var xe={},Ae=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),Te=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Ae(t,e,r)};Object.defineProperty(xe,"__esModule",{value:!0}),Te(B,xe),Te(N,xe),Te(I,xe),Te(T,xe),Te(ke,xe),Te(Pe,xe);var Le={};(function(e){(function(){"use strict";Le=void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:e}).call(this)}).call(this,m);for(var Be={}.toString,Ne=Array.isArray||function(e){return"[object Array]"==Be.call(e)},Ie=D.EventEmitter,De={toByteArray:function(e){var t,r,n=Je(e),i=n[0],o=n[1],a=new We(function(e,t,r){return 3*(t+r)/4-r}(0,i,o)),s=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)t=Ue[e.charCodeAt(r)]<<18|Ue[e.charCodeAt(r+1)]<<12|Ue[e.charCodeAt(r+2)]<<6|Ue[e.charCodeAt(r+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=Ue[e.charCodeAt(r)]<<2|Ue[e.charCodeAt(r+1)]>>4,a[s++]=255&t),1===o&&(t=Ue[e.charCodeAt(r)]<<10|Ue[e.charCodeAt(r+1)]<<4|Ue[e.charCodeAt(r+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},fromByteArray:function(e){for(var t,r=e.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(Ve(e,o,o+16383>a?a:o+16383));return 1===n?(t=e[r-1],i.push(qe[t>>2]+qe[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(qe[t>>10]+qe[t>>4&63]+qe[t<<2&63]+"=")),i.join("")}},qe=[],Ue=[],We="undefined"!=typeof Uint8Array?Uint8Array:Array,Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ze=0,He=Fe.length;ze<He;++ze)qe[ze]=Fe[ze],Ue[Fe.charCodeAt(ze)]=ze;function Je(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function Ve(e,t,r){for(var n,i,o=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(qe[(i=n)>>18&63]+qe[i>>12&63]+qe[i>>6&63]+qe[63&i]);return o.join("")}Ue["-".charCodeAt(0)]=62,Ue["_".charCodeAt(0)]=63;var $e={read:function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=l}return(f?-1:1)*a*Math.pow(2,o-n)},write:function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*g}},Ke={},Ye=c({}),Ge=Ye.Buffer;function Xe(e,t){for(var r in e)t[r]=e[r]}function Ze(e,t,r){return Ge(e,t,r)}function Qe(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}Ge.from&&Ge.alloc&&Ge.allocUnsafe&&Ge.allocUnsafeSlow?Ke=Ye:(Xe(Ye,Ke),Ke.Buffer=Ze),Xe(Ge,Ze),Ze.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Ge(e,t,r)},Ze.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=Ge(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},Ze.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Ge(e)},Ze.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Ye.SlowBuffer(e)};var et={};(function(e){(function(){function t(e){return Object.prototype.toString.call(e)}et.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},et.isBoolean=function(e){return"boolean"==typeof e},et.isNull=function(e){return null===e},et.isNullOrUndefined=function(e){return null==e},et.isNumber=function(e){return"number"==typeof e},et.isString=function(e){return"string"==typeof e},et.isSymbol=function(e){return"symbol"==typeof e},et.isUndefined=function(e){return void 0===e},et.isRegExp=function(e){return"[object RegExp]"===t(e)},et.isObject=function(e){return"object"==typeof e&&null!==e},et.isDate=function(e){return"[object Date]"===t(e)},et.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},et.isFunction=function(e){return"function"==typeof e},et.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},et.isBuffer=e.isBuffer}).call(this)}).call(this,{isBuffer:function(e){return null!=e&&(Qe(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Qe(e.slice(0,0))}(e)||!!e._isBuffer)}});var tt={};tt="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var rt={},nt=Ke.Buffer;function it(e,t){e.emit("error",t)}rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return nt.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n=nt.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=n,r=o,i.data.copy(t,r),o+=i.data.length,i=i.next;return n},e}(),x&&x.inspect&&x.inspect.custom&&(rt.prototype[x.inspect.custom]=function(){var e=x.inspect({length:this.length});return this.constructor.name+" "+e});var ot={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||Le.nextTick(it,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(Le.nextTick(it,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},at={};(function(e){(function(){function t(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}at=function(e,r){if(t("noDeprecation"))return e;var n=!1;return function(){if(!n){if(t("throwDeprecation"))throw new Error(r);t("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var st=ht,ut=s({}),lt=Object.create(et);function ct(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ht(e){if(!(this instanceof ht))return new ht(e);ut.call(this,e),this._transformState={afterTransform:ct.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",dt)}function dt(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){ft(e,t,r)})):ft(this,null,null)}function ft(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}lt.inherits=tt,lt.inherits(ht,ut),ht.prototype.push=function(e,t){return this._transformState.needTransform=!1,ut.prototype.push.call(this,e,t)},ht.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},ht.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},ht.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},ht.prototype._destroy=function(e,t){var r=this;ut.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))};var pt=yt,gt=Object.create(et);function yt(e){if(!(this instanceof yt))return new yt(e);st.call(this,e)}gt.inherits=tt,gt.inherits(yt,st),yt.prototype._transform=function(e,t,r){r(null,e)};var mt={};(mt=mt=o({})).Stream=mt,mt.Readable=mt,mt.Writable=u({}),mt.Duplex=s({}),mt.Transform=st,mt.PassThrough=pt;var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=function(e){if(!e||!e.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new mt.Duplex({objectMode:!0,read:function(){},write:function(e,n,i){t.handle(e,(e,t)=>{r.push(t)}),i()}});return t.on&&t.on("notification",e=>{r.push(e)}),r};var wt={},vt=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wt,"__esModule",{value:!0});const _t=vt(Q);wt.default=function(){const e={},t=new mt.Duplex({objectMode:!0,read:function(){return!1},write:function(t,n,i){let o;try{!t.id?function(e){r.emit("notification",e)}(t):function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(t)}catch(a){o=a}i(o)}}),r=new _t.default;return{events:r,middleware:(r,n,i,o)=>{t.push(r),e[r.id]={req:r,res:n,next:i,end:o}},stream:t}};var St={},Et=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(St,"__esModule",{value:!0}),St.createStreamMiddleware=void 0;Et(bt).default;const Mt=Et(wt);St.createStreamMiddleware=Mt.default;var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.Substream=void 0,kt.Substream=class extends mt.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}};var Rt={},Ct=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.ObjectMultiplex=void 0;const jt=Ct(P),Ot=Ct(d),Pt=Symbol("IGNORE_SUBSTREAM");Rt.ObjectMultiplex=class extends mt.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new kt.Substream({parent:this,name:e});return this._substreams[e]=t,function(e,r){const n=Ot.default(e=>t.destroy(e||void 0));jt.default(e,{readable:!1},n),jt.default(e,{writable:!1},n)}(this),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=Pt}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const o=this._substreams[n];return o?(o!==Pt&&o.push(i),r()):(console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}};var xt=Rt.ObjectMultiplex,At=Array.isArray,Tt=Object.keys,Lt=Object.prototype.hasOwnProperty,Bt={};const Nt=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;Nt.writable=e=>Nt(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,Nt.readable=e=>Nt(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,Nt.duplex=e=>Nt.writable(e)&&Nt.readable(e),Nt.transform=e=>Nt.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,Bt=Nt;var It={};Object.defineProperty(It,"__esModule",{value:!0});It.default={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(e,t)=>`Invalid options. Received: { maxEventListeners: ${e}, shouldSendMetadata: ${t} }`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.EMITTED_NOTIFICATIONS=Dt.NOOP=Dt.logStreamDisconnectWarning=Dt.getRpcPromiseCallback=Dt.createErrorMiddleware=void 0,Dt.createErrorMiddleware=function(e){return(t,r,n)=>{"string"==typeof t.method&&t.method||(r.error=Me.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:t})),n(t=>{const{error:n}=r;return n?(e.error("MetaMask - RPC Error: "+n.message,n),t()):t()})}},Dt.getRpcPromiseCallback=(e,t,r=!0)=>(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)},Dt.logStreamDisconnectWarning=function(e,t,r,n){let i=`MetaMask: Lost connection to "${t}".`;(null==r?void 0:r.stack)&&(i+="\n"+r.stack),e.warn(i),n&&n.listenerCount("error")>0&&n.emit("error",i)},Dt.NOOP=()=>{},Dt.EMITTED_NOTIFICATIONS=["eth_subscription"];var qt={},Ut=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qt,"__esModule",{value:!0});const Wt=Ut(It);function Ft(e){const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:window.location.hostname}async function zt(e){const{document:t}=e,r=t.querySelectorAll('head > link[rel~="icon"]');for(const n of r)if(n&&await Ht(n.href))return n.href;return null}function Ht(e){return new Promise((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(n){r(n)}})}qt.default=async function(e,t){try{const t=await async function(){return{name:Ft(window),icon:await zt(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:t},Dt.NOOP)}catch(r){t.error({message:Wt.default.errors.sendSiteMetadata(),originalError:r})}};var Jt={},Vt=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jt,"__esModule",{value:!0});const $t=Vt(A),Kt=Vt(xt),Yt=Vt(Q),Gt=Vt((function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var n,i,o,a=At(t),s=At(r);if(a&&s){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(a!=s)return!1;var u=t instanceof Date,l=r instanceof Date;if(u!=l)return!1;if(u&&l)return t.getTime()==r.getTime();var c=t instanceof RegExp,h=r instanceof RegExp;if(c!=h)return!1;if(c&&h)return t.toString()==r.toString();var d=Tt(t);if((i=d.length)!==Tt(r).length)return!1;for(n=i;0!=n--;)if(!Lt.call(r,d[n]))return!1;for(n=i;0!=n--;)if(!e(t[o=d[n]],r[o]))return!1;return!0}return t!=t&&r!=r})),Xt=Vt(It),Zt=Vt(qt);Jt.default=class extends Yt.default{constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:r=console,maxEventListeners:n=100,shouldSendMetadata:i=!0}={}){if(!Bt.duplex(e))throw new Error(Xt.default.errors.invalidDuplexStream());if("number"!=typeof n||"boolean"!=typeof i)throw new Error(Xt.default.errors.invalidOptions(n,i));!function(e){if(e!==console){if("object"==typeof e){const t=["log","warn","error","debug","info","trace"];for(const r of t)if("function"!=typeof e[r])throw new Error(Xt.default.errors.invalidLoggerMethod(r));return}throw new Error(Xt.default.errors.invalidLoggerObject())}}(r),super(),this._log=r,this.isMetaMask=!0,this.setMaxListeners(n),this._state={sentWarnings:{enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1},this._metamask=this._getExperimentalApi(),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this.enable=this.enable.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Kt.default;$t.default(e,o,e,this._handleStreamDisconnect.bind(this,"MetaMask")),o.ignoreStream("phishing"),this.on("connect",()=>{this._state.isConnected=!0});const a=St.createStreamMiddleware();$t.default(a.stream,o.createStream(t),a.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const s=new xe.JsonRpcEngine;if(s.push(xe.createIdRemapMiddleware()),s.push(Dt.createErrorMiddleware(this._log)),s.push(a.middleware),this._rpcEngine=s,this._initializeState(),a.events.on("notification",t=>{const{method:r,params:n}=t;"metamask_accountsChanged"===r?this._handleAccountsChanged(n):"metamask_unlockStateChanged"===r?this._handleUnlockStateChanged(n):"metamask_chainChanged"===r?this._handleChainChanged(n):Dt.EMITTED_NOTIFICATIONS.includes(r)?(this.emit("data",t),this.emit("message",{type:r,data:n}),this.emit("notification",t.params.result)):"METAMASK_STREAM_FAILURE"===r&&e.destroy(new Error(Xt.default.errors.permanentlyDisconnected()))}),i)if("complete"===document.readyState)Zt.default(this._rpcEngine,this._log);else{const e=()=>{Zt.default(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",e)};window.addEventListener("DOMContentLoaded",e)}}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw Me.ethErrors.rpc.invalidRequest({message:Xt.default.errors.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw Me.ethErrors.rpc.invalidRequest({message:Xt.default.errors.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw Me.ethErrors.rpc.invalidRequest({message:Xt.default.errors.invalidRequestParams(),data:e});return new Promise((e,n)=>{this._rpcRequest({method:t,params:r},Dt.getRpcPromiseCallback(e,n))})}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r,networkVersion:n}=await this.request({method:"metamask_getProviderState"});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t,networkVersion:n}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}finally{this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(r=(r,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===e.method),t(r,n)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(Xt.default.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new Me.EthereumRpcError(1013,t||Xt.default.errors.disconnected()),this._log.debug(r)):(r=new Me.EthereumRpcError(1011,t||Xt.default.errors.permanentlyDisconnected()),this._log.error(r),this.chainId=null,this.networkVersion=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r),this.emit("close",r)}}_handleStreamDisconnect(e,t){Dt.logStreamDisconnectWarning(this._log,e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){e&&"string"==typeof e&&e.startsWith("0x")&&t&&"string"==typeof t?"loading"===t?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)),t!==this.networkVersion&&(this.networkVersion=t,this._state.initialized&&this.emit("networkChanged",this.networkVersion))):this._log.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:e,networkVersion:t})}_handleAccountsChanged(e,t=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const n of e)if("string"!=typeof n){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}Gt.default(this._state.accounts,r)||(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,this.selectedAddress!==r[0]&&(this.selectedAddress=r[0]||null),this._state.initialized&&this.emit("accountsChanged",r))}_handleUnlockStateChanged({accounts:e,isUnlocked:t}={}){"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}_warnOfDeprecation(e){!1===this._state.sentWarnings.events[e]&&(this._log.warn(Xt.default.warnings.events[e]),this._state.sentWarnings.events[e]=!0)}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(e=>{this.on("_initialized",()=>e())}),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw Me.ethErrors.rpc.invalidRequest({message:"Batch requests must be made with an array of request objects.",data:e});return new Promise((t,r)=>{this._rpcRequest(e,Dt.getRpcPromiseCallback(t,r))})}},{get:(e,t,...r)=>(this._state.sentWarnings.experimentalMethods||(this._log.warn(Xt.default.warnings.experimentalMethods),this._state.sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...r))})}enable(){return this._state.sentWarnings.enable||(this._log.warn(Xt.default.warnings.enableDeprecation),this._state.sentWarnings.enable=!0),new Promise((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},Dt.getRpcPromiseCallback(e,t))}catch(r){t(r)}})}send(e,t){return this._state.sentWarnings.send||(this._log.warn(Xt.default.warnings.sendDeprecation),this._state.sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise((r,n)=>{try{this._rpcRequest({method:e,params:t},Dt.getRpcPromiseCallback(r,n,!1))}catch(i){n(i)}})}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(e,Dt.NOOP),t=!0;break;case"net_version":t=this.networkVersion||null;break;default:throw new Error(Xt.default.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}};var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.default=function(e,t=console){let r=!1,n=!1;if(!window.web3){const i="__isMetaMaskShim__";let o={currentProvider:e};Object.defineProperty(o,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),o=new Proxy(o,{get:(o,a,...s)=>("currentProvider"!==a||r?"currentProvider"===a||a===i||n||(n=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch(e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)})):(r=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(o,a,...s)),set:(...e)=>(t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...e))}),Object.defineProperty(window,"web3",{value:o,enumerable:!1,configurable:!0,writable:!0})}};var er={},tr=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(er,"__esModule",{value:!0}),er.setGlobalProvider=er.initializeProvider=void 0;const rr=tr(Jt),nr=tr(Qt);function ir(e){window.ethereum=e,window.dispatchEvent(new Event("ethereum#initialized"))}er.initializeProvider=function({connectionStream:e,jsonRpcStreamName:t,logger:r=console,maxEventListeners:n=100,shouldSendMetadata:i=!0,shouldSetOnWindow:o=!0,shouldShimWeb3:a=!1}){let s=new rr.default(e,{jsonRpcStreamName:t,logger:r,maxEventListeners:n,shouldSendMetadata:i});return s=new Proxy(s,{deleteProperty:()=>!0}),o&&ir(s),a&&nr.default(s,r),s},er.setGlobalProvider=ir;var or={},ar=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(or,"__esModule",{value:!0}),or.MetaMaskInpageProvider=void 0;const sr=ar(Jt);or.MetaMaskInpageProvider=sr.default,Object.defineProperty(or,"initializeProvider",{enumerable:!0,get:function(){return er.initializeProvider}}),Object.defineProperty(or,"setGlobalProvider",{enumerable:!0,get:function(){return er.setGlobalProvider}});ar(Qt).default;var ur={};(function(e){(function(){"use strict";ur=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}:e.nextTick}).call(this)}).call(this,m);var lr=D.EventEmitter,cr={},hr=c({}),dr=hr.Buffer;function fr(e,t){for(var r in e)t[r]=e[r]}function pr(e,t,r){return dr(e,t,r)}dr.from&&dr.alloc&&dr.allocUnsafe&&dr.allocUnsafeSlow?cr=hr:(fr(hr,cr),cr.Buffer=pr),fr(dr,pr),pr.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return dr(e,t,r)},pr.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=dr(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},pr.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return dr(e)},pr.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return hr.SlowBuffer(e)};var gr=cr.Buffer,yr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return gr.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n=gr.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=n,r=o,i.data.copy(t,r),o+=i.data.length,i=i.next;return n},e}();function mr(e,t){e.emit("error",t)}var br={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;n||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||ur(mr,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(ur(mr,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},wr=Sr,vr=n({});function _r(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Sr(e){if(!(this instanceof Sr))return new Sr(e);vr.call(this,e),this._transformState=new _r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e,r){Er(t,e,r)})):Er(t)}))}function Er(e,t,r){if(t)return e.emit("error",t);null!=r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}et.inherits=tt,et.inherits(Sr,vr),Sr.prototype.push=function(e,t){return this._transformState.needTransform=!1,vr.prototype.push.call(this,e,t)},Sr.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},Sr.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Sr.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Sr.prototype._destroy=function(e,t){var r=this;vr.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))};var Mr=kr;function kr(e){if(!(this instanceof kr))return new kr(e);wr.call(this,e)}et.inherits=tt,et.inherits(kr,wr),kr.prototype._transform=function(e,t,r){r(null,e)};var Rr={};(Rr=Rr=t({})).Stream=Rr,Rr.Readable=Rr,Rr.Writable=i({}),Rr.Duplex=n({}),Rr.Transform=wr,Rr.PassThrough=Mr;var Cr={};function jr(){}Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.BasePostMessageStream=void 0;Cr.BasePostMessageStream=class extends Rr.Duplex{constructor(){super({objectMode:!0}),this._init=!1,this._haveSyn=!1}_handshake(){this._write("SYN",null,jr),this.cork()}_onData(e){if(this._init)try{this.push(e)}catch(Ir){this.emit("error",Ir)}else"SYN"===e?(this._haveSyn=!0,this._write("ACK",null,jr)):"ACK"===e&&(this._init=!0,this._haveSyn||this._write("ACK",null,jr),this.uncork())}_read(){}_write(e,t,r){this._postMessage(e),r()}};var Or={};Object.defineProperty(Or,"__esModule",{value:!0}),Or.WindowPostMessageStream=void 0,Or.WindowPostMessageStream=class extends Cr.BasePostMessageStream{constructor({name:e,target:t,targetWindow:r}){if(!e||!t)throw new Error("Invalid input.");super(),this._name=e,this._target=t,this._targetOrigin=r?"*":location.origin,this._targetWindow=r||window,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1),this._handshake()}_postMessage(e){this._targetWindow.postMessage({target:this._target,data:e},this._targetOrigin)}_onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!=typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_destroy(){window.removeEventListener("message",this._onMessage,!1)}};var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.DEDICATED_WORKER_NAME=void 0,Pr.DEDICATED_WORKER_NAME="dedicatedWorker";var xr={};Object.defineProperty(xr,"__esModule",{value:!0}),xr.WorkerPostMessageStream=void 0,xr.WorkerPostMessageStream=class extends Cr.BasePostMessageStream{constructor(){super(),this._name=Pr.DEDICATED_WORKER_NAME,self.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(e){self.postMessage({data:e})}_onMessage(e){const t=e.data;"object"==typeof t&&t.target===this._name&&t.data&&this._onData(t.data)}_destroy(){}};var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.WorkerParentPostMessageStream=void 0,Ar.WorkerParentPostMessageStream=class extends Cr.BasePostMessageStream{constructor({worker:e}){if(!e)throw new Error("Invalid input.");super(),this._target=Pr.DEDICATED_WORKER_NAME,this._worker=e,this._worker.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(e){this._worker.postMessage({target:this._target,data:e})}_onMessage(e){const t=e.data;"object"==typeof t&&t.data&&this._onData(t.data)}_destroy(){this._worker.onmessage=null,this._worker=null}};var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WorkerPostMessageStream=void 0,Object.defineProperty(Tr,"WindowPostMessageStream",{enumerable:!0,get:function(){return Or.WindowPostMessageStream}}),Object.defineProperty(Tr,"WorkerPostMessageStream",{enumerable:!0,get:function(){return xr.WorkerPostMessageStream}}),Object.defineProperty(Tr,"WorkerParentPostMessageStream",{enumerable:!0,get:function(){return Ar.WorkerParentPostMessageStream}});var Lr,Br={};Object.defineProperty(Br,"__esModule",{value:!0}),Br.STREAM_NAMES=void 0,(Lr=Br.STREAM_NAMES||(Br.STREAM_NAMES={})).JSON_RPC="jsonRpc",Lr.COMMAND="command";var Nr={};(function(e){(function(){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nr,"__esModule",{value:!0});const r=t(xt),n=t(A);lockdown({consoleTaming:"unsafe",errorTaming:"unsafe",mathTaming:"unsafe",dateTaming:"unsafe",overrideTaming:"severe"}),function(){function t(e){return"string"==typeof e&&Boolean(e)}(new class{constructor(){this.initialized=!1,this.snapRpcHandlers=new Map,this.commandStream=null,this.rpcStream=null}initialize(){this.initialized||this.connectToParent()}async connectToParent(){console.log("Worker: Connecting to parent.");const e=function(e,t){const i=new r.default;return n.default(e,i,e,e=>{e&&console.error("Parent stream failure, closing worker.",e),self.close()}),i}(new Tr.WorkerPostMessageStream);this.commandStream=e.createStream(Br.STREAM_NAMES.COMMAND),this.commandStream.on("data",this.onCommandRequest.bind(this)),this.rpcStream=e.createStream(Br.STREAM_NAMES.JSON_RPC)}async onCommandRequest(e){if(!e||"object"!=typeof e||Array.isArray(e))return void console.error("Command stream received non-object message.");const{id:t,method:r,params:n}=e;if(null==t||"string"!=typeof t&&"number"!=typeof t)console.error(`Command stream received invalid id "${t}".`);else switch(r){case"executeSnap":this.executeSnap(t,n);break;case"ping":this.respond(t,{result:"OK"});break;case"snapRpc":await this.handleSnapRpc(t,n);break;default:this.respond(t,{error:new Error(`Unrecognized command: ${r}.`)})}}respond(e,t){this.commandStream.write(Object.assign(Object.assign({},t),{id:e,jsonrpc:"2.0"}))}async handleSnapRpc(e,{origin:t,request:r,target:n}){const i=this.snapRpcHandlers.get(n);if(i)try{const n=await i(t,r);this.respond(e,{result:n})}catch(o){this.respond(e,{error:o})}else this.respond(e,{error:new Error(`No RPC handler registered for snap "${n}".`)})}executeSnap(e,{snapId:r,sourceCode:n}={}){if(t(r)&&t(n))try{this.startSnap(r,n),this.respond(e,{result:"OK"})}catch(Ir){this.respond(e,{error:Ir})}else this.respond(e,{error:new Error("Invalid executeSnap parameters.")})}startSnap(t,r){console.log(`starting snap '${t}' in worker`);const n=this.createSnapProvider(t),i={BigInt:BigInt,Buffer:e,console:console,crypto:crypto,Date:Date,fetch:self.fetch.bind(self),Math:Math,setTimeout:setTimeout,SubtleCrypto:SubtleCrypto,wallet:n,WebSocket:WebSocket,XMLHttpRequest:XMLHttpRequest};try{new Compartment(Object.assign(Object.assign({},i),{window:Object.assign({},i)})).evaluate(r)}catch(Ir){this.removeSnap(t),console.error(`Error while running snap '${t}' in worker:${self.name}.`,Ir)}}createSnapProvider(e){const t=new or.MetaMaskInpageProvider(this.rpcStream,{shouldSendMetadata:!1});return t.registerRpcMessageHandler=t=>{if(console.log("Worker: Registering RPC message handler",t),this.snapRpcHandlers.has(e))throw new Error("RPC handler already registered.");this.snapRpcHandlers.set(e,t)},t}removeSnap(e){this.snapRpcHandlers.delete(e)}}).initialize()}()}).call(this)}).call(this,c({}).Buffer)}();